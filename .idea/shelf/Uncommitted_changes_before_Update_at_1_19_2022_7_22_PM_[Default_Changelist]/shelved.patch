Index: .idea/shelf/Uncommitted_changes_before_Update_at_1_12_2022_7_14_PM__Default_Changelist_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_1_12_2022_7_14_PM__Default_Changelist_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_1_12_2022_7_14_PM__Default_Changelist_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_1_12_2022_7_14_PM__Default_Changelist_.xml	(revision 8e96e253b18fde6ba59a95a8201590b51e0a7e05)
+++ /dev/null	(revision 8e96e253b18fde6ba59a95a8201590b51e0a7e05)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_1_12_2022_7_14_PM_[Default_Changelist]" date="1642014876504" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_1_12_2022_7_14_PM_[Default_Changelist]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 1/12/2022 7:14 PM [Default Changelist]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_1_11_2022_12_46_PM__Default_Changelist_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_1_11_2022_12_46_PM__Default_Changelist_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_1_11_2022_12_46_PM__Default_Changelist_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_1_11_2022_12_46_PM__Default_Changelist_.xml	(revision 8e96e253b18fde6ba59a95a8201590b51e0a7e05)
+++ /dev/null	(revision 8e96e253b18fde6ba59a95a8201590b51e0a7e05)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_1_11_2022_12_46_PM_[Default_Changelist]" date="1641905179340" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_1_11_2022_12_46_PM_[Default_Changelist]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 1/11/2022 12:46 PM [Default Changelist]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_1_12_2022_1_08_PM_[Default_Changelist]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_1_12_2022_1_08_PM_[Default_Changelist]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_1_12_2022_1_08_PM_[Default_Changelist]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_1_12_2022_1_08_PM_[Default_Changelist]/shelved.patch	(revision 8e96e253b18fde6ba59a95a8201590b51e0a7e05)
+++ /dev/null	(revision 8e96e253b18fde6ba59a95a8201590b51e0a7e05)
@@ -1,395 +0,0 @@
-Index: app/src/main/java/com/singularity/ipcaplus/utils/Utilis.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.singularity.ipcaplus.utils\r\n\r\nimport android.app.DownloadManager\r\nimport android.content.Context\r\nimport android.content.res.Resources\r\nimport android.graphics.Bitmap\r\nimport android.graphics.BitmapFactory\r\nimport android.graphics.drawable.BitmapDrawable\r\nimport android.graphics.drawable.GradientDrawable\r\nimport android.net.Uri\r\nimport android.os.Build\r\nimport androidx.annotation.RequiresApi\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.google.firebase.storage.FirebaseStorage\r\nimport com.google.firebase.storage.StorageReference\r\nimport com.google.firebase.storage.ktx.storage\r\nimport com.singularity.ipcaplus.R\r\nimport com.singularity.ipcaplus.cryptography.encryptMeta\r\nimport java.io.File\r\nimport java.io.IOException\r\nimport java.lang.Exception\r\nimport java.net.URI\r\nimport java.text.SimpleDateFormat\r\nimport java.time.LocalDate\r\nimport java.util.*\r\nimport java.util.regex.Pattern\r\n\r\nimport androidx.core.content.res.ResourcesCompat\r\nimport androidx.core.graphics.drawable.toBitmap\r\nimport com.google.firebase.auth.FirebaseAuth\r\n\r\n\r\nobject  Utilis {\r\n\r\n    /*\r\n        This function return the current month id\r\n     */\r\n    @RequiresApi(Build.VERSION_CODES.O)\r\n    fun getCurrentMonthId(): Int {\r\n\r\n        val c = LocalDate.now()\r\n        val strArray = Pattern.compile(\"-\").split(c.toString())\r\n\r\n        return strArray[1].toInt()\r\n    }\r\n\r\n    /*\r\n        This function return the current year id\r\n     */\r\n    @RequiresApi(Build.VERSION_CODES.O)\r\n    fun getCurrentYear(): String {\r\n\r\n        val c = LocalDate.now()\r\n        val strArray = Pattern.compile(\"-\").split(c.toString())\r\n\r\n        return strArray[0]\r\n    }\r\n\r\n    @RequiresApi(Build.VERSION_CODES.O)\r\n    fun getYearByCalendarId(id: Int): Int {\r\n\r\n        var count = id\r\n        var result = 2021 - 121 // add 1900\r\n\r\n        while (count > 0) {\r\n            count -= 1\r\n            result ++\r\n        }\r\n\r\n        return result\r\n    }\r\n\r\n    /*\r\n        This function return the month value in string by an id\r\n        @month = month id\r\n     */\r\n    fun getMonthById(month: Int): String {\r\n        return when (month) {\r\n            1 -> \"Janeiro\"\r\n            2 -> \"Fevereiro\"\r\n            3 -> \"Março\"\r\n            4 -> \"Abril\"\r\n            5 -> \"Maio\"\r\n            6 -> \"Junho\"\r\n            7 -> \"Julho\"\r\n            8 -> \"Agosto\"\r\n            9 -> \"Setembro\"\r\n            10 -> \"Outubro\"\r\n            11 -> \"Novembro\"\r\n            12 -> \"Dezembro\"\r\n            else -> \"None\"\r\n        }\r\n    }\r\n\r\n    fun convertHoursStringToInt(strVal: String): Int {\r\n        val strArray = Pattern.compile(\":\").split(strVal)\r\n        val result = strArray[0] + strArray[1]\r\n        return result.toInt()\r\n    }\r\n\r\n    fun getDate(milliSeconds: Long, dateFormat: String?): String {\r\n        // Create a DateFormatter object for displaying date in specified format.\r\n        val formatter = SimpleDateFormat(dateFormat)\r\n\r\n        // Create a calendar object that will convert the date and time value in milliseconds to date.\r\n        val calendar: Calendar = Calendar.getInstance()\r\n        calendar.timeInMillis = milliSeconds\r\n        return formatter.format(calendar.time)\r\n    }\r\n\r\n\r\n    /*\r\n        This function split the date and return only the day\r\n        @date = default date\r\n     */\r\n    fun getDay(dateTime: String): String {\r\n\r\n        // Split the date\r\n        val strArray = Pattern.compile(\"-\").split(dateTime)\r\n        val strArray2 = Pattern.compile(\"T\").split(strArray[2])\r\n\r\n        return strArray2[0]\r\n    }\r\n\r\n\r\n    /*\r\n        This function split the date and return only the month in text\r\n        @date = default date\r\n     */\r\n    fun getMonth(dateTime: String): String {\r\n\r\n        // Split the date\r\n        val strArray = Pattern.compile(\"-\").split(dateTime)\r\n\r\n        return strArray[1].toString()\r\n    }\r\n\r\n\r\n    /*\r\n        This function split the date and return only the year in text\r\n        @date = default date\r\n     */\r\n    fun getYear(dateTime: String): String {\r\n\r\n        // Split the date\r\n        val strArray = Pattern.compile(\"-\").split(dateTime)\r\n\r\n        return strArray[0].toString()\r\n    }\r\n\r\n\r\n    /*\r\n        This function split the date and return only the Hours in text\r\n        @date = default date\r\n     */\r\n    fun getHours(dateTime: String): String {\r\n\r\n        // Split the date\r\n        val strArray = Pattern.compile(\"T\").split(dateTime)\r\n        val strArray2 = Pattern.compile(\":\").split(strArray[1])\r\n\r\n        return strArray2[0].toString()\r\n    }\r\n\r\n\r\n    /*\r\n        This function split the date and return only the Minutes in text\r\n        @date = default date\r\n     */\r\n    fun getMinutes(dateTime: String): String {\r\n\r\n        // Split the date\r\n        val strArray = Pattern.compile(\"T\").split(dateTime)\r\n        val strArray2 = Pattern.compile(\":\").split(strArray[1])\r\n\r\n        return strArray2[1].toString()\r\n    }\r\n\r\n    /*\r\n        This function get the buffer with the name of filename on assets folder\r\n     */\r\n\r\n    fun getJsonDataFromAsset(context: Context, fileName: String): String? {\r\n        val jsonString: String\r\n        try {\r\n            jsonString = context.assets.open(fileName).bufferedReader().use { it.readText() }\r\n        } catch (ioException: IOException) {\r\n            ioException.printStackTrace()\r\n            return null\r\n        }\r\n        return jsonString\r\n    }\r\n\r\n    fun getFirstAndLastName(fullName: String): String {\r\n\r\n        val nameArray = Pattern.compile(\" \").split(fullName)\r\n\r\n        return nameArray[0] + \" \" + nameArray[nameArray.size-1]\r\n    }\r\n\r\n    /*\r\n       ------------------------------------------------ Images ------------------------------------------------\r\n    */\r\n\r\n    fun convertDrawableToBitmap(context: Context, drawable: Int): Bitmap {\r\n        return BitmapFactory.decodeResource(context.resources, R.drawable.circle)\r\n    }\r\n\r\n\r\n    fun getFile(context: Context, path: String, suffix: String, callback:(Bitmap)->Unit) {\r\n\r\n        // Retrieve image from firebase\r\n        val storageRef = FirebaseStorage.getInstance().reference.child(path)\r\n        val localfile = File.createTempFile(\"tempImage\", suffix)\r\n\r\n        // Set ImageView\r\n        storageRef.getFile(localfile).addOnSuccessListener {\r\n            val bitmap = BitmapFactory.decodeFile(localfile.absolutePath)\r\n            callback(bitmap)\r\n        }.addOnFailureListener {\r\n            val bitmap = (ResourcesCompat.getDrawable(\r\n                context.resources,\r\n                R.drawable.circle,\r\n                null\r\n            ) as GradientDrawable?)!!.toBitmap()\r\n            callback(bitmap)\r\n        }\r\n\r\n    }\r\n\r\n    fun downloadFile(context: Context, fileName: String, fileExtension: String, destinationDirectory: String, uri: Uri) {\r\n\r\n        val downloadManager = context.getSystemService(Context.DOWNLOAD_SERVICE) as DownloadManager\r\n        val request = DownloadManager.Request(uri)\r\n\r\n        request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED)\r\n        request.setDestinationInExternalPublicDir(destinationDirectory, fileName + fileExtension)\r\n\r\n        downloadManager.enqueue(request)\r\n    }\r\n\r\n\r\n    fun uploadFile(filePath: Uri, targetPath: String) {\r\n\r\n        val storage = Firebase.storage\r\n        val storageRef = storage.reference\r\n\r\n        if (filePath != Uri.EMPTY) {\r\n            val ref: StorageReference = storageRef.child(targetPath)\r\n            ref.putFile(filePath)\r\n        }\r\n    }\r\n\r\n\r\n    fun getFileIcon(fileName:String): Int {\r\n        return if (fileName.contains(\".\")) {\r\n\r\n            val extensionArray = Pattern.compile(\"[.]\").split(fileName)\r\n            val extension = extensionArray[extensionArray.size-1]\r\n\r\n            when (extension) {\r\n                \"png\", \"jpg\", \"jpeg\", \"jep\", \"jfif\", \"gif\" -> R.drawable.ic_picture\r\n                \"invisible\" -> -1\r\n                else -> R.drawable.ic_file\r\n            }\r\n\r\n        } else\r\n            -1\r\n    }\r\n\r\n\r\n    fun uniqueImageNameGen(): String {\r\n        val characters = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890!#$$%&/()=@[]{}\"\r\n\r\n        val sb = StringBuilder(15)\r\n\r\n        for(x in 0 until 15){\r\n            val random = (characters.indices).random()\r\n            sb.append(characters[random])\r\n        }\r\n\r\n        return sb.toString()\r\n    }\r\n\r\n\r\n    /*\r\n        This function gets the domain of email\r\n        split remove the @ and make the array like this -> [a20115][alunos.ipca.pt]\r\n     */\r\n    fun getEmailDomain(email: String) : String{\r\n        val strArray = Pattern.compile(\"@\").split(email)\r\n        val result= strArray[1]\r\n\r\n        return result.toString()\r\n\r\n    }\r\n\r\n    /*\r\n        ------------------------------------------------ Chat ------------------------------------------------\r\n     */\r\n\r\n    /*\r\n       This function returns the encrypted system message\r\n       @callBack = return the list\r\n    */\r\n    fun buildSystemMessage(key: String) : String {\r\n\r\n        // Build encryptation data of first message send by the system\r\n        var message = encryptMeta(\"This chat is being encripted with Singularity Encryption!\", key)\r\n\r\n        return message.toString()\r\n\r\n    }\r\n\r\n    fun getUID(): String? {\r\n        val firebaseAuth = FirebaseAuth.getInstance()\r\n        return firebaseAuth.uid\r\n    }\r\n\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/singularity/ipcaplus/utils/Utilis.kt b/app/src/main/java/com/singularity/ipcaplus/utils/Utilis.kt
---- a/app/src/main/java/com/singularity/ipcaplus/utils/Utilis.kt	(revision 0fcf2b7b59abd63a8d521968682f3535b44235ee)
-+++ b/app/src/main/java/com/singularity/ipcaplus/utils/Utilis.kt	(date 1641992202399)
-@@ -9,6 +9,8 @@
- import android.graphics.drawable.GradientDrawable
- import android.net.Uri
- import android.os.Build
-+import android.provider.MediaStore
-+import android.util.Log
- import androidx.annotation.RequiresApi
- import com.google.firebase.auth.ktx.auth
- import com.google.firebase.ktx.Firebase
-@@ -29,6 +31,7 @@
- import androidx.core.content.res.ResourcesCompat
- import androidx.core.graphics.drawable.toBitmap
- import com.google.firebase.auth.FirebaseAuth
-+import java.io.ByteArrayOutputStream
- 
- 
- object  Utilis {
-@@ -318,4 +321,24 @@
-         return firebaseAuth.uid
-     }
- 
-+    fun calculateInSampleSize(options: BitmapFactory.Options, reqWidth: Int, reqHeight: Int): Int {
-+        // Raw height and width of image
-+        val (height: Int, width: Int) = options.run { outHeight to outWidth }
-+        var inSampleSize = 1
-+
-+        if (height > reqHeight || width > reqWidth) {
-+
-+            val halfHeight: Int = height / 2
-+            val halfWidth: Int = width / 2
-+
-+            // Calculate the largest inSampleSize value that is a power of 2 and keeps both
-+            // height and width larger than the requested height and width.
-+            while (halfHeight / inSampleSize >= reqHeight && halfWidth / inSampleSize >= reqWidth) {
-+                inSampleSize *= 2
-+            }
-+        }
-+
-+        return inSampleSize
-+    }
-+
- }
-\ No newline at end of file
-Index: app/src/main/java/com/singularity/ipcaplus/chat/ChatMoreActivity.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.singularity.ipcaplus.chat\r\n\r\nimport android.content.Intent\r\nimport android.os.Bundle\r\nimport android.view.View\r\nimport android.widget.Button\r\nimport android.widget.EditText\r\nimport android.widget.ImageView\r\nimport androidx.appcompat.app.AlertDialog\r\nimport com.google.android.material.bottomsheet.BottomSheetDialog\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.singularity.ipcaplus.LoginActivity\r\nimport com.singularity.ipcaplus.R\r\nimport com.singularity.ipcaplus.databinding.ActivityChatMoreBinding\r\nimport com.singularity.ipcaplus.drawer.DrawerActivty\r\nimport com.singularity.ipcaplus.utils.ActivityImageHelper\r\nimport com.singularity.ipcaplus.utils.Backend\r\nimport com.singularity.ipcaplus.utils.Utilis\r\nimport com.theartofdev.edmodo.cropper.CropImage\r\nimport com.theartofdev.edmodo.cropper.CropImageView\r\n\r\nclass ChatMoreActivity : ActivityImageHelper() {\r\n\r\n    lateinit var imageViewGroup: ImageView\r\n    lateinit var imageViewDialog: ImageView\r\n    lateinit var chat_id: String\r\n    var is_admin: Boolean = false\r\n    private lateinit var binding: ActivityChatMoreBinding\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_chat_more)\r\n\r\n        overridePendingTransition(R.anim.slide_in_up, R.anim.slide_stay)\r\n\r\n        // Create the layout for this fragment\r\n        binding = ActivityChatMoreBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        // Create Action Bar\r\n        supportActionBar?.setDisplayHomeAsUpEnabled(true)\r\n        supportActionBar?.setHomeAsUpIndicator(R.drawable.ic_arrow_back_24)\r\n        supportActionBar?.title = \"Definições do grupo\"\r\n\r\n        // Get previous data\r\n        chat_id = intent.getStringExtra(\"chat_id\").toString()\r\n        val chat_name = intent.getStringExtra(\"chat_name\").toString()\r\n        is_admin = intent.getBooleanExtra(\"is_admin\", false)\r\n        binding.textViewGroupName.text = chat_name\r\n\r\n        // Get Group Image\r\n        imageViewGroup = binding.imageViewGroup\r\n        Utilis.getFile(this, \"chats/$chat_id/icon.png\", \"png\") { bitmap ->\r\n            imageViewGroup.setImageBitmap(bitmap)\r\n        }\r\n\r\n        binding.seeGroupMembers.setOnClickListener {\r\n            val intent = Intent(this, ChatMembersActivity::class.java)\r\n            intent.putExtra(\"chat_id\", chat_id)\r\n            intent.putExtra(\"is_admin\", is_admin)\r\n            startActivity(intent)\r\n        }\r\n\r\n        if (is_admin) {\r\n            binding.changeGroupName.setOnClickListener {\r\n                openSelectNameDialog()\r\n            }\r\n\r\n            binding.changeGroupImage.setOnClickListener {\r\n                openSelectImageDialog()\r\n            }\r\n            binding.deleteChat.setOnClickListener {\r\n                Backend.deleteChat(chat_id) {\r\n                    val intent = Intent(this, LoginActivity::class.java)\r\n                    startActivity(intent)\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            binding.changeGroupName.visibility = View.GONE\r\n            binding.changeGroupImage.visibility = View.GONE\r\n            binding.deleteChat.visibility = View.GONE\r\n        }\r\n\r\n        binding.groupFiles.setOnClickListener {\r\n            val intent = Intent(this, ChatFilesActivity::class.java)\r\n            intent.putExtra(\"chat_id\", chat_id)\r\n            startActivity(intent)\r\n        }\r\n\r\n        binding.notifications.setOnClickListener {\r\n            println(\"-------------> 5\")\r\n        }\r\n\r\n        binding.securityNumberVerification.setOnClickListener {\r\n            val intent = Intent(this, VerifySecurityNumberActivity::class.java )\r\n            intent.putExtra(\"chat_id\", chat_id)\r\n            startActivity(intent)\r\n        }\r\n\r\n        binding.leaveGroup.setOnClickListener {\r\n\r\n            Backend.removeUserFromChat(chat_id, Firebase.auth.currentUser!!.uid)\r\n\r\n            val intent = Intent(this, LoginActivity::class.java)\r\n            startActivity(intent)\r\n        }\r\n\r\n    }\r\n\r\n    // When the support action bar back button is pressed, the app will go back to the previous activity\r\n    override fun onSupportNavigateUp(): Boolean {\r\n        onBackPressed()\r\n        return true\r\n    }\r\n\r\n\r\n    /*\r\n        This function display a dialog window with a text box to edit chat name\r\n     */\r\n    private fun openSelectImageDialog() {\r\n\r\n        // Variables\r\n        val dialog = BottomSheetDialog(this, R.style.AppBottomSheetDialogTheme)\r\n        val view = layoutInflater.inflate(R.layout.dialog_select_image, null)\r\n        dialog.setContentView(view)\r\n        dialog.show()\r\n        imageViewDialog = view.findViewById(R.id.imageViewChatPhoto)\r\n\r\n        Utilis.getFile(this,\"chats/$chat_id/icon.png\", \"png\") { bitmap ->\r\n            view.findViewById<ImageView>(R.id.imageViewChatPhoto).setImageBitmap(bitmap)\r\n        }\r\n\r\n        imageViewDialog.setOnClickListener {\r\n            checkPermission(android.Manifest.permission.READ_EXTERNAL_STORAGE, STORAGE_PERMISSION_CODE)\r\n            dialog.dismiss()\r\n        }\r\n\r\n    }\r\n\r\n\r\n    /*\r\n        This function display a dialog window with a text box to edit chat name\r\n     */\r\n    private fun openSelectNameDialog() {\r\n\r\n        // Variables\r\n        val alertDialog = AlertDialog.Builder(this)\r\n        val row = layoutInflater.inflate(R.layout.dialog_select_name, null)\r\n        alertDialog.setView(row)\r\n        val show = alertDialog.show()\r\n\r\n        row.findViewById<EditText>(R.id.editTextName).setText(binding.textViewGroupName.text.toString())\r\n\r\n        row.findViewById<Button>(R.id.buttonSave).setOnClickListener {\r\n            val newName = row.findViewById<EditText>(R.id.editTextName).text.toString()\r\n            Backend.changeChatName(chat_id, newName)\r\n            show.dismiss()\r\n            binding.textViewGroupName.text = newName\r\n        }\r\n\r\n    }\r\n\r\n\r\n    /*\r\n       This function happen after picking photo, and make changes in the activity\r\n    */\r\n    override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\r\n        super.onActivityResult(requestCode, resultCode, data)\r\n\r\n        if(requestCode == IMAGE_REQUEST_CODE && resultCode == RESULT_OK){\r\n            CropImage.activity(data?.data)\r\n                .setGuidelines(CropImageView.Guidelines.ON)\r\n                .setAspectRatio(1,1)\r\n                .start(this)\r\n        }\r\n\r\n        if (requestCode == CropImage.CROP_IMAGE_ACTIVITY_REQUEST_CODE) {\r\n            val result = CropImage.getActivityResult(data)\r\n            if (resultCode == RESULT_OK) {\r\n                imageViewGroup.setImageURI(result.uri)\r\n                Utilis.uploadFile(result.uri, \"chats/$chat_id/icon.png\")\r\n            }\r\n        }\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/singularity/ipcaplus/chat/ChatMoreActivity.kt b/app/src/main/java/com/singularity/ipcaplus/chat/ChatMoreActivity.kt
---- a/app/src/main/java/com/singularity/ipcaplus/chat/ChatMoreActivity.kt	(revision 0fcf2b7b59abd63a8d521968682f3535b44235ee)
-+++ b/app/src/main/java/com/singularity/ipcaplus/chat/ChatMoreActivity.kt	(date 1641992911560)
-@@ -1,15 +1,23 @@
- package com.singularity.ipcaplus.chat
- 
- import android.content.Intent
-+import android.graphics.Bitmap
-+import android.graphics.BitmapFactory
-+import android.graphics.Color
-+import android.graphics.drawable.ColorDrawable
- import android.os.Bundle
-+import android.provider.MediaStore
-+import android.util.Log
- import android.view.View
- import android.widget.Button
- import android.widget.EditText
- import android.widget.ImageView
- import androidx.appcompat.app.AlertDialog
- import com.google.android.material.bottomsheet.BottomSheetDialog
-+import com.google.firebase.auth.FirebaseAuth
- import com.google.firebase.auth.ktx.auth
- import com.google.firebase.ktx.Firebase
-+import com.google.firebase.storage.FirebaseStorage
- import com.singularity.ipcaplus.LoginActivity
- import com.singularity.ipcaplus.R
- import com.singularity.ipcaplus.databinding.ActivityChatMoreBinding
-@@ -17,8 +25,10 @@
- import com.singularity.ipcaplus.utils.ActivityImageHelper
- import com.singularity.ipcaplus.utils.Backend
- import com.singularity.ipcaplus.utils.Utilis
-+import com.singularity.ipcaplus.utils.Utilis.calculateInSampleSize
- import com.theartofdev.edmodo.cropper.CropImage
- import com.theartofdev.edmodo.cropper.CropImageView
-+import java.io.ByteArrayOutputStream
- 
- class ChatMoreActivity : ActivityImageHelper() {
- 
-@@ -128,7 +138,9 @@
-         dialog.show()
-         imageViewDialog = view.findViewById(R.id.imageViewChatPhoto)
- 
-+
-         Utilis.getFile(this,"chats/$chat_id/icon.png", "png") { bitmap ->
-+
-             view.findViewById<ImageView>(R.id.imageViewChatPhoto).setImageBitmap(bitmap)
-         }
- 
-@@ -146,17 +158,18 @@
-     private fun openSelectNameDialog() {
- 
-         // Variables
--        val alertDialog = AlertDialog.Builder(this)
-+        val dialog = BottomSheetDialog(this, R.style.AppBottomSheetDialogTheme)
-         val row = layoutInflater.inflate(R.layout.dialog_select_name, null)
--        alertDialog.setView(row)
--        val show = alertDialog.show()
-+        dialog.setContentView(row)
-+        dialog.show()
-+
- 
-         row.findViewById<EditText>(R.id.editTextName).setText(binding.textViewGroupName.text.toString())
- 
-         row.findViewById<Button>(R.id.buttonSave).setOnClickListener {
-             val newName = row.findViewById<EditText>(R.id.editTextName).text.toString()
-             Backend.changeChatName(chat_id, newName)
--            show.dismiss()
-+            dialog.dismiss()
-             binding.textViewGroupName.text = newName
-         }
- 
-@@ -180,7 +193,37 @@
-             val result = CropImage.getActivityResult(data)
-             if (resultCode == RESULT_OK) {
-                 imageViewGroup.setImageURI(result.uri)
--                Utilis.uploadFile(result.uri, "chats/$chat_id/icon.png")
-+
-+                val userId = FirebaseAuth.getInstance().currentUser!!.uid
-+                val storageRef = FirebaseStorage.getInstance().getReference("chats/$chat_id/icon.png")
-+
-+                // compressing image
-+                val bitmap = MediaStore.Images.Media.getBitmap(contentResolver, result.uri)
-+                val byteArrayOutputStream = ByteArrayOutputStream()
-+                bitmap.compress(Bitmap.CompressFormat.JPEG, 6, byteArrayOutputStream)
-+                val reducedImage: ByteArray = byteArrayOutputStream.toByteArray()
-+
-+                storageRef.putBytes(reducedImage)
-+                    .addOnSuccessListener {
-+
-+                        Log.i("xxx", "Success uploading Image to Firebase!!!")
-+
-+                        storageRef.downloadUrl.addOnSuccessListener {
-+
-+                            //getting image url
-+                            Log.i("xxx",it.toString())
-+                            Utilis.uploadFile(it, "chats/$chat_id/icon.png")
-+
-+                        }.addOnFailureListener {
-+
-+                            Log.i("xxx", "Error getting image download url")
-+                        }
-+
-+                    }.addOnFailureListener {
-+
-+                        Log.i("xxx", "Failed uploading image to server")
-+
-+                    }
-             }
-         }
-     }
-Index: app/src/main/java/com/singularity/ipcaplus/drawer/ProfileActivity.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.singularity.ipcaplus.drawer\r\n\r\nimport android.content.Intent\r\nimport android.net.Uri\r\nimport android.os.Bundle\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.singularity.ipcaplus.databinding.ActivityProfileBinding\r\nimport com.singularity.ipcaplus.models.Profile\r\nimport com.singularity.ipcaplus.*\r\nimport com.singularity.ipcaplus.utils.ActivityImageHelper\r\nimport com.singularity.ipcaplus.utils.Backend\r\nimport com.singularity.ipcaplus.utils.UserLoggedIn\r\nimport com.singularity.ipcaplus.utils.Utilis\r\nimport com.theartofdev.edmodo.cropper.CropImage\r\nimport com.theartofdev.edmodo.cropper.CropImageView\r\n\r\n\r\nclass ProfileActivity : ActivityImageHelper() {\r\n\r\n    private var imageUri: Uri? = null\r\n    private lateinit var binding: ActivityProfileBinding\r\n    lateinit var profileData: Profile\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_profile)\r\n\r\n        // Create the layout for this fragment\r\n        binding = ActivityProfileBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        // Create Action Bar\r\n        supportActionBar?.setDisplayHomeAsUpEnabled(true)\r\n        supportActionBar?.setHomeAsUpIndicator(R.drawable.ic_arrow_back_24)\r\n        supportActionBar?.title = \"Perfil\"\r\n\r\n        // Get profile\r\n        Backend.getUserProfile(Firebase.auth.uid!!) {\r\n            profileData = it\r\n\r\n            // Set data\r\n            binding.textViewName1.text = Utilis.getFirstAndLastName(profileData.name)\r\n            binding.textViewEmail.text = UserLoggedIn.email\r\n            binding.textViewFullName.text = profileData.name\r\n            binding.textViewRole.text = profileData.role\r\n            binding.textViewAge.text = profileData.age\r\n            binding.textViewCourse.text = profileData.course\r\n\r\n            Utilis.getFile(this, \"profilePictures/\" + Firebase.auth.uid!! + \".png\", \"png\") { bitmap ->\r\n                binding.imageViewProfile.setImageBitmap(bitmap)\r\n            }\r\n        }\r\n\r\n        // Change Profile Picture\r\n        binding.imageViewProfile.setOnClickListener {\r\n            checkPermission(android.Manifest.permission.READ_EXTERNAL_STORAGE, STORAGE_PERMISSION_CODE)\r\n        }\r\n\r\n    }\r\n\r\n    /*\r\n       This function happen after picking photo, and make changes in the activity\r\n    */\r\n    override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\r\n        super.onActivityResult(requestCode, resultCode, data)\r\n\r\n        if(requestCode == IMAGE_REQUEST_CODE && resultCode == RESULT_OK){\r\n            CropImage.activity(data?.data)\r\n                .setGuidelines(CropImageView.Guidelines.ON)\r\n                .setAspectRatio(1,1)\r\n                .start(this)\r\n        }\r\n\r\n        if (requestCode == CropImage.CROP_IMAGE_ACTIVITY_REQUEST_CODE) {\r\n            val result = CropImage.getActivityResult(data)\r\n            if (resultCode == RESULT_OK) {\r\n                binding.imageViewProfile.setImageURI(result.uri)\r\n                imageUri = result.uri\r\n\r\n                Utilis.uploadFile(result.uri, \"profilePictures/\" + Firebase.auth.uid!! + \".png\")\r\n            }\r\n        }\r\n    }\r\n\r\n    // When the support action bar back button is pressed, the app will go back to the previous activity\r\n    override fun onSupportNavigateUp(): Boolean {\r\n        onBackPressed()\r\n        return true\r\n    }\r\n\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/singularity/ipcaplus/drawer/ProfileActivity.kt b/app/src/main/java/com/singularity/ipcaplus/drawer/ProfileActivity.kt
---- a/app/src/main/java/com/singularity/ipcaplus/drawer/ProfileActivity.kt	(revision 0fcf2b7b59abd63a8d521968682f3535b44235ee)
-+++ b/app/src/main/java/com/singularity/ipcaplus/drawer/ProfileActivity.kt	(date 1641991558337)
-@@ -1,6 +1,8 @@
- package com.singularity.ipcaplus.drawer
- 
-+import android.content.Context
- import android.content.Intent
-+import android.graphics.Bitmap
- import android.net.Uri
- import android.os.Bundle
- import com.google.firebase.auth.ktx.auth
-@@ -14,6 +16,14 @@
- import com.singularity.ipcaplus.utils.Utilis
- import com.theartofdev.edmodo.cropper.CropImage
- import com.theartofdev.edmodo.cropper.CropImageView
-+import kotlinx.coroutines.CoroutineScope
-+import kotlinx.coroutines.Dispatchers
-+import kotlinx.coroutines.launch
-+import android.provider.MediaStore
-+import android.util.Log
-+import com.google.firebase.auth.FirebaseAuth
-+import com.google.firebase.storage.FirebaseStorage
-+import java.io.ByteArrayOutputStream
- 
- 
- class ProfileActivity : ActivityImageHelper() {
-@@ -21,10 +31,12 @@
-     private var imageUri: Uri? = null
-     private lateinit var binding: ActivityProfileBinding
-     lateinit var profileData: Profile
-+    lateinit var contextInfo : Context
- 
-     override fun onCreate(savedInstanceState: Bundle?) {
-         super.onCreate(savedInstanceState)
-         setContentView(R.layout.activity_profile)
-+        contextInfo = applicationContext
- 
-         // Create the layout for this fragment
-         binding = ActivityProfileBinding.inflate(layoutInflater)
-@@ -78,7 +90,39 @@
-                 binding.imageViewProfile.setImageURI(result.uri)
-                 imageUri = result.uri
- 
--                Utilis.uploadFile(result.uri, "profilePictures/" + Firebase.auth.uid!! + ".png")
-+                CoroutineScope(Dispatchers.IO).launch {
-+                    val userId = FirebaseAuth.getInstance().currentUser!!.uid
-+                    val storageRef = FirebaseStorage.getInstance().getReference("profilePictures/${userId}.png")
-+
-+                    // compressing image
-+                    val bitmap = MediaStore.Images.Media.getBitmap(contentResolver, imageUri)
-+                    val byteArrayOutputStream = ByteArrayOutputStream()
-+                    bitmap.compress(Bitmap.CompressFormat.JPEG, 6, byteArrayOutputStream)
-+                    val reducedImage: ByteArray = byteArrayOutputStream.toByteArray()
-+
-+                    storageRef.putBytes(reducedImage)
-+                        .addOnSuccessListener {
-+
-+                            Log.i("xxx", "Success uploading Image to Firebase!!!")
-+
-+                            storageRef.downloadUrl.addOnSuccessListener {
-+
-+                                //getting image url
-+                                Log.i("xxx",it.toString())
-+                                Utilis.uploadFile(it, "profilePictures/" + Firebase.auth.uid!! + ".png")
-+
-+                            }.addOnFailureListener {
-+
-+                                Log.i("xxx", "Error getting image download url")
-+                            }
-+
-+                        }.addOnFailureListener {
-+
-+                            Log.i("xxx", "Failed uploading image to server")
-+
-+                        }
-+                }
-+
-             }
-         }
-     }
-Index: app/src/main/res/layout/dialog_select_name.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"wrap_content\">\r\n\r\n    <TextView\r\n        android:id=\"@+id/textView\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"20dp\"\r\n        android:layout_marginTop=\"10dp\"\r\n        android:layout_marginEnd=\"20dp\"\r\n        android:text=\"Editar nome do grupo\"\r\n        android:textColor=\"@color/black\"\r\n        android:textSize=\"18sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n    <EditText\r\n        android:id=\"@+id/editTextName\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"20dp\"\r\n        android:layout_marginTop=\"10dp\"\r\n        android:layout_marginEnd=\"20dp\"\r\n        android:background=\"@drawable/custom_black_border\"\r\n        android:ems=\"10\"\r\n        android:hint=\"Altera o nome do grupo\"\r\n        android:inputType=\"textPersonName\"\r\n        android:minHeight=\"48dp\"\r\n        android:padding=\"10dp\"\r\n        android:textColor=\"#707070\"\r\n        android:textSize=\"12sp\"\r\n        android:textStyle=\"normal\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.0\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/textView\" />\r\n\r\n\r\n    <Button\r\n        android:id=\"@+id/buttonSave\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"10dp\"\r\n        android:layout_marginBottom=\"10dp\"\r\n        android:background=\"@drawable/button_green\"\r\n        android:backgroundTint=\"@color/green_200\"\r\n        android:paddingHorizontal=\"40dp\"\r\n        android:text=\"Guardar\"\r\n        android:textSize=\"12dp\"\r\n        android:translationZ=\"10dp\"\r\n        app:backgroundTint=\"@null\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/editTextName\" />\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/layout/dialog_select_name.xml b/app/src/main/res/layout/dialog_select_name.xml
---- a/app/src/main/res/layout/dialog_select_name.xml	(revision 0fcf2b7b59abd63a8d521968682f3535b44235ee)
-+++ b/app/src/main/res/layout/dialog_select_name.xml	(date 1641944799378)
-@@ -14,6 +14,7 @@
-         android:layout_marginEnd="20dp"
-         android:text="Editar nome do grupo"
-         android:textColor="@color/black"
-+        android:gravity="center"
-         android:textSize="18sp"
-         android:textStyle="bold"
-         app:layout_constraintEnd_toEndOf="parent"
-@@ -44,11 +45,13 @@
- 
-     <Button
-         android:id="@+id/buttonSave"
--        android:layout_width="wrap_content"
-+        android:layout_width="0dp"
-         android:layout_height="wrap_content"
--        android:layout_marginTop="10dp"
-+        android:layout_marginStart="50dp"
-+        android:layout_marginTop="20dp"
-+        android:layout_marginEnd="50dp"
-         android:layout_marginBottom="10dp"
--        android:background="@drawable/button_green"
-+        android:background="@drawable/button_register"
-         android:backgroundTint="@color/green_200"
-         android:paddingHorizontal="40dp"
-         android:text="Guardar"
-@@ -60,4 +63,16 @@
-         app:layout_constraintStart_toStartOf="parent"
-         app:layout_constraintTop_toBottomOf="@+id/editTextName" />
- 
-+    <TextView
-+        android:id="@+id/textView5"
-+        android:layout_width="wrap_content"
-+        android:layout_height="wrap_content"
-+        android:layout_marginTop="10dp"
-+        android:layout_marginBottom="10dp"
-+        android:text="Aqui podes alterar o nome do teu grupo"
-+        app:layout_constraintBottom_toTopOf="@+id/buttonSave"
-+        app:layout_constraintEnd_toEndOf="parent"
-+        app:layout_constraintStart_toStartOf="parent"
-+        app:layout_constraintTop_toBottomOf="@+id/editTextName" />
-+
- </androidx.constraintlayout.widget.ConstraintLayout>
-\ No newline at end of file
-Index: app/src/main/java/com/singularity/ipcaplus/drawer/DrawerActivty.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.singularity.ipcaplus.drawer\r\n\r\nimport android.content.BroadcastReceiver\r\nimport android.content.ContentValues\r\nimport android.content.ContentValues.TAG\r\nimport android.content.Context\r\nimport android.content.Intent\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport android.util.Log\r\nimport android.view.Menu\r\nimport android.view.MenuItem\r\nimport android.view.WindowManager\r\nimport android.widget.ImageView\r\nimport android.widget.TextView\r\nimport android.widget.Toast\r\nimport androidx.drawerlayout.widget.DrawerLayout\r\nimport androidx.navigation.findNavController\r\nimport androidx.navigation.ui.AppBarConfiguration\r\nimport androidx.navigation.ui.navigateUp\r\nimport androidx.navigation.ui.setupActionBarWithNavController\r\nimport androidx.navigation.ui.setupWithNavController\r\nimport com.google.android.material.navigation.NavigationView\r\nimport com.google.android.material.snackbar.Snackbar\r\nimport com.google.firebase.Timestamp\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.firestore.ktx.firestore\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.singularity.ipcaplus.R\r\nimport com.singularity.ipcaplus.WelcomeActivity\r\nimport com.singularity.ipcaplus.utils.PreferenceHelper.email\r\nimport com.singularity.ipcaplus.utils.PreferenceHelper.password\r\nimport com.singularity.ipcaplus.utils.PreferenceHelper.userId\r\nimport com.singularity.ipcaplus.chat.SearchActivity\r\nimport com.singularity.ipcaplus.cryptography.encryptMeta\r\nimport com.singularity.ipcaplus.cryptography.metaGenrateKey\r\nimport com.singularity.ipcaplus.databinding.ActivityDrawerActivtyBinding\r\nimport com.singularity.ipcaplus.models.Chat\r\nimport com.singularity.ipcaplus.models.Message\r\nimport kotlin.random.Random\r\nimport androidx.core.view.ViewCompat\r\n\r\nimport androidx.core.app.ActivityOptionsCompat\r\nimport com.google.android.gms.tasks.OnCompleteListener\r\nimport com.google.firebase.messaging.FirebaseMessaging\r\nimport com.singularity.ipcaplus.AddButtonActivity\r\nimport com.singularity.ipcaplus.chat.CreateChatActivity\r\nimport com.singularity.ipcaplus.databinding.ActivityProfileBinding\r\nimport com.singularity.ipcaplus.models.EventCalendar\r\nimport com.singularity.ipcaplus.utils.*\r\nimport com.singularity.ipcaplus.utils.Backend.getAllTokens\r\nimport com.singularity.ipcaplus.utils.Backend.postTokenAddress\r\n\r\n\r\nclass DrawerActivty : AppCompatActivity() {\r\n\r\n    private lateinit var appBarConfiguration: AppBarConfiguration\r\n    private lateinit var binding: ActivityDrawerActivtyBinding\r\n    private lateinit var binding2: ActivityProfileBinding\r\n    val db = Firebase.firestore\r\n\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n\r\n        binding = ActivityDrawerActivtyBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        binding.navView.getHeaderView(0).findViewById<ImageView>(R.id.imageView_profile).setOnClickListener {\r\n\r\n            val intent = Intent(this, ProfileActivity::class.java)\r\n            startActivity(intent)\r\n        }\r\n\r\n        Utilis.getFile(this,\"profilePictures/\" + Firebase.auth.uid + \".png\", \"png\") { bitmap ->\r\n            binding.navView.getHeaderView(0).findViewById<ImageView>(R.id.imageView_profile).setImageBitmap(bitmap)\r\n        }\r\n        if(!UserLoggedIn.name.isNullOrEmpty()){\r\n            val name = Utilis.getFirstAndLastName(UserLoggedIn.name!!)\r\n            binding.navView.getHeaderView(0).findViewById<TextView>(R.id.textView3).text = name\r\n            binding.navView.getHeaderView(0).findViewById<TextView>(R.id.emailTextView).text = UserLoggedIn.email\r\n        }\r\n\r\n        // Getting device FCM token\r\n        FirebaseMessaging.getInstance().token.addOnCompleteListener(OnCompleteListener { task ->\r\n            if (!task.isSuccessful) {\r\n                Log.w(ContentValues.TAG, \"Fetching FCM registration token failed\", task.exception)\r\n                return@OnCompleteListener\r\n            }\r\n\r\n            // Get new FCM registration token\r\n            var fcmToken = task.result\r\n            \r\n            // Posting FCM token address on firebase\r\n            postTokenAddress(fcmToken.toString(), Firebase.auth.currentUser!!.uid)\r\n        })\r\n\r\n\r\n\r\n        setSupportActionBar(binding.appBarMain.toolbar)\r\n        window.setFlags(\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN,\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN);\r\n\r\n\r\n        binding.appBarMain.fabAddChat.setOnClickListener { view ->\r\n            Snackbar.make(view, \"Replace with your own action\", Snackbar.LENGTH_LONG)\r\n                .setAction(\"Action\", null).show()\r\n        }\r\n        val drawerLayout: DrawerLayout = binding.drawerLayout\r\n        val navView: NavigationView = binding.navView\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        // Passing each menu ID as a set of Ids because each\r\n        // menu should be considered as top level destinations.\r\n        appBarConfiguration = AppBarConfiguration(\r\n            setOf(\r\n                R.id.nav_home\r\n            ), drawerLayout\r\n        )\r\n\r\n        // Generate key for chats\r\n        val keygen = metaGenrateKey()\r\n\r\n        // Criação de Chat\r\n        binding.appBarMain.fabAddChat.setOnClickListener {\r\n\r\n            val intent = Intent(this, AddButtonActivity::class.java)\r\n            startActivity(intent)\r\n\r\n        }\r\n\r\n        // Log Out Button\r\n        binding.logoutLayout.setOnClickListener {\r\n\r\n            val prefs = PreferenceHelper.customPreference(this, \"User_data\")\r\n            prefs.password = null\r\n            prefs.email = null\r\n            prefs.userId = null\r\n\r\n            val intent = Intent(this, WelcomeActivity::class.java)\r\n            startActivity(intent)\r\n        }\r\n\r\n        // Passing each fragment ID as a set of Ids\r\n        setupActionBarWithNavController(navController, appBarConfiguration)\r\n        navView.setupWithNavController(navController)\r\n\r\n        // Vou buscar os tokens do utilizador\r\n        FirebaseMessaging.getInstance().token.addOnCompleteListener(OnCompleteListener { task ->\r\n            if (!task.isSuccessful) {\r\n                Log.w(TAG, \"Fetching FCM registration token failed\", task.exception)\r\n                return@OnCompleteListener\r\n            }\r\n\r\n            // Get new FCM registration token\r\n            val token = task.result\r\n        })\r\n\r\n        /*FirebaseMessaging.getInstance().token.addOnCompleteListener(OnCompleteListener { task ->\r\n            if (!task.isSuccessful) {\r\n                Log.w(ContentValues.TAG, \"Fetching FCM registration token failed\", task.exception)\r\n                return@OnCompleteListener\r\n            }\r\n\r\n            // Get new FCM registration token\r\n            var fcmToken = task.result\r\n\r\n            // Log and toast\r\n            Log.d(ContentValues.TAG, \"O FCM é $fcmToken\")\r\n            Toast.makeText(this, \"O FCM é $fcmToken\", Toast.LENGTH_SHORT).show()\r\n        })\r\n\r\n        db.collection(\"profile\").document(Firebase.auth.currentUser!!.uid).collection(\"tokens\")\r\n            .add(message.toHash())\r\n            .addOnSuccessListener { documentReference ->\r\n                Log.d(ContentValues.TAG, \"DocumentSnapshot added with ID: ${documentReference.id}\")\r\n\r\n            }\r\n            .addOnFailureListener { e ->\r\n                Log.w(ContentValues.TAG, \"Error adding document\", e)\r\n            }\r\n\r\n        binding.editTextMessage.text.clear()*/\r\n\r\n    }\r\n\r\n\r\n    /*\r\n        Refresh Activity Content\r\n    */\r\n    override fun onResume() {\r\n        super.onResume()\r\n\r\n        Utilis.getFile(this,\"profilePictures/\" + Firebase.auth.uid!! + \".png\", \"png\") { bitmap ->\r\n            binding.navView.getHeaderView(0).findViewById<ImageView>(R.id.imageView_profile).setImageBitmap(bitmap)\r\n        }\r\n    }\r\n\r\n\r\n        override fun onCreateOptionsMenu(menu: Menu): Boolean {\r\n        // Inflate the menu; this adds items to the action bar if it is present.\r\n        menuInflater.inflate(R.menu.drawer, menu)\r\n        return true\r\n    }\r\n\r\n    override fun onSupportNavigateUp(): Boolean {\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        return navController.navigateUp(appBarConfiguration) || super.onSupportNavigateUp()\r\n    }\r\n\r\n    override fun onOptionsItemSelected(item: MenuItem): Boolean {\r\n        // Handle item selection\r\n        return when (item.itemId) {\r\n            R.id.search_btn -> {\r\n                val intent = Intent(this, SearchActivity::class.java)\r\n                startActivity(intent)\r\n\r\n                true\r\n            }\r\n            else -> super.onOptionsItemSelected(item)\r\n        }\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/singularity/ipcaplus/drawer/DrawerActivty.kt b/app/src/main/java/com/singularity/ipcaplus/drawer/DrawerActivty.kt
---- a/app/src/main/java/com/singularity/ipcaplus/drawer/DrawerActivty.kt	(revision 0fcf2b7b59abd63a8d521968682f3535b44235ee)
-+++ b/app/src/main/java/com/singularity/ipcaplus/drawer/DrawerActivty.kt	(date 1641942951628)
-@@ -10,6 +10,7 @@
- import android.util.Log
- import android.view.Menu
- import android.view.MenuItem
-+import android.view.View
- import android.view.WindowManager
- import android.widget.ImageView
- import android.widget.TextView
-@@ -98,10 +99,7 @@
- 
- 
-         setSupportActionBar(binding.appBarMain.toolbar)
--        window.setFlags(
--            WindowManager.LayoutParams.FLAG_FULLSCREEN,
--            WindowManager.LayoutParams.FLAG_FULLSCREEN);
--
-+        window.setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN )
- 
-         binding.appBarMain.fabAddChat.setOnClickListener { view ->
-             Snackbar.make(view, "Replace with your own action", Snackbar.LENGTH_LONG)
-Index: .idea/deploymentTargetDropDown.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"deploymentTargetDropDown\">\r\n    <targetSelectedWithDropDown>\r\n      <Target>\r\n        <type value=\"QUICK_BOOT_TARGET\" />\r\n        <deviceKey>\r\n          <Key>\r\n            <type value=\"VIRTUAL_DEVICE_PATH\" />\r\n            <value value=\"C:\\Users\\diogo\\.android\\avd\\Pixel_5_R.avd\" />\r\n          </Key>\r\n        </deviceKey>\r\n      </Target>\r\n    </targetSelectedWithDropDown>\r\n    <timeTargetWasSelectedWithDropDown value=\"2022-01-10T20:01:54.020470300Z\" />\r\n  </component>\r\n</project>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/.idea/deploymentTargetDropDown.xml b/.idea/deploymentTargetDropDown.xml
---- a/.idea/deploymentTargetDropDown.xml	(revision 0fcf2b7b59abd63a8d521968682f3535b44235ee)
-+++ b/.idea/deploymentTargetDropDown.xml	(date 1641984928515)
-@@ -7,11 +7,11 @@
-         <deviceKey>
-           <Key>
-             <type value="VIRTUAL_DEVICE_PATH" />
--            <value value="C:\Users\diogo\.android\avd\Pixel_5_R.avd" />
-+            <value value="C:\Users\diogo\.android\avd\Pixel_5_API_27_2.avd" />
-           </Key>
-         </deviceKey>
-       </Target>
-     </targetSelectedWithDropDown>
--    <timeTargetWasSelectedWithDropDown value="2022-01-10T20:01:54.020470300Z" />
-+    <timeTargetWasSelectedWithDropDown value="2022-01-12T10:53:22.677109100Z" />
-   </component>
- </project>
-\ No newline at end of file
-Index: .idea/misc.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"DesignSurface\">\r\n    <option name=\"filePathToZoomLevelMap\">\r\n      <map>\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/breaktime.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/breaktime_form.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/button_filtro.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/button_green.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/button_register.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/button_week_day.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/chat_photo.xml\" value=\"0.25364583333333335\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/circle.xml\" value=\"0.23802083333333332\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/custom_black_border.xml\" value=\"0.23802083333333332\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/custom_gray_background_outline.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/datetime_selected_item.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/event_shape.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_add_folder.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_add_userdrawer_icons.xml\" value=\"0.25364583333333335\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_arrow_back_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_baseline_arrow_back_ios_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_baseline_arrow_forward_ios_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_contact_icon.xml\" value=\"0.2520833333333333\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_delete.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_documentdrawer_icons.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_file.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_folderdrawer_icons.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_foto_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_homedrawer_icons.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_lg_ipca.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_logo_branco_ipca.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_logout.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_menu_camera.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_menu_gallery.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_menu_slideshow.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_paper_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_plus.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_search_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_swap_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/rounded_dialog.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/side_nav_bar.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_add_event.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_add_people.xml\" value=\"0.24375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_calendar.xml\" value=\"0.36277173913043476\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_chat.xml\" value=\"0.2359375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_chat_files.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_chat_members.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_chat_more.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_contacts.xml\" value=\"0.2359375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_drawer_activty.xml\" value=\"0.2359375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_login.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_news_web.xml\" value=\"0.24375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_profile.xml\" value=\"0.36277173913043476\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_register.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_schedule.xml\" value=\"0.3546195652173913\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_search.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_tab.xml\" value=\"0.2359375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_terms_and_condictions.xml\" value=\"0.21642145230185098\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_welcome.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/app_bar_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/content_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/dialog_add_file.xml\" value=\"0.358695652173913\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/dialog_select_image.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/dialog_select_name.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/fragment_calendar.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/fragment_chats.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/nav_header_main.xml\" value=\"0.358695652173913\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_add_pp.xml\" value=\"0.5\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_chat.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_event.xml\" value=\"0.7456647398843931\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_file.xml\" value=\"0.5\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_message_others.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_message_self.xml\" value=\"0.3546195652173913\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_search.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_subject.xml\" value=\"0.3546195652173913\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_user.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_user_in_chat.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/sample_date_time_picker.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/menu/activity_drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/menu/drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/menu/menu_add.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/menu/menu_chat.xml\" value=\"0.20520833333333333\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/mipmap-anydpi-v26/ic_launcher_round.xml\" value=\"0.25364583333333335\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/chat_message_shape.xml\" value=\"0.29074074074074074\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/chat_photo.xml\" value=\"0.2953703703703704\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/circle.xml\" value=\"0.3101851851851852\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/ic_camera.xml\" value=\"0.22135416666666666\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/ic_upload.xml\" value=\"0.22135416666666666\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/rounded_shape.xml\" value=\"0.3101851851851852\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/user_message_photo.xml\" value=\"0.2953703703703704\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_add_people.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_chat.xml\" value=\"0.25\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_chat_more.xml\" value=\"0.2520833333333333\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_create_chat.xml\" value=\"0.2520833333333333\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_drawer_activty.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_login.xml\" value=\"0.2957427536231884\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_main.xml\" value=\"0.2957427536231884\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_register.xml\" value=\"0.28940217391304346\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/app_bar_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/fragment_chats.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/fragment_home.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_chat.xml\" value=\"0.67\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_message.xml\" value=\"0.28940217391304346\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_message_others.xml\" value=\"0.2694746376811594\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_message_self.xml\" value=\"0.17831813576494426\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_message_system.xml\" value=\"0.26268115942028986\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_pesquisa.xml\" value=\"0.26268115942028986\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/menu/activity_drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/menu/drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/Asus/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_search.xml\" value=\"0.25\" />\r\n        <entry key=\"..\\:/Users/Asus/Documents/GitHub/ipca_plus/app/src/main/res/menu/drawer.xml\" value=\"0.128125\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/ic_menu_slideshow.xml\" value=\"0.22135416666666666\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/round_corner_drawer.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/rounded_shape.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_drawer_activty.xml\" value=\"0.28306159420289856\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_splash_screen.xml\" value=\"0.20520833333333333\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/app_bar_main.xml\" value=\"0.28306159420289856\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/dialog_add_file.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/dialog_select_image.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/nav_header_main.xml\" value=\"0.28306159420289856\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/menu/activity_drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/menu/drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_chat.xml\" value=\"0.14010416666666667\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_drawer_activty.xml\" value=\"0.13020833333333334\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_tab.xml\" value=\"0.14010416666666667\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/app_bar_main.xml\" value=\"0.13020833333333334\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/content_main.xml\" value=\"0.13020833333333334\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/fragment_calendar.xml\" value=\"0.264\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/fragment_chats.xml\" value=\"0.14010416666666667\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/fragment_slideshow.xml\" value=\"0.14010416666666667\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/nav_header_main.xml\" value=\"0.13020833333333334\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/menu/activity_drawer.xml\" value=\"0.25416666666666665\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/menu/drawer.xml\" value=\"0.25416666666666665\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/drawable/chat_photo.xml\" value=\"0.3769230769230769\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/drawable/gradient_shadow.xml\" value=\"0.3769230769230769\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/drawable/ic_video.xml\" value=\"0.3769230769230769\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/drawable/shadow.xml\" value=\"0.3769230769230769\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_add_event.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_calendar.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_chat.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_contacts.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_drawer_activty.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_profile.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_register.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_schedule.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_search.xml\" value=\"0.5\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_tab.xml\" value=\"0.26766304347826086\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/app_bar_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/content_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/nav_header_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/row_chat.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/row_message_self.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/row_pesquisa.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/row_user.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/row_user_in_chat.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/menu/activity_drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/menu/drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"app/src/main/res/drawable/button_register.xml\" value=\"0.3425925925925926\" />\r\n        <entry key=\"app/src/main/res/drawable/event_shape.xml\" value=\"0.31203703703703706\" />\r\n        <entry key=\"app/src/main/res/drawable/ic_baseline_add_24.xml\" value=\"0.3671875\" />\r\n        <entry key=\"app/src/main/res/drawable/ic_baseline_dehaze_24.xml\" value=\"0.3671875\" />\r\n        <entry key=\"app/src/main/res/drawable/ic_frame_4.xml\" value=\"0.3671875\" />\r\n        <entry key=\"app/src/main/res/drawable/ic_lg_ipca.xml\" value=\"0.36153846153846153\" />\r\n        <entry key=\"app/src/main/res/drawable/pop_up_round_corners.xml\" value=\"0.36153846153846153\" />\r\n        <entry key=\"app/src/main/res/drawable/round_corner_drawer.xml\" value=\"0.21354166666666666\" />\r\n        <entry key=\"app/src/main/res/drawable/rounded_shape.xml\" value=\"0.20208333333333334\" />\r\n        <entry key=\"app/src/main/res/layout/activity_chat.xml\" value=\"0.1265625\" />\r\n        <entry key=\"app/src/main/res/layout/activity_drawer.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/layout/activity_drawer_activty.xml\" value=\"0.14402173913043478\" />\r\n        <entry key=\"app/src/main/res/layout/activity_login.xml\" value=\"0.19427083333333334\" />\r\n        <entry key=\"app/src/main/res/layout/activity_search.xml\" value=\"0.32563405797101447\" />\r\n        <entry key=\"app/src/main/res/layout/activity_tab.xml\" value=\"0.33\" />\r\n        <entry key=\"app/src/main/res/layout/activity_welcome.xml\" value=\"0.33\" />\r\n        <entry key=\"app/src/main/res/layout/app_bar_drawer.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/layout/app_bar_main.xml\" value=\"0.1707193515704154\" />\r\n        <entry key=\"app/src/main/res/layout/content_drawer.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/layout/content_main.xml\" value=\"0.32563405797101447\" />\r\n        <entry key=\"app/src/main/res/layout/fragment_gallery.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/layout/fragment_home.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/layout/fragment_official_chats.xml\" value=\"0.32563405797101447\" />\r\n        <entry key=\"app/src/main/res/layout/fragment_tab.xml\" value=\"0.3489583333333333\" />\r\n        <entry key=\"app/src/main/res/layout/nav_header_main.xml\" value=\"0.32563405797101447\" />\r\n        <entry key=\"app/src/main/res/layout/notification.xml\" value=\"0.5352697095435685\" />\r\n        <entry key=\"app/src/main/res/layout/row_chat.xml\" value=\"0.32563405797101447\" />\r\n        <entry key=\"app/src/main/res/layout/row_message_self.xml\" value=\"0.33\" />\r\n        <entry key=\"app/src/main/res/menu/activity_drawer.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/menu/drawer.xml\" value=\"0.325\" />\r\n      </map>\r\n    </option>\r\n  </component>\r\n  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_11\" default=\"true\" project-jdk-name=\"11\" project-jdk-type=\"JavaSDK\">\r\n    <output url=\"file://$PROJECT_DIR$/build/classes\" />\r\n  </component>\r\n  <component name=\"ProjectType\">\r\n    <option name=\"id\" value=\"Android\" />\r\n  </component>\r\n</project>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/.idea/misc.xml b/.idea/misc.xml
---- a/.idea/misc.xml	(revision 0fcf2b7b59abd63a8d521968682f3535b44235ee)
-+++ b/.idea/misc.xml	(date 1641944449895)
-@@ -110,14 +110,18 @@
-         <entry key="..\:/ProjetosAndroid/ipca_plus/app/src/main/res/menu/drawer.xml" value="0.36666666666666664" />
-         <entry key="..\:/Users/Asus/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_search.xml" value="0.25" />
-         <entry key="..\:/Users/Asus/Documents/GitHub/ipca_plus/app/src/main/res/menu/drawer.xml" value="0.128125" />
-+        <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/all_rounded_corners_dialog.xml" value="0.22135416666666666" />
-         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/ic_menu_slideshow.xml" value="0.22135416666666666" />
-+        <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/pop_up_round_corners.xml" value="0.22135416666666666" />
-         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/round_corner_drawer.xml" value="0.33" />
-+        <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/rounded_dialog.xml" value="0.22135416666666666" />
-         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/rounded_shape.xml" value="0.3828125" />
-         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_drawer_activty.xml" value="0.28306159420289856" />
-         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_splash_screen.xml" value="0.20520833333333333" />
-         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/app_bar_main.xml" value="0.28306159420289856" />
-         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/dialog_add_file.xml" value="0.36666666666666664" />
-         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/dialog_select_image.xml" value="0.36666666666666664" />
-+        <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/dialog_select_name.xml" value="0.20520833333333333" />
-         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/nav_header_main.xml" value="0.28306159420289856" />
-         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/menu/activity_drawer.xml" value="0.36666666666666664" />
-         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/menu/drawer.xml" value="0.36666666666666664" />
Index: .idea/shelf/Uncommitted_changes_before_Update_at_1_12_2022_1_08_PM__Default_Changelist_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_1_12_2022_1_08_PM__Default_Changelist_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_1_12_2022_1_08_PM__Default_Changelist_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_1_12_2022_1_08_PM__Default_Changelist_.xml	(revision 8e96e253b18fde6ba59a95a8201590b51e0a7e05)
+++ /dev/null	(revision 8e96e253b18fde6ba59a95a8201590b51e0a7e05)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_1_12_2022_1_08_PM_[Default_Changelist]" date="1641992915895" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_1_12_2022_1_08_PM_[Default_Changelist]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 1/12/2022 1:08 PM [Default Changelist]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_1_11_2022_12_46_PM_[Default_Changelist]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_1_11_2022_12_46_PM_[Default_Changelist]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_1_11_2022_12_46_PM_[Default_Changelist]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_1_11_2022_12_46_PM_[Default_Changelist]/shelved.patch	(revision 8e96e253b18fde6ba59a95a8201590b51e0a7e05)
+++ /dev/null	(revision 8e96e253b18fde6ba59a95a8201590b51e0a7e05)
@@ -1,496 +0,0 @@
-Index: app/src/main/java/com/singularity/ipcaplus/chat/ChatMoreActivity.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.singularity.ipcaplus.chat\r\n\r\nimport android.content.Intent\r\nimport android.os.Bundle\r\nimport android.view.View\r\nimport android.widget.Button\r\nimport android.widget.EditText\r\nimport android.widget.ImageView\r\nimport androidx.appcompat.app.AlertDialog\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.singularity.ipcaplus.LoginActivity\r\nimport com.singularity.ipcaplus.R\r\nimport com.singularity.ipcaplus.databinding.ActivityChatMoreBinding\r\nimport com.singularity.ipcaplus.drawer.DrawerActivty\r\nimport com.singularity.ipcaplus.utils.ActivityImageHelper\r\nimport com.singularity.ipcaplus.utils.Backend\r\nimport com.singularity.ipcaplus.utils.Utilis\r\nimport com.theartofdev.edmodo.cropper.CropImage\r\nimport com.theartofdev.edmodo.cropper.CropImageView\r\n\r\nclass ChatMoreActivity : ActivityImageHelper() {\r\n\r\n    lateinit var imageViewGroup: ImageView\r\n    lateinit var imageViewDialog: ImageView\r\n    lateinit var chat_id: String\r\n    var is_admin: Boolean = false\r\n    private lateinit var binding: ActivityChatMoreBinding\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_chat_more)\r\n\r\n        overridePendingTransition(R.anim.slide_in_up, R.anim.slide_stay)\r\n\r\n        // Create the layout for this fragment\r\n        binding = ActivityChatMoreBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        // Create Action Bar\r\n        supportActionBar?.setDisplayHomeAsUpEnabled(true)\r\n        supportActionBar?.setHomeAsUpIndicator(R.drawable.ic_arrow_back_24)\r\n        supportActionBar?.title = \"Definições do grupo\"\r\n\r\n        // Get previous data\r\n        chat_id = intent.getStringExtra(\"chat_id\").toString()\r\n        val chat_name = intent.getStringExtra(\"chat_name\").toString()\r\n        is_admin = intent.getBooleanExtra(\"is_admin\", false)\r\n        binding.textViewGroupName.text = chat_name\r\n\r\n        // Get Group Image\r\n        imageViewGroup = binding.imageViewGroup\r\n        Utilis.getFile(this, \"chats/$chat_id/icon.png\", \"png\") { bitmap ->\r\n            imageViewGroup.setImageBitmap(bitmap)\r\n        }\r\n\r\n        binding.seeGroupMembers.setOnClickListener {\r\n            val intent = Intent(this, ChatMembersActivity::class.java)\r\n            intent.putExtra(\"chat_id\", chat_id)\r\n            intent.putExtra(\"is_admin\", is_admin)\r\n            startActivity(intent)\r\n        }\r\n\r\n        if (is_admin) {\r\n            binding.changeGroupName.setOnClickListener {\r\n                openSelectNameDialog()\r\n            }\r\n\r\n            binding.changeGroupImage.setOnClickListener {\r\n                openSelectImageDialog()\r\n            }\r\n            binding.deleteChat.setOnClickListener {\r\n                Backend.deleteChat(chat_id) {\r\n                    val intent = Intent(this, LoginActivity::class.java)\r\n                    startActivity(intent)\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            binding.changeGroupName.visibility = View.GONE\r\n            binding.changeGroupImage.visibility = View.GONE\r\n            binding.deleteChat.visibility = View.GONE\r\n        }\r\n\r\n        binding.groupFiles.setOnClickListener {\r\n            val intent = Intent(this, ChatFilesActivity::class.java)\r\n            intent.putExtra(\"chat_id\", chat_id)\r\n            startActivity(intent)\r\n        }\r\n\r\n        binding.notifications.setOnClickListener {\r\n            println(\"-------------> 5\")\r\n        }\r\n\r\n        binding.securityNumberVerification.setOnClickListener {\r\n            val intent = Intent(this, VerifySecurityNumberActivity::class.java )\r\n            intent.putExtra(\"chat_id\", chat_id)\r\n            startActivity(intent)\r\n        }\r\n\r\n        binding.leaveGroup.setOnClickListener {\r\n\r\n            Backend.removeUserFromChat(chat_id, Firebase.auth.currentUser!!.uid)\r\n\r\n            val intent = Intent(this, LoginActivity::class.java)\r\n            startActivity(intent)\r\n        }\r\n\r\n    }\r\n\r\n    // When the support action bar back button is pressed, the app will go back to the previous activity\r\n    override fun onSupportNavigateUp(): Boolean {\r\n        onBackPressed()\r\n        return true\r\n    }\r\n\r\n\r\n    /*\r\n        This function display a dialog window with a text box to edit chat name\r\n     */\r\n    private fun openSelectImageDialog() {\r\n\r\n        // Variables\r\n        val alertDialog = AlertDialog.Builder(this)\r\n        val row = layoutInflater.inflate(R.layout.dialog_select_image, null)\r\n        alertDialog.setView(row)\r\n        val show = alertDialog.show()\r\n        imageViewDialog = row.findViewById(R.id.imageViewChatPhoto)\r\n\r\n        Utilis.getFile(this,\"chats/$chat_id/icon.png\", \"png\") { bitmap ->\r\n            row.findViewById<ImageView>(R.id.imageViewChatPhoto).setImageBitmap(bitmap)\r\n        }\r\n\r\n        imageViewDialog.setOnClickListener {\r\n            checkPermission(android.Manifest.permission.READ_EXTERNAL_STORAGE, STORAGE_PERMISSION_CODE)\r\n            show.dismiss()\r\n        }\r\n\r\n    }\r\n\r\n\r\n    /*\r\n        This function display a dialog window with a text box to edit chat name\r\n     */\r\n    private fun openSelectNameDialog() {\r\n\r\n        // Variables\r\n        val alertDialog = AlertDialog.Builder(this)\r\n        val row = layoutInflater.inflate(R.layout.dialog_select_name, null)\r\n        alertDialog.setView(row)\r\n        val show = alertDialog.show()\r\n\r\n        row.findViewById<EditText>(R.id.editTextName).setText(binding.textViewGroupName.text.toString())\r\n\r\n        row.findViewById<Button>(R.id.buttonSave).setOnClickListener {\r\n            val newName = row.findViewById<EditText>(R.id.editTextName).text.toString()\r\n            Backend.changeChatName(chat_id, newName)\r\n            show.dismiss()\r\n            binding.textViewGroupName.text = newName\r\n        }\r\n\r\n    }\r\n\r\n\r\n    /*\r\n       This function happen after picking photo, and make changes in the activity\r\n    */\r\n    override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\r\n        super.onActivityResult(requestCode, resultCode, data)\r\n\r\n        if(requestCode == IMAGE_REQUEST_CODE && resultCode == RESULT_OK){\r\n            CropImage.activity(data?.data)\r\n                .setGuidelines(CropImageView.Guidelines.ON)\r\n                .setAspectRatio(1,1)\r\n                .start(this)\r\n        }\r\n\r\n        if (requestCode == CropImage.CROP_IMAGE_ACTIVITY_REQUEST_CODE) {\r\n            val result = CropImage.getActivityResult(data)\r\n            if (resultCode == RESULT_OK) {\r\n                imageViewGroup.setImageURI(result.uri)\r\n                Utilis.uploadFile(result.uri, \"chats/$chat_id/icon.png\")\r\n            }\r\n        }\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/singularity/ipcaplus/chat/ChatMoreActivity.kt b/app/src/main/java/com/singularity/ipcaplus/chat/ChatMoreActivity.kt
---- a/app/src/main/java/com/singularity/ipcaplus/chat/ChatMoreActivity.kt	(revision 8b5446601321d1d23325245b63fc13fc85a91fcc)
-+++ b/app/src/main/java/com/singularity/ipcaplus/chat/ChatMoreActivity.kt	(date 1641904815638)
-@@ -7,6 +7,7 @@
- import android.widget.EditText
- import android.widget.ImageView
- import androidx.appcompat.app.AlertDialog
-+import com.google.android.material.bottomsheet.BottomSheetDialog
- import com.google.firebase.auth.ktx.auth
- import com.google.firebase.ktx.Firebase
- import com.singularity.ipcaplus.LoginActivity
-@@ -121,19 +122,19 @@
-     private fun openSelectImageDialog() {
- 
-         // Variables
--        val alertDialog = AlertDialog.Builder(this)
--        val row = layoutInflater.inflate(R.layout.dialog_select_image, null)
--        alertDialog.setView(row)
--        val show = alertDialog.show()
--        imageViewDialog = row.findViewById(R.id.imageViewChatPhoto)
-+        val dialog = BottomSheetDialog(this, R.style.AppBottomSheetDialogTheme)
-+        val view = layoutInflater.inflate(R.layout.dialog_select_image, null)
-+        dialog.setContentView(view)
-+        dialog.show()
-+        imageViewDialog = view.findViewById(R.id.imageViewChatPhoto)
- 
-         Utilis.getFile(this,"chats/$chat_id/icon.png", "png") { bitmap ->
--            row.findViewById<ImageView>(R.id.imageViewChatPhoto).setImageBitmap(bitmap)
-+            view.findViewById<ImageView>(R.id.imageViewChatPhoto).setImageBitmap(bitmap)
-         }
- 
-         imageViewDialog.setOnClickListener {
-             checkPermission(android.Manifest.permission.READ_EXTERNAL_STORAGE, STORAGE_PERMISSION_CODE)
--            show.dismiss()
-+            dialog.dismiss()
-         }
- 
-     }
-Index: app/src/main/res/layout/dialog_select_image.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"wrap_content\">\r\n\r\n    <TextView\r\n        android:id=\"@+id/textView\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"20dp\"\r\n        android:layout_marginTop=\"10dp\"\r\n        android:layout_marginEnd=\"20dp\"\r\n        android:text=\"Editar imagem do grupo\"\r\n        android:textColor=\"@color/black\"\r\n        android:textSize=\"18sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n    <androidx.cardview.widget.CardView\r\n        android:id=\"@+id/viewImageViewGroup\"\r\n        android:layout_width=\"80dp\"\r\n        android:layout_height=\"80dp\"\r\n        android:layout_centerHorizontal=\"true\"\r\n        android:layout_marginStart=\"10dp\"\r\n        android:layout_marginTop=\"10dp\"\r\n        android:layout_marginEnd=\"10dp\"\r\n        android:layout_marginBottom=\"10dp\"\r\n        android:elevation=\"12dp\"\r\n        android:innerRadius=\"0dp\"\r\n        android:shape=\"ring\"\r\n        android:thicknessRatio=\"1.9\"\r\n        app:cardCornerRadius=\"40dp\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/textView\">\r\n\r\n        <ImageView\r\n            android:id=\"@+id/imageViewChatPhoto\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"80dp\"\r\n            android:layout_alignParentTop=\"true\"\r\n            android:layout_centerHorizontal=\"true\"\r\n            app:srcCompat=\"@mipmap/ic_launcher_round\" />\r\n\r\n    </androidx.cardview.widget.CardView>\r\n<!--\r\n    <Button\r\n        android:id=\"@+id/buttonSave\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"10dp\"\r\n        android:layout_marginBottom=\"10dp\"\r\n        android:background=\"@drawable/button_green\"\r\n        android:backgroundTint=\"@color/green_200\"\r\n        android:paddingHorizontal=\"40dp\"\r\n        android:text=\"Guardar\"\r\n        android:textSize=\"12dp\"\r\n        android:translationZ=\"10dp\"\r\n        app:backgroundTint=\"@null\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/viewImageViewGroup\" />\r\n-->\r\n</androidx.constraintlayout.widget.ConstraintLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/layout/dialog_select_image.xml b/app/src/main/res/layout/dialog_select_image.xml
---- a/app/src/main/res/layout/dialog_select_image.xml	(revision 8b5446601321d1d23325245b63fc13fc85a91fcc)
-+++ b/app/src/main/res/layout/dialog_select_image.xml	(date 1641905107596)
-@@ -3,41 +3,44 @@
-     xmlns:app="http://schemas.android.com/apk/res-auto"
-     xmlns:tools="http://schemas.android.com/tools"
-     android:layout_width="match_parent"
--    android:layout_height="wrap_content">
-+    android:layout_height="wrap_content"
-+    android:elevation="20dp"
-+    android:translationZ="5dp">
- 
-     <TextView
-         android:id="@+id/textView"
-         android:layout_width="match_parent"
-         android:layout_height="wrap_content"
--        android:layout_marginStart="20dp"
--        android:layout_marginTop="10dp"
--        android:layout_marginEnd="20dp"
-+        android:layout_marginTop="20dp"
-+        android:layout_marginBottom="2dp"
-         android:text="Editar imagem do grupo"
-+        android:textAlignment="center"
-         android:textColor="@color/black"
-         android:textSize="18sp"
-         android:textStyle="bold"
-+        app:layout_constraintBottom_toTopOf="@+id/textView4"
-         app:layout_constraintEnd_toEndOf="parent"
-+        app:layout_constraintHorizontal_bias="1.0"
-         app:layout_constraintStart_toStartOf="parent"
--        app:layout_constraintTop_toTopOf="parent" />
-+        app:layout_constraintTop_toBottomOf="@+id/viewImageViewGroup" />
- 
-     <androidx.cardview.widget.CardView
-         android:id="@+id/viewImageViewGroup"
--        android:layout_width="80dp"
-+        android:layout_width="72dp"
-         android:layout_height="80dp"
-         android:layout_centerHorizontal="true"
-         android:layout_marginStart="10dp"
--        android:layout_marginTop="10dp"
-+        android:layout_marginTop="20dp"
-         android:layout_marginEnd="10dp"
--        android:layout_marginBottom="10dp"
--        android:elevation="12dp"
-+        android:elevation="20dp"
-+        android:translationZ="5dp"
-         android:innerRadius="0dp"
-         android:shape="ring"
-         android:thicknessRatio="1.9"
-         app:cardCornerRadius="40dp"
--        app:layout_constraintBottom_toBottomOf="parent"
-         app:layout_constraintEnd_toEndOf="parent"
-         app:layout_constraintStart_toStartOf="parent"
--        app:layout_constraintTop_toBottomOf="@+id/textView">
-+        app:layout_constraintTop_toTopOf="parent">
- 
-         <ImageView
-             android:id="@+id/imageViewChatPhoto"
-@@ -48,23 +51,37 @@
-             app:srcCompat="@mipmap/ic_launcher_round" />
- 
-     </androidx.cardview.widget.CardView>
--<!--
--    <Button
--        android:id="@+id/buttonSave"
--        android:layout_width="wrap_content"
--        android:layout_height="wrap_content"
--        android:layout_marginTop="10dp"
--        android:layout_marginBottom="10dp"
--        android:background="@drawable/button_green"
--        android:backgroundTint="@color/green_200"
--        android:paddingHorizontal="40dp"
--        android:text="Guardar"
--        android:textSize="12dp"
--        android:translationZ="10dp"
--        app:backgroundTint="@null"
--        app:layout_constraintBottom_toBottomOf="parent"
--        app:layout_constraintEnd_toEndOf="parent"
--        app:layout_constraintStart_toStartOf="parent"
--        app:layout_constraintTop_toBottomOf="@+id/viewImageViewGroup" />
---->
-+
-+    <TextView
-+        android:id="@+id/textView4"
-+        android:layout_width="wrap_content"
-+        android:layout_height="wrap_content"
-+        android:layout_marginStart="173dp"
-+        android:layout_marginTop="10dp"
-+        android:layout_marginEnd="180dp"
-+        android:layout_marginBottom="20dp"
-+        android:text="Toca na imagem acima para alterar a foto do grupo"
-+        app:layout_constraintBottom_toBottomOf="parent"
-+        app:layout_constraintEnd_toEndOf="parent"
-+        app:layout_constraintStart_toStartOf="parent"
-+        app:layout_constraintTop_toBottomOf="@+id/textView" />
-+    <!--
-+        <Button
-+            android:id="@+id/buttonSave"
-+            android:layout_width="wrap_content"
-+            android:layout_height="wrap_content"
-+            android:layout_marginTop="10dp"
-+            android:layout_marginBottom="10dp"
-+            android:background="@drawable/button_green"
-+            android:backgroundTint="@color/green_200"
-+            android:paddingHorizontal="40dp"
-+            android:text="Guardar"
-+            android:textSize="12dp"
-+            android:translationZ="10dp"
-+            app:backgroundTint="@null"
-+            app:layout_constraintBottom_toBottomOf="parent"
-+            app:layout_constraintEnd_toEndOf="parent"
-+            app:layout_constraintStart_toStartOf="parent"
-+            app:layout_constraintTop_toBottomOf="@+id/viewImageViewGroup" />
-+    -->
- </androidx.constraintlayout.widget.ConstraintLayout>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_rebase__Default_Changelist_.xml
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_rebase__Default_Changelist_.xml b/.idea/shelf/Uncommitted_changes_before_rebase__Default_Changelist_.xml
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_rebase__Default_Changelist_.xml	(revision 8b5446601321d1d23325245b63fc13fc85a91fcc)
-+++ /dev/null	(revision 8b5446601321d1d23325245b63fc13fc85a91fcc)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_rebase_[Default_Changelist]" date="1641230754374" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_rebase_[Default_Changelist]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before rebase [Default Changelist]" />
--</changelist>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_1_3_2022_12_58_AM__Default_Changelist_.xml
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_1_3_2022_12_58_AM__Default_Changelist_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_1_3_2022_12_58_AM__Default_Changelist_.xml
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_1_3_2022_12_58_AM__Default_Changelist_.xml	(revision 8b5446601321d1d23325245b63fc13fc85a91fcc)
-+++ /dev/null	(revision 8b5446601321d1d23325245b63fc13fc85a91fcc)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Update_at_1_3_2022_12_58_AM_[Default_Changelist]" date="1641171504492" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_1_3_2022_12_58_AM_[Default_Changelist]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Update at 1/3/2022 12:58 AM [Default Changelist]" />
--</changelist>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_1_3_2022_12_58_AM_[Default_Changelist]/shelved.patch
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_1_3_2022_12_58_AM_[Default_Changelist]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_1_3_2022_12_58_AM_[Default_Changelist]/shelved.patch
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_1_3_2022_12_58_AM_[Default_Changelist]/shelved.patch	(revision 8b5446601321d1d23325245b63fc13fc85a91fcc)
-+++ /dev/null	(revision 8b5446601321d1d23325245b63fc13fc85a91fcc)
-@@ -1,117 +0,0 @@
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_25_2021_11_48_PM__Default_Changelist_.xml
--===================================================================
--diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_25_2021_11_48_PM__Default_Changelist_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_12_25_2021_11_48_PM__Default_Changelist_.xml
--deleted file mode 100644
----- a/.idea/shelf/Uncommitted_changes_before_Update_at_12_25_2021_11_48_PM__Default_Changelist_.xml	(revision 4aa987fb089524fc215b2e1a15d5096cbf937095)
--+++ /dev/null	(revision 4aa987fb089524fc215b2e1a15d5096cbf937095)
--@@ -1,4 +0,0 @@
---<changelist name="Uncommitted_changes_before_Update_at_12_25_2021_11_48_PM_[Default_Changelist]" date="1640476111741" recycled="true" deleted="true">
---  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_12_25_2021_11_48_PM_[Default_Changelist]/shelved.patch" />
---  <option name="DESCRIPTION" value="Uncommitted changes before Update at 12/25/2021 11:48 PM [Default Changelist]" />
---</changelist>
--\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_25_2021_11_48_PM_[Default_Changelist]/shelved.patch
--===================================================================
--diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_25_2021_11_48_PM_[Default_Changelist]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_12_25_2021_11_48_PM_[Default_Changelist]/shelved.patch
--deleted file mode 100644
----- a/.idea/shelf/Uncommitted_changes_before_Update_at_12_25_2021_11_48_PM_[Default_Changelist]/shelved.patch	(revision 4aa987fb089524fc215b2e1a15d5096cbf937095)
--+++ /dev/null	(revision 4aa987fb089524fc215b2e1a15d5096cbf937095)
--@@ -1,98 +0,0 @@
---Index: app/src/main/java/com/singularity/ipcaplus/cryptography/metaData.kt
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.singularity.ipcaplus.cryptography\r\n\r\nimport android.content.Context\r\nimport android.preference.PreferenceManager\r\nimport org.bouncycastle.jce.provider.BouncyCastleProvider\r\nimport org.bouncycastle.util.encoders.Base64\r\nimport java.io.*\r\nimport java.security.InvalidKeyException\r\nimport java.security.NoSuchAlgorithmException\r\nimport java.security.Security\r\nimport javax.crypto.*\r\nimport javax.crypto.spec.SecretKeySpec\r\n\r\n\r\nfun encryptMeta(strToEncrypt: String, secret_key: String): String? {\r\n    Security.addProvider(BouncyCastleProvider())\r\n    var keyBytes: ByteArray\r\n\r\n    try {\r\n        keyBytes = secret_key.toByteArray(charset(\"UTF8\"))\r\n        val skey = SecretKeySpec(keyBytes, \"AES\")\r\n        val input = strToEncrypt.toByteArray(charset(\"UTF8\"))\r\n\r\n        synchronized(Cipher::class.java) {\r\n            val cipher = Cipher.getInstance(\"AES/ECB/PKCS7Padding\")\r\n            cipher.init(Cipher.ENCRYPT_MODE, skey)\r\n\r\n            val cipherText = ByteArray(cipher.getOutputSize(input.size))\r\n            var ctLength = cipher.update(\r\n                input, 0, input.size,\r\n                cipherText, 0\r\n            )\r\n            ctLength += cipher.doFinal(cipherText, ctLength)\r\n            return String(\r\n                Base64.encode(cipherText)\r\n            )\r\n        }\r\n    } catch (uee: UnsupportedEncodingException) {\r\n        uee.printStackTrace()\r\n    } catch (ibse: IllegalBlockSizeException) {\r\n        ibse.printStackTrace()\r\n    } catch (bpe: BadPaddingException) {\r\n        bpe.printStackTrace()\r\n    } catch (ike: InvalidKeyException) {\r\n        ike.printStackTrace()\r\n    } catch (nspe: NoSuchPaddingException) {\r\n        nspe.printStackTrace()\r\n    } catch (nsae: NoSuchAlgorithmException) {\r\n        nsae.printStackTrace()\r\n    } catch (e: ShortBufferException) {\r\n        e.printStackTrace()\r\n    }\r\n\r\n    return null\r\n}\r\n\r\n\r\nfun decryptWithAESmeta(key: String, strToDecrypt: String?): String? {\r\n    Security.addProvider(BouncyCastleProvider())\r\n    var keyBytes: ByteArray\r\n\r\n    try {\r\n        keyBytes = key.toByteArray(charset(\"UTF8\"))\r\n        val skey = SecretKeySpec(keyBytes, \"AES\")\r\n        val input = org.bouncycastle.util.encoders.Base64\r\n            .decode(strToDecrypt?.trim { it <= ' ' }?.toByteArray(charset(\"UTF8\")))\r\n\r\n        synchronized(Cipher::class.java) {\r\n            val cipher = Cipher.getInstance(\"AES/ECB/PKCS7Padding\")\r\n            cipher.init(Cipher.DECRYPT_MODE, skey)\r\n\r\n            val plainText = ByteArray(cipher.getOutputSize(input.size))\r\n            var ptLength = cipher.update(input, 0, input.size, plainText, 0)\r\n            ptLength += cipher.doFinal(plainText, ptLength)\r\n            val decryptedString = String(plainText)\r\n            return decryptedString.trim { it <= ' ' }\r\n        }\r\n    } catch (uee: UnsupportedEncodingException) {\r\n        uee.printStackTrace()\r\n    } catch (ibse: IllegalBlockSizeException) {\r\n        ibse.printStackTrace()\r\n    } catch (bpe: BadPaddingException) {\r\n        bpe.printStackTrace()\r\n    } catch (ike: InvalidKeyException) {\r\n        ike.printStackTrace()\r\n    } catch (nspe: NoSuchPaddingException) {\r\n        nspe.printStackTrace()\r\n    } catch (nsae: NoSuchAlgorithmException) {\r\n        nsae.printStackTrace()\r\n    } catch (e: ShortBufferException) {\r\n        e.printStackTrace()\r\n    }\r\n\r\n    return null\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/app/src/main/java/com/singularity/ipcaplus/cryptography/metaData.kt b/app/src/main/java/com/singularity/ipcaplus/cryptography/metaData.kt
------ a/app/src/main/java/com/singularity/ipcaplus/cryptography/metaData.kt	(revision 68db8e92ec156616c8dd39c656747d5b2c7a2133)
---+++ b/app/src/main/java/com/singularity/ipcaplus/cryptography/metaData.kt	(date 1640260278648)
---@@ -6,14 +6,17 @@
--- import org.bouncycastle.util.encoders.Base64
--- import java.io.*
--- import java.security.InvalidKeyException
---+import java.security.MessageDigest
--- import java.security.NoSuchAlgorithmException
--- import java.security.Security
---+import java.util.Objects.hash
--- import javax.crypto.*
--- import javax.crypto.spec.SecretKeySpec
--- 
--- 
--- fun encryptMeta(strToEncrypt: String, secret_key: String): String? {
---     Security.addProvider(BouncyCastleProvider())
---+    hash(strToEncrypt)
---     var keyBytes: ByteArray
--- 
---     try {
---@@ -54,7 +57,6 @@
---     return null
--- }
--- 
----
--- fun decryptWithAESmeta(key: String, strToDecrypt: String?): String? {
---     Security.addProvider(BouncyCastleProvider())
---     var keyBytes: ByteArray
---Index: app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.singularity.ipcaplus\r\n\r\nimport android.content.ContentValues\r\nimport android.content.Intent\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport android.util.Log\r\nimport android.view.Menu\r\nimport android.view.WindowManager\r\nimport android.widget.ImageView\r\nimport androidx.drawerlayout.widget.DrawerLayout\r\nimport androidx.navigation.findNavController\r\nimport androidx.navigation.ui.AppBarConfiguration\r\nimport androidx.navigation.ui.navigateUp\r\nimport androidx.navigation.ui.setupActionBarWithNavController\r\nimport androidx.navigation.ui.setupWithNavController\r\nimport com.google.android.material.navigation.NavigationView\r\nimport com.google.android.material.snackbar.Snackbar\r\nimport com.google.firebase.Timestamp\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.firestore.ktx.firestore\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.singularity.ipcaplus.calendar.AddEventActivity\r\nimport com.singularity.ipcaplus.databinding.ActivityDrawerActivtyBinding\r\nimport com.singularity.ipcaplus.models.Chat\r\nimport com.singularity.ipcaplus.models.Message\r\nimport com.singularity.ipcaplus.profile.ProfileActivity\r\nimport java.util.concurrent.TimeUnit\r\nimport kotlin.random.Random\r\n\r\n\r\nclass DrawerActivty : AppCompatActivity() {\r\n\r\n    private lateinit var appBarConfiguration: AppBarConfiguration\r\n    private lateinit var binding: ActivityDrawerActivtyBinding\r\n\r\n    val db = Firebase.firestore\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n\r\n        binding = ActivityDrawerActivtyBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        binding.navView.getHeaderView(0).findViewById<ImageView>(R.id.imageView_profile).setOnClickListener {\r\n\r\n            val intent = Intent(this, ProfileActivity::class.java)\r\n            startActivity(intent)\r\n\r\n        }\r\n\r\n        setSupportActionBar(binding.appBarMain.toolbar)\r\n        window.setFlags(\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN,\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN);\r\n\r\n\r\n        binding.appBarMain.fabAddChat.setOnClickListener { view ->\r\n            Snackbar.make(view, \"Replace with your own action\", Snackbar.LENGTH_LONG)\r\n                .setAction(\"Action\", null).show()\r\n        }\r\n        val drawerLayout: DrawerLayout = binding.drawerLayout\r\n        val navView: NavigationView = binding.navView\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        val stampCurrent = System.currentTimeMillis()\r\n        val stampSec = TimeUnit.MILLISECONDS.toSeconds(stampCurrent)\r\n        val stampNano = TimeUnit.MILLISECONDS.toNanos(stampCurrent).toInt()\r\n        // Passing each menu ID as a set of Ids because each\r\n        // menu should be considered as top level destinations.\r\n        appBarConfiguration = AppBarConfiguration(\r\n            setOf(\r\n                R.id.nav_home\r\n            ), drawerLayout\r\n        )\r\n\r\n        // Criação de Chat\r\n        binding.appBarMain.fabAddChat.setOnClickListener {\r\n            val chat = Chat(\r\n                \"Chat Teste \" + Random.nextInt(256),\r\n                \"chat\"\r\n\r\n            )\r\n            val message = Message(\r\n                \"system\",\r\n                \"This is an Alpha Chat, bugs are expected, please report them if you found some. Welcome to Singularity!\",\r\n                \"2021-12-22\",\r\n                Timestamp.now(),\r\n                \"\"\r\n\r\n            )\r\n            db.collection(\"chat\")\r\n                .add(chat.toHash())\r\n                .addOnSuccessListener { documentReference ->\r\n                    db.collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .collection(\"message\")\r\n                        .add(message.toHash())\r\n                    db.collection(\"profile\")\r\n                        .document(\"${Firebase.auth.currentUser!!.uid}\")\r\n                        .collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .set(chat)\r\n\r\n                }\r\n                .addOnFailureListener { e ->\r\n                    Log.w(ContentValues.TAG, \"Error adding document\", e)\r\n                }\r\n\r\n        }\r\n        // Passing each fragment ID as a set of Ids\r\n        setupActionBarWithNavController(navController, appBarConfiguration)\r\n        navView.setupWithNavController(navController)\r\n\r\n    }\r\n\r\n    override fun onCreateOptionsMenu(menu: Menu): Boolean {\r\n        // Inflate the menu; this adds items to the action bar if it is present.\r\n        menuInflater.inflate(R.menu.drawer, menu)\r\n        return true\r\n    }\r\n\r\n    override fun onSupportNavigateUp(): Boolean {\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        return navController.navigateUp(appBarConfiguration) || super.onSupportNavigateUp()\r\n    }\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt b/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt
------ a/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt	(revision 68db8e92ec156616c8dd39c656747d5b2c7a2133)
---+++ b/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt	(date 1640260544587)
---@@ -21,11 +21,14 @@
--- import com.google.firebase.firestore.ktx.firestore
--- import com.google.firebase.ktx.Firebase
--- import com.singularity.ipcaplus.calendar.AddEventActivity
---+import com.singularity.ipcaplus.cryptography.decryptWithAESmeta
---+import com.singularity.ipcaplus.cryptography.encryptMeta
--- import com.singularity.ipcaplus.databinding.ActivityDrawerActivtyBinding
--- import com.singularity.ipcaplus.models.Chat
--- import com.singularity.ipcaplus.models.Message
--- import com.singularity.ipcaplus.profile.ProfileActivity
--- import java.util.concurrent.TimeUnit
---+import javax.crypto.KeyGenerator
--- import kotlin.random.Random
--- 
--- 
---@@ -49,6 +52,18 @@
--- 
---         }
--- 
---+        val keygen = KeyGenerator.getInstance("AES")
---+        keygen.init(256)
---+
---+        val secret_key= keygen.init(256).toString()
---+        println(secret_key)
---+
---+        val message = "Hello Welcome to Solanium Dr.Diogo"
---+        var meta = encryptMeta(secret_key, message)
---+
---+        val message_decripted = decryptWithAESmeta(secret_key, meta)
---+        println(message_decripted)
---+
---         setSupportActionBar(binding.appBarMain.toolbar)
---         window.setFlags(
---             WindowManager.LayoutParams.FLAG_FULLSCREEN,
---Index: .idea/misc.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"DesignSurface\">\r\n    <option name=\"filePathToZoomLevelMap\">\r\n      <map>\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/breaktime.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/breaktime_form.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/button_filtro.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/button_green.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/button_register.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/button_week_day.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/circle.xml\" value=\"0.23802083333333332\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/custom_black_border.xml\" value=\"0.23802083333333332\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/datetime_selected_item.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/event_shape.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_arrow_back_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_baseline_arrow_back_ios_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_baseline_arrow_forward_ios_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_contact_icon.xml\" value=\"0.2520833333333333\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_documentdrawer_icons.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_folderdrawer_icons.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_foto_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_homedrawer_icons.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_lg_ipca.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_logo_branco_ipca.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_logout.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_menu_camera.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_menu_gallery.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_menu_slideshow.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_paper_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_search_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_swap_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/side_nav_bar.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_add_event.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_calendar.xml\" value=\"0.36277173913043476\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_chat.xml\" value=\"0.2359375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_contacts.xml\" value=\"0.2359375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_drawer_activty.xml\" value=\"0.2359375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_login.xml\" value=\"0.2359375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_profile.xml\" value=\"0.36277173913043476\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_register.xml\" value=\"0.2359375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_schedule.xml\" value=\"0.3546195652173913\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_search.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_tab.xml\" value=\"0.2359375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_welcome.xml\" value=\"0.2359375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/app_bar_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/content_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/fragment_calendar.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/nav_header_main.xml\" value=\"0.358695652173913\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_event.xml\" value=\"0.7456647398843931\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_message_self.xml\" value=\"0.3546195652173913\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_subject.xml\" value=\"0.3546195652173913\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/sample_date_time_picker.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/menu/activity_drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/menu/drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/chat_message_shape.xml\" value=\"0.29074074074074074\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/chat_photo.xml\" value=\"0.2953703703703704\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/circle.xml\" value=\"0.3101851851851852\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/ic_camera.xml\" value=\"0.22135416666666666\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/ic_upload.xml\" value=\"0.22135416666666666\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/rounded_shape.xml\" value=\"0.3101851851851852\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/user_message_photo.xml\" value=\"0.2953703703703704\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_chat.xml\" value=\"0.25\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_login.xml\" value=\"0.2957427536231884\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_main.xml\" value=\"0.2957427536231884\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_register.xml\" value=\"0.28940217391304346\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_chat.xml\" value=\"0.67\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_message.xml\" value=\"0.28940217391304346\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_message_others.xml\" value=\"0.2694746376811594\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_message_self.xml\" value=\"0.17831813576494426\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_message_system.xml\" value=\"0.26268115942028986\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_pesquisa.xml\" value=\"0.26268115942028986\" />\r\n        <entry key=\"..\\:/Users/Asus/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_search.xml\" value=\"0.25\" />\r\n        <entry key=\"..\\:/Users/Asus/Documents/GitHub/ipca_plus/app/src/main/res/menu/drawer.xml\" value=\"0.128125\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/ic_menu_slideshow.xml\" value=\"0.22135416666666666\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/round_corner_drawer.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/rounded_shape.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_drawer_activty.xml\" value=\"0.28306159420289856\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/app_bar_main.xml\" value=\"0.28306159420289856\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/nav_header_main.xml\" value=\"0.28306159420289856\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/menu/activity_drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/menu/drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_chat.xml\" value=\"0.14010416666666667\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_drawer_activty.xml\" value=\"0.13020833333333334\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_tab.xml\" value=\"0.14010416666666667\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/app_bar_main.xml\" value=\"0.13020833333333334\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/content_main.xml\" value=\"0.13020833333333334\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/fragment_calendar.xml\" value=\"0.264\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/fragment_chats.xml\" value=\"0.14010416666666667\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/fragment_slideshow.xml\" value=\"0.14010416666666667\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/nav_header_main.xml\" value=\"0.13020833333333334\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/menu/activity_drawer.xml\" value=\"0.25416666666666665\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/menu/drawer.xml\" value=\"0.25416666666666665\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/drawable/chat_photo.xml\" value=\"0.3769230769230769\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/drawable/gradient_shadow.xml\" value=\"0.3769230769230769\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/drawable/ic_video.xml\" value=\"0.3769230769230769\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/drawable/shadow.xml\" value=\"0.3769230769230769\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_add_event.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_calendar.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_chat.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_contacts.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_drawer_activty.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_profile.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_register.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_schedule.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_search.xml\" value=\"0.5\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_tab.xml\" value=\"0.26766304347826086\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/app_bar_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/content_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/nav_header_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/row_chat.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/row_pesquisa.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/menu/activity_drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/menu/drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"app/src/main/res/drawable/button_register.xml\" value=\"0.3425925925925926\" />\r\n        <entry key=\"app/src/main/res/drawable/event_shape.xml\" value=\"0.31203703703703706\" />\r\n        <entry key=\"app/src/main/res/drawable/ic_baseline_add_24.xml\" value=\"0.3671875\" />\r\n        <entry key=\"app/src/main/res/drawable/ic_baseline_dehaze_24.xml\" value=\"0.3671875\" />\r\n        <entry key=\"app/src/main/res/drawable/ic_frame_4.xml\" value=\"0.3671875\" />\r\n        <entry key=\"app/src/main/res/drawable/ic_lg_ipca.xml\" value=\"0.36153846153846153\" />\r\n        <entry key=\"app/src/main/res/drawable/pop_up_round_corners.xml\" value=\"0.36153846153846153\" />\r\n        <entry key=\"app/src/main/res/drawable/round_corner_drawer.xml\" value=\"0.21354166666666666\" />\r\n        <entry key=\"app/src/main/res/drawable/rounded_shape.xml\" value=\"0.20208333333333334\" />\r\n        <entry key=\"app/src/main/res/layout/activity_drawer.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/layout/activity_drawer_activty.xml\" value=\"0.14402173913043478\" />\r\n        <entry key=\"app/src/main/res/layout/activity_login.xml\" value=\"0.19427083333333334\" />\r\n        <entry key=\"app/src/main/res/layout/activity_search.xml\" value=\"0.32563405797101447\" />\r\n        <entry key=\"app/src/main/res/layout/activity_tab.xml\" value=\"0.33\" />\r\n        <entry key=\"app/src/main/res/layout/activity_welcome.xml\" value=\"0.33\" />\r\n        <entry key=\"app/src/main/res/layout/app_bar_drawer.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/layout/app_bar_main.xml\" value=\"0.1707193515704154\" />\r\n        <entry key=\"app/src/main/res/layout/content_drawer.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/layout/content_main.xml\" value=\"0.32563405797101447\" />\r\n        <entry key=\"app/src/main/res/layout/fragment_gallery.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/layout/fragment_home.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/layout/fragment_official_chats.xml\" value=\"0.32563405797101447\" />\r\n        <entry key=\"app/src/main/res/layout/fragment_tab.xml\" value=\"0.3489583333333333\" />\r\n        <entry key=\"app/src/main/res/layout/nav_header_main.xml\" value=\"0.32563405797101447\" />\r\n        <entry key=\"app/src/main/res/layout/row_chat.xml\" value=\"0.32563405797101447\" />\r\n        <entry key=\"app/src/main/res/menu/activity_drawer.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/menu/drawer.xml\" value=\"0.325\" />\r\n      </map>\r\n    </option>\r\n  </component>\r\n  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_11\" default=\"true\" project-jdk-name=\"11\" project-jdk-type=\"JavaSDK\">\r\n    <output url=\"file://$PROJECT_DIR$/build/classes\" />\r\n  </component>\r\n  <component name=\"ProjectType\">\r\n    <option name=\"id\" value=\"Android\" />\r\n  </component>\r\n</project>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/.idea/misc.xml b/.idea/misc.xml
------ a/.idea/misc.xml	(revision 68db8e92ec156616c8dd39c656747d5b2c7a2133)
---+++ b/.idea/misc.xml	(date 1640260007432)
---@@ -77,6 +77,7 @@
---         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/round_corner_drawer.xml" value="0.33" />
---         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/rounded_shape.xml" value="0.3828125" />
---         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_drawer_activty.xml" value="0.28306159420289856" />
---+        <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_news_web.xml" value="0.2966485507246377" />
---         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/app_bar_main.xml" value="0.28306159420289856" />
---         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/nav_header_main.xml" value="0.28306159420289856" />
---         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/menu/activity_drawer.xml" value="0.36666666666666664" />
-Index: app/src/main/res/values-night/themes.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><resources xmlns:tools=\"http://schemas.android.com/tools\">\r\n    <!-- Base application theme. -->\r\n    <style name=\"Theme.IPCA\" parent=\"Theme.MaterialComponents.DayNight.DarkActionBar\">\r\n        <!-- Primary brand color. -->\r\n        <item name=\"colorPrimary\">@color/purple_200</item>\r\n        <item name=\"colorPrimaryVariant\">@color/purple_700</item>\r\n        <item name=\"colorOnPrimary\">@color/black</item>\r\n        <!-- Secondary brand color. -->\r\n        <item name=\"colorSecondary\">@color/teal_200</item>\r\n        <item name=\"colorSecondaryVariant\">@color/teal_200</item>\r\n        <item name=\"colorOnSecondary\">@color/black</item>\r\n        <!-- Status bar color. -->\r\n        <item name=\"android:statusBarColor\" tools:targetApi=\"l\">?attr/colorPrimaryVariant</item>\r\n        <!-- Customize your theme here. -->\r\n    </style>\r\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/values-night/themes.xml b/app/src/main/res/values-night/themes.xml
---- a/app/src/main/res/values-night/themes.xml	(revision 8b5446601321d1d23325245b63fc13fc85a91fcc)
-+++ b/app/src/main/res/values-night/themes.xml	(date 1641844994202)
-@@ -2,12 +2,12 @@
-     <!-- Base application theme. -->
-     <style name="Theme.IPCA" parent="Theme.MaterialComponents.DayNight.DarkActionBar">
-         <!-- Primary brand color. -->
--        <item name="colorPrimary">@color/purple_200</item>
--        <item name="colorPrimaryVariant">@color/purple_700</item>
-+        <item name="colorPrimary">@color/green_200</item>
-+        <item name="colorPrimaryVariant">@color/green_100</item>
-         <item name="colorOnPrimary">@color/black</item>
-         <!-- Secondary brand color. -->
--        <item name="colorSecondary">@color/teal_200</item>
--        <item name="colorSecondaryVariant">@color/teal_200</item>
-+        <item name="colorSecondary">@color/green_100</item>
-+        <item name="colorSecondaryVariant">@color/green_100</item>
-         <item name="colorOnSecondary">@color/black</item>
-         <!-- Status bar color. -->
-         <item name="android:statusBarColor" tools:targetApi="l">?attr/colorPrimaryVariant</item>
-Index: .idea/deploymentTargetDropDown.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"deploymentTargetDropDown\">\r\n    <targetSelectedWithDropDown>\r\n      <Target>\r\n        <type value=\"QUICK_BOOT_TARGET\" />\r\n        <deviceKey>\r\n          <Key>\r\n            <type value=\"VIRTUAL_DEVICE_PATH\" />\r\n            <value value=\"C:\\Users\\nunoi\\.android\\avd\\Pixel_5_API_30.avd\" />\r\n          </Key>\r\n        </deviceKey>\r\n      </Target>\r\n    </targetSelectedWithDropDown>\r\n    <timeTargetWasSelectedWithDropDown value=\"2022-01-01T23:53:04.443341100Z\" />\r\n  </component>\r\n</project>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/.idea/deploymentTargetDropDown.xml b/.idea/deploymentTargetDropDown.xml
---- a/.idea/deploymentTargetDropDown.xml	(revision 8b5446601321d1d23325245b63fc13fc85a91fcc)
-+++ b/.idea/deploymentTargetDropDown.xml	(date 1641844997658)
-@@ -7,11 +7,11 @@
-         <deviceKey>
-           <Key>
-             <type value="VIRTUAL_DEVICE_PATH" />
--            <value value="C:\Users\nunoi\.android\avd\Pixel_5_API_30.avd" />
-+            <value value="C:\Users\diogo\.android\avd\Pixel_5_R.avd" />
-           </Key>
-         </deviceKey>
-       </Target>
-     </targetSelectedWithDropDown>
--    <timeTargetWasSelectedWithDropDown value="2022-01-01T23:53:04.443341100Z" />
-+    <timeTargetWasSelectedWithDropDown value="2022-01-10T20:01:54.020470300Z" />
-   </component>
- </project>
-\ No newline at end of file
-Index: .idea/misc.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"DesignSurface\">\r\n    <option name=\"filePathToZoomLevelMap\">\r\n      <map>\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/breaktime.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/breaktime_form.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/button_filtro.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/button_green.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/button_register.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/button_week_day.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/chat_photo.xml\" value=\"0.25364583333333335\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/circle.xml\" value=\"0.23802083333333332\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/custom_black_border.xml\" value=\"0.23802083333333332\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/custom_gray_background_outline.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/datetime_selected_item.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/event_shape.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_add_folder.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_add_userdrawer_icons.xml\" value=\"0.25364583333333335\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_arrow_back_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_baseline_arrow_back_ios_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_baseline_arrow_forward_ios_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_contact_icon.xml\" value=\"0.2520833333333333\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_delete.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_documentdrawer_icons.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_file.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_folderdrawer_icons.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_foto_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_homedrawer_icons.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_lg_ipca.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_logo_branco_ipca.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_logout.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_menu_camera.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_menu_gallery.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_menu_slideshow.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_paper_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_plus.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_search_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_swap_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/rounded_dialog.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/side_nav_bar.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_add_event.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_add_people.xml\" value=\"0.24375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_calendar.xml\" value=\"0.36277173913043476\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_chat.xml\" value=\"0.2359375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_chat_files.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_chat_members.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_chat_more.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_contacts.xml\" value=\"0.2359375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_drawer_activty.xml\" value=\"0.2359375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_login.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_news_web.xml\" value=\"0.24375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_profile.xml\" value=\"0.36277173913043476\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_register.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_schedule.xml\" value=\"0.3546195652173913\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_search.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_tab.xml\" value=\"0.2359375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_terms_and_condictions.xml\" value=\"0.21642145230185098\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_welcome.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/app_bar_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/content_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/dialog_add_file.xml\" value=\"0.358695652173913\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/dialog_select_image.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/dialog_select_name.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/fragment_calendar.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/fragment_chats.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/nav_header_main.xml\" value=\"0.358695652173913\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_add_pp.xml\" value=\"0.5\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_chat.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_event.xml\" value=\"0.7456647398843931\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_file.xml\" value=\"0.5\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_message_others.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_message_self.xml\" value=\"0.3546195652173913\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_search.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_subject.xml\" value=\"0.3546195652173913\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_user.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_user_in_chat.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/sample_date_time_picker.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/menu/activity_drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/menu/drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/menu/menu_add.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/menu/menu_chat.xml\" value=\"0.20520833333333333\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/mipmap-anydpi-v26/ic_launcher_round.xml\" value=\"0.25364583333333335\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/chat_message_shape.xml\" value=\"0.29074074074074074\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/chat_photo.xml\" value=\"0.2953703703703704\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/circle.xml\" value=\"0.3101851851851852\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/ic_camera.xml\" value=\"0.22135416666666666\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/ic_upload.xml\" value=\"0.22135416666666666\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/rounded_shape.xml\" value=\"0.3101851851851852\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/user_message_photo.xml\" value=\"0.2953703703703704\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_add_people.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_chat.xml\" value=\"0.25\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_chat_more.xml\" value=\"0.2520833333333333\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_create_chat.xml\" value=\"0.2520833333333333\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_drawer_activty.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_login.xml\" value=\"0.2957427536231884\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_main.xml\" value=\"0.2957427536231884\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_register.xml\" value=\"0.28940217391304346\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/app_bar_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/fragment_chats.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/fragment_home.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_chat.xml\" value=\"0.67\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_message.xml\" value=\"0.28940217391304346\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_message_others.xml\" value=\"0.2694746376811594\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_message_self.xml\" value=\"0.17831813576494426\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_message_system.xml\" value=\"0.26268115942028986\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_pesquisa.xml\" value=\"0.26268115942028986\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/menu/activity_drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/menu/drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/Asus/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_search.xml\" value=\"0.25\" />\r\n        <entry key=\"..\\:/Users/Asus/Documents/GitHub/ipca_plus/app/src/main/res/menu/drawer.xml\" value=\"0.128125\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/ic_menu_slideshow.xml\" value=\"0.22135416666666666\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/round_corner_drawer.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/rounded_shape.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_drawer_activty.xml\" value=\"0.28306159420289856\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_splash_screen.xml\" value=\"0.20520833333333333\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/app_bar_main.xml\" value=\"0.28306159420289856\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/nav_header_main.xml\" value=\"0.28306159420289856\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/menu/activity_drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/menu/drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_chat.xml\" value=\"0.14010416666666667\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_drawer_activty.xml\" value=\"0.13020833333333334\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_tab.xml\" value=\"0.14010416666666667\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/app_bar_main.xml\" value=\"0.13020833333333334\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/content_main.xml\" value=\"0.13020833333333334\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/fragment_calendar.xml\" value=\"0.264\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/fragment_chats.xml\" value=\"0.14010416666666667\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/fragment_slideshow.xml\" value=\"0.14010416666666667\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/nav_header_main.xml\" value=\"0.13020833333333334\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/menu/activity_drawer.xml\" value=\"0.25416666666666665\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/menu/drawer.xml\" value=\"0.25416666666666665\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/drawable/chat_photo.xml\" value=\"0.3769230769230769\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/drawable/gradient_shadow.xml\" value=\"0.3769230769230769\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/drawable/ic_video.xml\" value=\"0.3769230769230769\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/drawable/shadow.xml\" value=\"0.3769230769230769\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_add_event.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_calendar.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_chat.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_contacts.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_drawer_activty.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_profile.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_register.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_schedule.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_search.xml\" value=\"0.5\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_tab.xml\" value=\"0.26766304347826086\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/app_bar_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/content_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/nav_header_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/row_chat.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/row_pesquisa.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/menu/activity_drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/menu/drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"app/src/main/res/drawable/button_register.xml\" value=\"0.3425925925925926\" />\r\n        <entry key=\"app/src/main/res/drawable/event_shape.xml\" value=\"0.31203703703703706\" />\r\n        <entry key=\"app/src/main/res/drawable/ic_baseline_add_24.xml\" value=\"0.3671875\" />\r\n        <entry key=\"app/src/main/res/drawable/ic_baseline_dehaze_24.xml\" value=\"0.3671875\" />\r\n        <entry key=\"app/src/main/res/drawable/ic_frame_4.xml\" value=\"0.3671875\" />\r\n        <entry key=\"app/src/main/res/drawable/ic_lg_ipca.xml\" value=\"0.36153846153846153\" />\r\n        <entry key=\"app/src/main/res/drawable/pop_up_round_corners.xml\" value=\"0.36153846153846153\" />\r\n        <entry key=\"app/src/main/res/drawable/round_corner_drawer.xml\" value=\"0.21354166666666666\" />\r\n        <entry key=\"app/src/main/res/drawable/rounded_shape.xml\" value=\"0.20208333333333334\" />\r\n        <entry key=\"app/src/main/res/layout/activity_chat.xml\" value=\"0.1265625\" />\r\n        <entry key=\"app/src/main/res/layout/activity_drawer.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/layout/activity_drawer_activty.xml\" value=\"0.14402173913043478\" />\r\n        <entry key=\"app/src/main/res/layout/activity_login.xml\" value=\"0.19427083333333334\" />\r\n        <entry key=\"app/src/main/res/layout/activity_search.xml\" value=\"0.32563405797101447\" />\r\n        <entry key=\"app/src/main/res/layout/activity_tab.xml\" value=\"0.33\" />\r\n        <entry key=\"app/src/main/res/layout/activity_welcome.xml\" value=\"0.33\" />\r\n        <entry key=\"app/src/main/res/layout/app_bar_drawer.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/layout/app_bar_main.xml\" value=\"0.1707193515704154\" />\r\n        <entry key=\"app/src/main/res/layout/content_drawer.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/layout/content_main.xml\" value=\"0.32563405797101447\" />\r\n        <entry key=\"app/src/main/res/layout/fragment_gallery.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/layout/fragment_home.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/layout/fragment_official_chats.xml\" value=\"0.32563405797101447\" />\r\n        <entry key=\"app/src/main/res/layout/fragment_tab.xml\" value=\"0.3489583333333333\" />\r\n        <entry key=\"app/src/main/res/layout/nav_header_main.xml\" value=\"0.32563405797101447\" />\r\n        <entry key=\"app/src/main/res/layout/notification.xml\" value=\"0.5352697095435685\" />\r\n        <entry key=\"app/src/main/res/layout/row_chat.xml\" value=\"0.32563405797101447\" />\r\n        <entry key=\"app/src/main/res/layout/row_message_self.xml\" value=\"0.33\" />\r\n        <entry key=\"app/src/main/res/menu/activity_drawer.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/menu/drawer.xml\" value=\"0.325\" />\r\n      </map>\r\n    </option>\r\n  </component>\r\n  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_11\" default=\"true\" project-jdk-name=\"11\" project-jdk-type=\"JavaSDK\">\r\n    <output url=\"file://$PROJECT_DIR$/build/classes\" />\r\n  </component>\r\n  <component name=\"ProjectType\">\r\n    <option name=\"id\" value=\"Android\" />\r\n  </component>\r\n</project>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/.idea/misc.xml b/.idea/misc.xml
---- a/.idea/misc.xml	(revision 8b5446601321d1d23325245b63fc13fc85a91fcc)
-+++ b/.idea/misc.xml	(date 1641903407777)
-@@ -116,6 +116,8 @@
-         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_drawer_activty.xml" value="0.28306159420289856" />
-         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_splash_screen.xml" value="0.20520833333333333" />
-         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/app_bar_main.xml" value="0.28306159420289856" />
-+        <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/dialog_add_file.xml" value="0.36666666666666664" />
-+        <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/dialog_select_image.xml" value="0.36666666666666664" />
-         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/nav_header_main.xml" value="0.28306159420289856" />
-         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/menu/activity_drawer.xml" value="0.36666666666666664" />
-         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/menu/drawer.xml" value="0.36666666666666664" />
-Index: app/src/main/res/values/themes.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><resources xmlns:tools=\"http://schemas.android.com/tools\">\r\n    <!-- Base application theme. -->\r\n    <style name=\"Theme.IPCA\" parent=\"Theme.MaterialComponents.DayNight.DarkActionBar\">\r\n        <!-- Primary brand color. -->\r\n        <item name=\"colorPrimary\">@color/green_200</item>\r\n        <item name=\"colorPrimaryVariant\">@color/green_200</item>\r\n        <item name=\"colorOnPrimary\">@color/white_2</item>\r\n        <!-- Secondary brand color. -->\r\n        <item name=\"colorSecondary\">@color/teal_200</item>\r\n        <item name=\"colorSecondaryVariant\">@color/teal_700</item>\r\n        <item name=\"colorOnSecondary\">@color/black</item>\r\n        <!-- Status bar color. -->\r\n        <item name=\"android:statusBarColor\" tools:targetApi=\"l\">?attr/colorPrimaryVariant</item>\r\n        <!-- Customize your theme here. -->\r\n    </style>\r\n\r\n    <style name=\"MyActionBar\" parent=\"@style/Widget.AppCompat.Light.ActionBar.Solid\">\r\n        <item name=\"android:background\" tools:ignore=\"NewApi\">@android:color/transparent</item>\r\n        <item name=\"background\">@android:color/transparent</item>\r\n        <item name=\"android:textColorHint\">@android:color/white</item>\r\n        <item name=\"android:textSize\">14sp</item>\r\n        <item name=\"android:textColor\">@android:color/white</item>\r\n        <item name=\"android:editTextColor\">@android:color/white</item>\r\n        <item name=\"android:drawableRight\">@drawable/ic_search_24</item>\r\n        <item name=\"android:textAlignment\">textEnd</item>\r\n\r\n    </style>\r\n\r\n    <style name=\"Theme.IPCA.NoActionBar\">\r\n        <item name=\"windowActionBar\">false</item>\r\n        <item name=\"windowNoTitle\">true</item>\r\n    </style>\r\n\r\n    <style name=\"Theme.IPCA.AppBarOverlay\" parent=\"ThemeOverlay.AppCompat.Dark.ActionBar\" />\r\n\r\n    <style name=\"Theme.IPCA.PopupOverlay\" parent=\"ThemeOverlay.AppCompat.Light\" />\r\n\r\n    <style name=\"NewFontStyle\" parent=\"android:Widget.TextView\">\r\n        <item name=\"android:fontFamily\">@font/poppins</item>\r\n    </style>\r\n\r\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/values/themes.xml b/app/src/main/res/values/themes.xml
---- a/app/src/main/res/values/themes.xml	(revision 8b5446601321d1d23325245b63fc13fc85a91fcc)
-+++ b/app/src/main/res/values/themes.xml	(date 1641844994207)
-@@ -6,8 +6,8 @@
-         <item name="colorPrimaryVariant">@color/green_200</item>
-         <item name="colorOnPrimary">@color/white_2</item>
-         <!-- Secondary brand color. -->
--        <item name="colorSecondary">@color/teal_200</item>
--        <item name="colorSecondaryVariant">@color/teal_700</item>
-+        <item name="colorSecondary">@color/green_200</item>
-+        <item name="colorSecondaryVariant">@color/green_100</item>
-         <item name="colorOnSecondary">@color/black</item>
-         <!-- Status bar color. -->
-         <item name="android:statusBarColor" tools:targetApi="l">?attr/colorPrimaryVariant</item>
-Index: app/src/main/java/com/singularity/ipcaplus/cryptography/metaData.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.singularity.ipcaplus.cryptography\r\n\r\nimport android.content.Context\r\nimport android.os.Build\r\nimport android.util.Log\r\nimport androidx.annotation.RequiresApi\r\nimport androidx.security.crypto.EncryptedSharedPreferences\r\nimport androidx.security.crypto.MasterKeys\r\nimport com.google.gson.Gson\r\nimport com.google.gson.GsonBuilder\r\nimport org.bouncycastle.jce.provider.BouncyCastleProvider\r\nimport org.bouncycastle.util.encoders.Base64\r\nimport java.io.UnsupportedEncodingException\r\nimport java.security.InvalidKeyException\r\nimport java.security.NoSuchAlgorithmException\r\nimport java.security.Security\r\nimport java.util.Objects.hash\r\nimport javax.crypto.*\r\nimport javax.crypto.spec.SecretKeySpec\r\n\r\n\r\n\r\n\r\n\r\nfun encryptMeta(strToEncrypt: String, secret_key: String): String? {\r\n    Security.addProvider(BouncyCastleProvider())\r\n    hash(strToEncrypt)\r\n    var keyBytes: ByteArray\r\n\r\n    try {\r\n        keyBytes = secret_key.toByteArray(charset(\"UTF8\"))\r\n        val skey = SecretKeySpec(keyBytes, \"AES\")\r\n        val input = strToEncrypt.toByteArray(charset(\"UTF8\"))\r\n\r\n        synchronized(Cipher::class.java) {\r\n            val cipher = Cipher.getInstance(\"AES/ECB/PKCS7Padding\")\r\n            cipher.init(Cipher.ENCRYPT_MODE, skey)\r\n\r\n            val cipherText = ByteArray(cipher.getOutputSize(input.size))\r\n            var ctLength = cipher.update(\r\n                input, 0, input.size,\r\n                cipherText, 0\r\n            )\r\n            ctLength += cipher.doFinal(cipherText, ctLength)\r\n            return String(\r\n                Base64.encode(cipherText)\r\n            )\r\n        }\r\n    } catch (uee: UnsupportedEncodingException) {\r\n        uee.printStackTrace()\r\n    } catch (ibse: IllegalBlockSizeException) {\r\n        ibse.printStackTrace()\r\n    } catch (bpe: BadPaddingException) {\r\n        bpe.printStackTrace()\r\n    } catch (ike: InvalidKeyException) {\r\n        ike.printStackTrace()\r\n    } catch (nspe: NoSuchPaddingException) {\r\n        nspe.printStackTrace()\r\n    } catch (nsae: NoSuchAlgorithmException) {\r\n        nsae.printStackTrace()\r\n    } catch (e: ShortBufferException) {\r\n        e.printStackTrace()\r\n    }\r\n\r\n    return null\r\n}\r\n\r\nfun decryptWithAESmeta(key: String, strToDecrypt: String?): String? {\r\n    Security.addProvider(BouncyCastleProvider())\r\n    var keyBytes: ByteArray\r\n\r\n    try {\r\n        keyBytes = key.toByteArray(charset(\"UTF8\"))\r\n        val skey = SecretKeySpec(keyBytes, \"AES\")\r\n        val input = org.bouncycastle.util.encoders.Base64\r\n            .decode(strToDecrypt?.trim { it <= ' ' }?.toByteArray(charset(\"UTF8\")))\r\n\r\n        synchronized(Cipher::class.java) {\r\n            val cipher = Cipher.getInstance(\"AES/ECB/PKCS7Padding\")\r\n            cipher.init(Cipher.DECRYPT_MODE, skey)\r\n\r\n            val plainText = ByteArray(cipher.getOutputSize(input.size))\r\n            var ptLength = cipher.update(input, 0, input.size, plainText, 0)\r\n            ptLength += cipher.doFinal(plainText, ptLength)\r\n            val decryptedString = String(plainText)\r\n            return decryptedString.trim { it <= ' ' }\r\n        }\r\n    } catch (uee: UnsupportedEncodingException) {\r\n        uee.printStackTrace()\r\n    } catch (ibse: IllegalBlockSizeException) {\r\n        ibse.printStackTrace()\r\n    } catch (bpe: BadPaddingException) {\r\n        bpe.printStackTrace()\r\n    } catch (ike: InvalidKeyException) {\r\n        ike.printStackTrace()\r\n    } catch (nspe: NoSuchPaddingException) {\r\n        nspe.printStackTrace()\r\n    } catch (nsae: NoSuchAlgorithmException) {\r\n        nsae.printStackTrace()\r\n    } catch (e: ShortBufferException) {\r\n        e.printStackTrace()\r\n    }\r\n\r\n    return null\r\n}\r\n\r\nfun metaGenrateKey(): String {\r\n    //val secretKey: String = \"662ede816988e58fb6d057d9d85605e0\"\r\n    val keygen = (\"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"\r\n            + \"0123456789\"\r\n            + \"abcdefghijklmnopqrstuvxyz\")\r\n\r\n    val n = 32\r\n\r\n    // create StringBuffer size of keygen\r\n    val secretKey = StringBuilder(n)\r\n    for (i in 0 until n) {\r\n\r\n        // generate a random number between\r\n        // 0 to keygen variable length\r\n        val index = (keygen.length\r\n                * Math.random()).toInt()\r\n\r\n        // add Character one by one in end of secretKey\r\n        secretKey.append(keygen[index])\r\n\r\n    }\r\n    println(secretKey)\r\n    return secretKey.toString()\r\n}\r\n\r\nfun metaBlock(message: String){\r\n    //val secretKey: String = \"662ede816988e58fb6d057d9d85605e0\"\r\n    val keygen = metaGenrateKey()\r\n\r\n    var meta = encryptMeta(message, keygen)\r\n    println(meta)\r\n\r\n    val message_decripted = decryptWithAESmeta(keygen, meta)\r\n    println(message_decripted)\r\n}\r\n\r\n@RequiresApi(Build.VERSION_CODES.M)\r\nfun saveKeygenOx(context : Context, chatUid : String, keygen: String){\r\n\r\n    val keyGenParameterSpec = MasterKeys.AES256_GCM_SPEC\r\n    val masterKeyAlias = MasterKeys.getOrCreate(keyGenParameterSpec)\r\n    val sharedPreferences = EncryptedSharedPreferences.create(\r\n        \"meta_shared_preferences\",\r\n        masterKeyAlias,\r\n        context,\r\n        EncryptedSharedPreferences.PrefKeyEncryptionScheme.AES256_SIV,\r\n        EncryptedSharedPreferences.PrefValueEncryptionScheme.AES256_GCM\r\n    )\r\n\r\n    // storing a value\r\n    sharedPreferences\r\n        .edit()\r\n        .putString(chatUid, keygen)\r\n        .apply()\r\n}\r\n\r\n@RequiresApi(Build.VERSION_CODES.M)\r\nfun getMetaOx(context: Context, chatUid: String): String? {\r\n\r\n    val keyGenParameterSpec = MasterKeys.AES256_GCM_SPEC\r\n    val masterKeyAlias = MasterKeys.getOrCreate(keyGenParameterSpec)\r\n    val sharedPreferences = EncryptedSharedPreferences.create(\r\n        \"meta_shared_preferences\",\r\n        masterKeyAlias,\r\n        context,\r\n        EncryptedSharedPreferences.PrefKeyEncryptionScheme.AES256_SIV,\r\n        EncryptedSharedPreferences.PrefValueEncryptionScheme.AES256_GCM\r\n    )\r\n\r\n    // reading a value\r\n    println(sharedPreferences.getString(chatUid, \"\"))\r\n    return sharedPreferences.getString(chatUid, \"\") // -> \"some_data\"\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/singularity/ipcaplus/cryptography/metaData.kt b/app/src/main/java/com/singularity/ipcaplus/cryptography/metaData.kt
---- a/app/src/main/java/com/singularity/ipcaplus/cryptography/metaData.kt	(revision 8b5446601321d1d23325245b63fc13fc85a91fcc)
-+++ b/app/src/main/java/com/singularity/ipcaplus/cryptography/metaData.kt	(date 1641844830400)
-@@ -13,9 +13,11 @@
- import java.io.UnsupportedEncodingException
- import java.security.InvalidKeyException
- import java.security.NoSuchAlgorithmException
-+import java.security.SecureRandom
- import java.security.Security
- import java.util.Objects.hash
- import javax.crypto.*
-+import javax.crypto.spec.IvParameterSpec
- import javax.crypto.spec.SecretKeySpec
- 
- 
-@@ -26,6 +28,11 @@
-     Security.addProvider(BouncyCastleProvider())
-     hash(strToEncrypt)
-     var keyBytes: ByteArray
-+    //val initVector = generateRandomIV()
-+    val initVector = "7c5afb00aaecb1a1"
-+    val iv = IvParameterSpec(initVector.toByteArray(charset("UTF-8")))
-+    println("AVEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE $initVector")
-+
- 
-     try {
-         keyBytes = secret_key.toByteArray(charset("UTF8"))
-@@ -33,8 +40,8 @@
-         val input = strToEncrypt.toByteArray(charset("UTF8"))
- 
-         synchronized(Cipher::class.java) {
--            val cipher = Cipher.getInstance("AES/ECB/PKCS7Padding")
--            cipher.init(Cipher.ENCRYPT_MODE, skey)
-+            val cipher = Cipher.getInstance("AES/CBC/PKCS7Padding")
-+            cipher.init(Cipher.ENCRYPT_MODE, skey, iv)
- 
-             val cipherText = ByteArray(cipher.getOutputSize(input.size))
-             var ctLength = cipher.update(
-@@ -68,16 +75,18 @@
- fun decryptWithAESmeta(key: String, strToDecrypt: String?): String? {
-     Security.addProvider(BouncyCastleProvider())
-     var keyBytes: ByteArray
-+    val initVector = "7c5afb00aaecb1a1"
- 
-     try {
-+        val iv = IvParameterSpec(initVector.toByteArray(charset("UTF-8")))
-         keyBytes = key.toByteArray(charset("UTF8"))
-         val skey = SecretKeySpec(keyBytes, "AES")
-         val input = org.bouncycastle.util.encoders.Base64
-             .decode(strToDecrypt?.trim { it <= ' ' }?.toByteArray(charset("UTF8")))
- 
-         synchronized(Cipher::class.java) {
--            val cipher = Cipher.getInstance("AES/ECB/PKCS7Padding")
--            cipher.init(Cipher.DECRYPT_MODE, skey)
-+            val cipher = Cipher.getInstance("AES/CBC/PKCS7Padding")
-+            cipher.init(Cipher.DECRYPT_MODE, skey, iv)
- 
-             val plainText = ByteArray(cipher.getOutputSize(input.size))
-             var ptLength = cipher.update(input, 0, input.size, plainText, 0)
-@@ -176,4 +185,19 @@
-     // reading a value
-     println(sharedPreferences.getString(chatUid, ""))
-     return sharedPreferences.getString(chatUid, "") // -> "some_data"
-+}
-+
-+fun generateRandomIV(): String {
-+    val ranGen = SecureRandom()
-+    val aesKey = ByteArray(16)
-+    ranGen.nextBytes(aesKey)
-+    val result = StringBuffer()
-+    for (b in aesKey) {
-+        result.append(String.format("%02x", b))
-+    }
-+    return if (16 > result.toString().length) {
-+        result.toString()
-+    } else {
-+        result.toString().substring(0, 16)
-+    }
- }
-\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_1_10_2022_8_00_PM__Default_Changelist_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_1_10_2022_8_00_PM__Default_Changelist_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_1_10_2022_8_00_PM__Default_Changelist_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_1_10_2022_8_00_PM__Default_Changelist_.xml	(revision 8e96e253b18fde6ba59a95a8201590b51e0a7e05)
+++ /dev/null	(revision 8e96e253b18fde6ba59a95a8201590b51e0a7e05)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_1_10_2022_8_00_PM_[Default_Changelist]" date="1641844830632" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_1_10_2022_8_00_PM_[Default_Changelist]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 1/10/2022 8:00 PM [Default Changelist]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_1_10_2022_8_00_PM_[Default_Changelist]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_1_10_2022_8_00_PM_[Default_Changelist]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_1_10_2022_8_00_PM_[Default_Changelist]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_1_10_2022_8_00_PM_[Default_Changelist]/shelved.patch	(revision 8e96e253b18fde6ba59a95a8201590b51e0a7e05)
+++ /dev/null	(revision 8e96e253b18fde6ba59a95a8201590b51e0a7e05)
@@ -1,1762 +0,0 @@
-Index: app/src/main/java/com/singularity/ipcaplus/chat/ChatActivity.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.singularity.ipcaplus.chat\r\n\r\nimport android.content.ContentValues.TAG\r\nimport android.content.Intent\r\nimport android.os.Build\r\nimport android.os.Bundle\r\nimport android.util.Log\r\nimport android.view.*\r\nimport android.widget.ImageView\r\nimport android.widget.TextView\r\nimport androidx.annotation.RequiresApi\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport androidx.core.view.isVisible\r\nimport androidx.recyclerview.widget.DefaultItemAnimator\r\nimport androidx.recyclerview.widget.LinearLayoutManager\r\nimport androidx.recyclerview.widget.RecyclerView\r\nimport com.google.firebase.Timestamp\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.firestore.Query\r\nimport com.google.firebase.firestore.ktx.firestore\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.singularity.ipcaplus.drawer.CalendarActivity\r\nimport com.singularity.ipcaplus.R\r\nimport com.singularity.ipcaplus.utils.Utilis\r\nimport com.singularity.ipcaplus.cryptography.decryptWithAESmeta\r\nimport com.singularity.ipcaplus.cryptography.encryptMeta\r\nimport com.singularity.ipcaplus.cryptography.getMetaOx\r\nimport com.singularity.ipcaplus.databinding.ActivityChatBinding\r\nimport com.singularity.ipcaplus.models.Chat\r\nimport com.singularity.ipcaplus.models.Message\r\nimport com.singularity.ipcaplus.utils.Backend\r\nimport com.singularity.ipcaplus.utils.Backend.createJsonArrayString\r\nimport kotlinx.coroutines.*\r\nimport org.json.JSONArray\r\nimport org.json.JSONObject\r\nimport java.io.BufferedOutputStream\r\nimport java.io.BufferedWriter\r\nimport java.io.OutputStream\r\nimport java.io.OutputStreamWriter\r\nimport java.net.URL\r\nimport java.time.LocalDateTime\r\nimport java.time.format.DateTimeFormatter\r\nimport javax.net.ssl.HttpsURLConnection\r\n\r\nclass ChatActivity : AppCompatActivity() {\r\n\r\n    var messages = arrayListOf<Message>()\r\n    var currentUserIsAdmin = false\r\n    private lateinit var binding: ActivityChatBinding\r\n    private lateinit var chat_id : String\r\n    var tokens_adress = arrayListOf<String>()\r\n    var chat_user_uids = arrayListOf<String>()\r\n    private var mAdapter: RecyclerView.Adapter<*>? = null\r\n    private var mLayoutManager: LinearLayoutManager? = null\r\n\r\n    val db = Firebase.firestore\r\n    @RequiresApi(Build.VERSION_CODES.O)\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_chat)\r\n\r\n        binding = ActivityChatBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        // Variables\r\n        chat_id = intent.getStringExtra(\"chat_id\").toString()\r\n        val current = LocalDateTime.now()\r\n\r\n        val formatter = DateTimeFormatter.BASIC_ISO_DATE\r\n        val formatted = current.format(formatter)\r\n\r\n        // Check if user is admin\r\n        Backend.getChatAdminIds(chat_id) {\r\n            val currentUser = Firebase.auth.currentUser!!.uid\r\n            for (admin in it) {\r\n                if (admin == currentUser)\r\n                    currentUserIsAdmin = true\r\n            }\r\n        }\r\n\r\n        // Get all members id of chat\r\n        Backend.getChatUsersUids(chat_id){\r\n            chat_user_uids.clear()\r\n            chat_user_uids.addAll(it)\r\n\r\n            for (userId in chat_user_uids){\r\n                // Getting all of tokens of  profile associated devices\r\n                Backend.getAllTokens(userId) {\r\n                    if (tokens_adress.isEmpty()){\r\n                        tokens_adress.clear()\r\n                    }\r\n                    tokens_adress.addAll(it)\r\n\r\n                    GlobalScope.launch {\r\n                        withContext(Dispatchers.IO){\r\n                            createNotificationGroup(\"otorrinolaringoloigista\", createJsonArrayString(tokens_adress))\r\n                        }\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        println(\"Current Date is: $formatted\")\r\n\r\n        // Send Message\r\n        binding.fabSend.setOnClickListener {\r\n            if(!binding.editTextMessage.text.isNullOrBlank()) {\r\n                // get data of ecripted shared preferences (\"chatuid\" -> \"key\")\r\n                val keygen = getMetaOx(this, chat_id)\r\n                // Build encryptation data of message send by the user\r\n                var meta = encryptMeta( binding.editTextMessage.text.toString(), keygen.toString())\r\n\r\n                val message = Message(\r\n                    Firebase.auth.currentUser!!.uid,\r\n                    meta.toString(),\r\n                    Timestamp.now(),\r\n                    \"\"\r\n\r\n                )\r\n                db.collection(\"chat\").document(\"$chat_id\").collection(\"message\")\r\n                    .add(message.toHash())\r\n                    .addOnSuccessListener { documentReference ->\r\n\r\n                        GlobalScope.launch {\r\n                            withContext(Dispatchers.IO){\r\n                                //APA91bEKDInIYA242YofpahBmhB57pEI4gNT63DJJenWCccJGqeSYrWzj0BSruX49DhVp2vGSY5xJ2fEJk2vhtoraT3_bbjEKw4Nx3eJKj7tttVRPjQs0Uc_OPkrcj4twR70H5tAilnY\r\n                                sendNotificationToGroup( Firebase.auth.currentUser!!.uid, \"Depois temos de mudar\", \"APA91bHFEOWkBe0cf6ZBdBqDiZ1WzYf--PmimY3tWzDlhAPWZ3UL1eSCSuO7nVt5k3i-2FNg6U5d6NoR767JXg9W_NT9lo4u3kiuT46w79LXjcK63dXUzyzIZEzac9olNNb2_siLHA-K\")\r\n                            }\r\n                        }\r\n                        Log.d(TAG, \"DocumentSnapshot added with ID: ${documentReference.id}\")\r\n\r\n\r\n                    }\r\n                    .addOnFailureListener { e ->\r\n                        Log.w(TAG, \"Error adding document\", e)\r\n                    }\r\n                binding.editTextMessage.text.clear()\r\n\r\n            }\r\n        }\r\n\r\n        // Show Messages\r\n        db.collection(\"chat\").document(\"$chat_id\").collection(\"message\").orderBy(\"time\", Query.Direction.DESCENDING)\r\n            .addSnapshotListener { documents, e ->\r\n\r\n                documents?.let {\r\n                    messages.clear()\r\n                    for (document in it) {\r\n                        Log.d(TAG, \"${document.id} => ${document.data}\")\r\n                        val message = Message.fromHash(document)\r\n                        messages.add(message)\r\n\r\n                    }\r\n                    mAdapter?.notifyDataSetChanged()\r\n                }\r\n\r\n            }\r\n\r\n        // Recycler View Messages\r\n        mLayoutManager = LinearLayoutManager(this, LinearLayoutManager.VERTICAL, false)\r\n        binding.recycleViewChat.layoutManager = mLayoutManager\r\n        mAdapter = MessageAdapter()\r\n        binding.recycleViewChat.itemAnimator = DefaultItemAnimator()\r\n        binding.recycleViewChat.adapter = mAdapter\r\n\r\n        mLayoutManager!!.reverseLayout = true\r\n\r\n    }\r\n\r\n    /*\r\n       This function create the action bar above the activity\r\n    */\r\n    override fun onCreateOptionsMenu(menu: Menu): Boolean {\r\n        val inflater: MenuInflater = menuInflater\r\n        inflater.inflate(R.menu.menu_chat, menu)\r\n\r\n        db.collection(\"chat\")\r\n            .addSnapshotListener { documents, e ->\r\n                documents?.let {\r\n                    for (document in it) {\r\n                        if(document.id == chat_id) {\r\n                            val chat = Chat.fromHash(document)\r\n                            supportActionBar?.title = chat.name\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        supportActionBar?.setDisplayHomeAsUpEnabled(true)\r\n        supportActionBar?.setHomeAsUpIndicator(R.drawable.ic_arrow_back_24)\r\n\r\n\r\n        return true\r\n    }\r\n\r\n\r\n    /*\r\n        This function define the events of the action bar buttons\r\n     */\r\n    override fun onOptionsItemSelected(item: MenuItem): Boolean {\r\n        super.onOptionsItemSelected(item)\r\n\r\n        when (item.itemId){\r\n            R.id.calendario -> {\r\n                val intent = Intent(this, CalendarActivity::class.java)\r\n                intent.putExtra(\"chat_id\", chat_id)\r\n                intent.putExtra(\"is_admin\", currentUserIsAdmin)\r\n                startActivity(intent)\r\n                return true\r\n            }\r\n            R.id.chatMore -> {\r\n                val intent = Intent(this, ChatMoreActivity::class.java)\r\n                intent.putExtra(\"chat_id\", chat_id)\r\n                println(\"3------------------------------ \" + currentUserIsAdmin)\r\n                intent.putExtra(\"is_admin\", currentUserIsAdmin)\r\n                intent.putExtra(\"chat_name\", supportActionBar?.title)\r\n                startActivity(intent)\r\n                return true\r\n            }\r\n        }\r\n\r\n        return false\r\n    }\r\n\r\n\r\n    // When the support action bar back button is pressed, the app will go back to the previous activity\r\n    override fun onSupportNavigateUp(): Boolean {\r\n        onBackPressed()\r\n        return true\r\n    }\r\n\r\n\r\n    inner class MessageAdapter : RecyclerView.Adapter<MessageAdapter.ViewHolder>() {\r\n\r\n        inner class ViewHolder(val v: View) : RecyclerView.ViewHolder(v)\r\n\r\n        var otherUser = false\r\n\r\n        override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {\r\n            if(viewType == 1) {\r\n                otherUser = false\r\n                return ViewHolder(\r\n                    LayoutInflater.from(parent.context).inflate(R.layout.row_message_self, parent, false))\r\n            } else if (viewType == 2){\r\n                return ViewHolder(\r\n                    LayoutInflater.from(parent.context).inflate(R.layout.row_message_system, parent, false))\r\n            } else {\r\n                otherUser = true\r\n                return ViewHolder(\r\n                    LayoutInflater.from(parent.context).inflate(R.layout.row_message_others, parent, false))\r\n            }\r\n\r\n        }\r\n\r\n        @RequiresApi(Build.VERSION_CODES.M)\r\n        override fun onBindViewHolder(holder: ViewHolder, position: Int) {\r\n\r\n\r\n            holder.v.apply {\r\n\r\n                val textViewMessage = findViewById<TextView>(R.id.textViewMessage)\r\n                val timeLastMessage = findViewById<TextView?>(R.id.timeLastMessage)\r\n\r\n\r\n                timeLastMessage?.isVisible = false\r\n                val keygen = getMetaOx(context, chat_id)\r\n                print( getMetaOx(context, chat_id)).toString()\r\n                val message_decripted = decryptWithAESmeta(keygen.toString(), messages[position].message)\r\n                textViewMessage.text = message_decripted\r\n                println(message_decripted)\r\n                if(position == messages.size - 1) {\r\n                    val data = Utilis.getDate(\r\n                        messages[position].time.seconds * 1000,\r\n                        \"yyyy-MM-dd'T'HH:mm:ss.SSS\"\r\n                    )\r\n                    timeLastMessage.isVisible = true\r\n                    timeLastMessage.text = Utilis.getHours(data) + \":\" + Utilis.getMinutes(data)\r\n                }\r\n\r\n                if (otherUser) {\r\n                    val imageViewUser = findViewById<ImageView?>(R.id.imageViewUser)\r\n                    if (imageViewUser != null) {\r\n                        Utilis.getFile(context, \"profilePictures/${messages[position].user}.png\", \"png\") { bitmap ->\r\n                            imageViewUser.setImageBitmap(bitmap)\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        override fun getItemViewType(position: Int) : Int {\r\n            if (messages[position].user == Firebase.auth.currentUser!!.uid) {\r\n                return 1\r\n            } else if (messages[position].user == \"system\"){\r\n                return 2\r\n            } else {\r\n                return 0\r\n            }\r\n        }\r\n\r\n        override fun getItemCount(): Int {\r\n            return messages.size\r\n        }\r\n\r\n\r\n    }\r\n\r\n    private suspend fun  createNotificationGroup(notificationKeyName : String, registrationIds : JSONArray)  {\r\n\r\n        try {\r\n\r\n            Log.d(\"json\", registrationIds.toString())\r\n\r\n            //The url of the API i want to access (Firebase Cloud Messaging)\r\n            val endPoint = URL(\"https://fcm.googleapis.com/fcm/notification\")\r\n\r\n            //Establish a connection to fcm (Firebase Cloud Messaging) so i can send a push notification to a specific topic\r\n            val httpsURLConnection: HttpsURLConnection =\r\n                endPoint.openConnection() as HttpsURLConnection\r\n\r\n            //Here i configure the connection to fcm\r\n            //The time available to read from the input stream when the connection is established\r\n            httpsURLConnection.readTimeout = 10000\r\n            //The time available to connect to the url\r\n            httpsURLConnection.connectTimeout = 15000\r\n            //Defining the type of request to be made to the fcm\r\n            httpsURLConnection.requestMethod = \"POST\"\r\n            //Defining that the url connection can be used to send and receive data\r\n            httpsURLConnection.doInput = true\r\n            httpsURLConnection.doOutput = true\r\n\r\n            //Here i give my server key so i can make a request to fcm (Firebase Cloud Messaging) of my application (FirebaseDemo)\r\n            //and i define as well the type of content that i will be sending (json object)\r\n            httpsURLConnection.setRequestProperty(\"Content-Type\", \"application/json\")\r\n            val project_key = \"AAAAMMR-Gaw:APA91bFeijRa909_QEdEFsQeDSaJZRYD7rOk8B8Bc2QiYcGoyLG1xqqpZLkOJXmZrG0FbScojvqBCsweSEWDrMLM6kr67boS-BVB2oy7fL6Zn1N9ICVk6efGniauDa3z8eaOb1TENmEs\"\r\n            val senderId = \"209455028652\"\r\n            httpsURLConnection.setRequestProperty(\"authorization\", \"key=$project_key\")\r\n            httpsURLConnection.setRequestProperty(\"project_id\", senderId)\r\n\r\n            val json = JSONObject()\r\n\r\n            //Here i need to verify if the chat has already been created\r\n            //----------------------------------------------------------\r\n\r\n            //Here i define the name of the group \"chatName\" and\r\n            //the fcm tokens of the users that are going to be in the group \"registrationIds\"\r\n            json.put(\"operation\", \"create\")\r\n            // GROUP NAME\r\n            json.put(\"notification_key_name\", notificationKeyName)\r\n            // TOKENS OF FCM PROFILES LIST\r\n            json.put(\"registration_ids\", registrationIds)\r\n\r\n            //json.put(\"notification_key_name\", \"AM_7\")\r\n\r\n            val outputStream: OutputStream =\r\n                BufferedOutputStream(httpsURLConnection.outputStream)\r\n            val writer = BufferedWriter(OutputStreamWriter(outputStream, \"utf-8\"))\r\n\r\n            //here i write the body of the post request and then i send the request (flush)\r\n            //then i close the post request\r\n            writer.write(json.toString())\r\n            writer.flush()\r\n            writer.close()\r\n\r\n            outputStream.close()\r\n\r\n            //The response code and message of the post requests\r\n            val responseCode: Int = httpsURLConnection.responseCode\r\n            val responseMessage = httpsURLConnection.responseMessage\r\n\r\n            Log.d(TAG, \"$responseCode $responseMessage\")\r\n\r\n\r\n            // Check if the connection is successful\r\n            if (responseCode in 400..499) {\r\n                httpsURLConnection.errorStream\r\n            } else {\r\n                httpsURLConnection.inputStream\r\n            }\r\n\r\n            if (responseCode == 200) {\r\n                Log.e(TAG, \"Group Created!!\")\r\n\r\n                val response = httpsURLConnection.inputStream.bufferedReader()\r\n                    .use { it.readText() }  // defaults to UTF-8\r\n                withContext(Dispatchers.Main) {\r\n                    // Convert raw JSON to pretty JSON using GSON library\r\n\r\n                    //Here i get the notification_key that has been defined to the group that got created\r\n                    val jsonObject  = JSONObject(response)\r\n                    val notifKey = jsonObject.getString(\"notification_key\")\r\n                    println(\"NotifKey:\")\r\n                    println(notifKey)\r\n                }\r\n            } else {\r\n                Log.e(TAG, \"Error it didn´t work\")\r\n            }\r\n\r\n            //Here i close the connection to the endPoint\r\n            httpsURLConnection.disconnect()\r\n\r\n\r\n        } catch (e: Exception) {\r\n            e.printStackTrace()\r\n        }\r\n    }\r\n\r\n    //This function sends push notifications to devices that are subscribed to a specific topic\r\n    private suspend fun sendNotificationToGroup(title: String, message: String, notificationKey : String) {\r\n\r\n        delay(1500)\r\n\r\n        try {\r\n\r\n            //The url of the API i want to access (Firebase Cloud Messaging)\r\n            val url = URL(\"https://fcm.googleapis.com/fcm/send\")\r\n\r\n            //Establish a connection to fcm (Firebase Cloud Messaging) so i can send a push notification to a specific topic\r\n            val httpsURLConnection: HttpsURLConnection =\r\n                url.openConnection() as HttpsURLConnection\r\n\r\n            //Here i configure the connection to fcm\r\n            //The time available to read from the input stream when the connection is established\r\n            httpsURLConnection.readTimeout = 10000\r\n            //The time available to connect to the url\r\n            httpsURLConnection.connectTimeout = 15000\r\n            //Defining the type of request to be made to the fcm\r\n            httpsURLConnection.requestMethod = \"POST\"\r\n            //Defining that the url connection can be used to send and receive data\r\n            httpsURLConnection.doInput = true\r\n            httpsURLConnection.doOutput = true\r\n\r\n            //Here i give my server key so i can make a request to fcm (Firebase Cloud Messaging) of my application (FirebaseDemo)\r\n            //and i define as well the type of content that i will be sending (json)\r\n            val project_key = \"AAAAMMR-Gaw:APA91bFeijRa909_QEdEFsQeDSaJZRYD7rOk8B8Bc2QiYcGoyLG1xqqpZLkOJXmZrG0FbScojvqBCsweSEWDrMLM6kr67boS-BVB2oy7fL6Zn1N9ICVk6efGniauDa3z8eaOb1TENmEs\"\r\n            httpsURLConnection.setRequestProperty(\"authorization\", \"key=$project_key\")\r\n            httpsURLConnection.setRequestProperty(\"Content-Type\", \"application/json\")\r\n\r\n            val body = JSONObject()\r\n            val data = JSONObject()\r\n\r\n            data.put(\"title\", title)\r\n            data.put(\"content\", message)\r\n            //Here i define the Activity in witch i want the user to navigate when they click the notification\r\n            data.put(\"click_action\", \".LoginActivity\")\r\n            //data.put(\"chat_id\", \"S77po7vNGjtKja2Rinyb\")\r\n\r\n            //val condition = \"'$TOPIC1' in topics && '$TOPIC2' in topics && '$TOPIC3' in topics\"\r\n            //body.put(\"condition\", condition)\r\n\r\n            //here i define the body of the post request\r\n            body.put(\"data\", data)\r\n            //Here i define the group via notification key in which i want to send the notification/message\r\n            body.put(\"to\", notificationKey)\r\n\r\n            val outputStream: OutputStream =\r\n                BufferedOutputStream(httpsURLConnection.outputStream)\r\n            val writer = BufferedWriter(OutputStreamWriter(outputStream, \"utf-8\"))\r\n\r\n            //here i write the body of the post request and then i send the request\r\n            //then i close the post request\r\n            writer.write(body.toString())\r\n            writer.flush()\r\n            writer.close()\r\n\r\n            outputStream.close()\r\n\r\n            //The response code and message of the post requests\r\n            val responseCode: Int = httpsURLConnection.responseCode\r\n            val responseMessage: String = httpsURLConnection.responseMessage\r\n\r\n\r\n            Log.d(TAG, \"Response from sendMes: $responseCode $responseMessage\")\r\n\r\n\r\n            // Check if the connection is successful or not\r\n            if (responseCode in 400..499) {\r\n                httpsURLConnection.errorStream\r\n            } else {\r\n                httpsURLConnection.inputStream\r\n            }\r\n            if (responseCode == 200) {\r\n                Log.e(\r\n                    TAG,\r\n                    \"Notification Sent \\n Title: $title \\n Body: $message\"\r\n                )\r\n            } else {\r\n                Log.e(TAG, \"Notification Error\")\r\n            }\r\n\r\n            httpsURLConnection.disconnect()\r\n\r\n        } catch (e: Exception) {\r\n            e.printStackTrace()\r\n        }\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/singularity/ipcaplus/chat/ChatActivity.kt b/app/src/main/java/com/singularity/ipcaplus/chat/ChatActivity.kt
---- a/app/src/main/java/com/singularity/ipcaplus/chat/ChatActivity.kt	(revision 61aecb98de8cc827aadb6472252112d5a0bddc54)
-+++ b/app/src/main/java/com/singularity/ipcaplus/chat/ChatActivity.kt	(date 1641776094519)
-@@ -93,7 +93,7 @@
- 
-                     GlobalScope.launch {
-                         withContext(Dispatchers.IO){
--                            createNotificationGroup("otorrinolaringoloigista", createJsonArrayString(tokens_adress))
-+                            createNotificationGroup("anotherone1", createJsonArrayString(tokens_adress))
-                         }
-                     }
- 
-@@ -127,7 +127,7 @@
-                         GlobalScope.launch {
-                             withContext(Dispatchers.IO){
-                                 //APA91bEKDInIYA242YofpahBmhB57pEI4gNT63DJJenWCccJGqeSYrWzj0BSruX49DhVp2vGSY5xJ2fEJk2vhtoraT3_bbjEKw4Nx3eJKj7tttVRPjQs0Uc_OPkrcj4twR70H5tAilnY
--                                sendNotificationToGroup( Firebase.auth.currentUser!!.uid, "Depois temos de mudar", "APA91bHFEOWkBe0cf6ZBdBqDiZ1WzYf--PmimY3tWzDlhAPWZ3UL1eSCSuO7nVt5k3i-2FNg6U5d6NoR767JXg9W_NT9lo4u3kiuT46w79LXjcK63dXUzyzIZEzac9olNNb2_siLHA-K")
-+                                sendNotificationToGroup( Firebase.auth.currentUser!!.uid, "teste", "APA91bHozkJ0xzMA-iqreZpnMCE5MRlnbEd7Fl_lUMoGYkR_yRJg7ZQrRcmw_Q6mFAfAYqkm8zK_5I4K-u9r7AB_Yz5xyHD5oiOdWojnKYzTVLwp6ax_h3M")
-                             }
-                         }
-                         Log.d(TAG, "DocumentSnapshot added with ID: ${documentReference.id}")
-Index: app/src/main/java/com/singularity/ipcaplus/cryptography/metaData.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.singularity.ipcaplus.cryptography\r\n\r\nimport android.content.Context\r\nimport android.os.Build\r\nimport android.util.Log\r\nimport androidx.annotation.RequiresApi\r\nimport androidx.security.crypto.EncryptedSharedPreferences\r\nimport androidx.security.crypto.MasterKeys\r\nimport com.google.gson.Gson\r\nimport com.google.gson.GsonBuilder\r\nimport org.bouncycastle.jce.provider.BouncyCastleProvider\r\nimport org.bouncycastle.util.encoders.Base64\r\nimport java.io.UnsupportedEncodingException\r\nimport java.security.InvalidKeyException\r\nimport java.security.NoSuchAlgorithmException\r\nimport java.security.Security\r\nimport java.util.Objects.hash\r\nimport javax.crypto.*\r\nimport javax.crypto.spec.SecretKeySpec\r\n\r\n\r\n\r\n\r\n\r\nfun encryptMeta(strToEncrypt: String, secret_key: String): String? {\r\n    Security.addProvider(BouncyCastleProvider())\r\n    hash(strToEncrypt)\r\n    var keyBytes: ByteArray\r\n\r\n    try {\r\n        keyBytes = secret_key.toByteArray(charset(\"UTF8\"))\r\n        val skey = SecretKeySpec(keyBytes, \"AES\")\r\n        val input = strToEncrypt.toByteArray(charset(\"UTF8\"))\r\n\r\n        synchronized(Cipher::class.java) {\r\n            val cipher = Cipher.getInstance(\"AES/ECB/PKCS7Padding\")\r\n            cipher.init(Cipher.ENCRYPT_MODE, skey)\r\n\r\n            val cipherText = ByteArray(cipher.getOutputSize(input.size))\r\n            var ctLength = cipher.update(\r\n                input, 0, input.size,\r\n                cipherText, 0\r\n            )\r\n            ctLength += cipher.doFinal(cipherText, ctLength)\r\n            return String(\r\n                Base64.encode(cipherText)\r\n            )\r\n        }\r\n    } catch (uee: UnsupportedEncodingException) {\r\n        uee.printStackTrace()\r\n    } catch (ibse: IllegalBlockSizeException) {\r\n        ibse.printStackTrace()\r\n    } catch (bpe: BadPaddingException) {\r\n        bpe.printStackTrace()\r\n    } catch (ike: InvalidKeyException) {\r\n        ike.printStackTrace()\r\n    } catch (nspe: NoSuchPaddingException) {\r\n        nspe.printStackTrace()\r\n    } catch (nsae: NoSuchAlgorithmException) {\r\n        nsae.printStackTrace()\r\n    } catch (e: ShortBufferException) {\r\n        e.printStackTrace()\r\n    }\r\n\r\n    return null\r\n}\r\n\r\nfun decryptWithAESmeta(key: String, strToDecrypt: String?): String? {\r\n    Security.addProvider(BouncyCastleProvider())\r\n    var keyBytes: ByteArray\r\n\r\n    try {\r\n        keyBytes = key.toByteArray(charset(\"UTF8\"))\r\n        val skey = SecretKeySpec(keyBytes, \"AES\")\r\n        val input = org.bouncycastle.util.encoders.Base64\r\n            .decode(strToDecrypt?.trim { it <= ' ' }?.toByteArray(charset(\"UTF8\")))\r\n\r\n        synchronized(Cipher::class.java) {\r\n            val cipher = Cipher.getInstance(\"AES/ECB/PKCS7Padding\")\r\n            cipher.init(Cipher.DECRYPT_MODE, skey)\r\n\r\n            val plainText = ByteArray(cipher.getOutputSize(input.size))\r\n            var ptLength = cipher.update(input, 0, input.size, plainText, 0)\r\n            ptLength += cipher.doFinal(plainText, ptLength)\r\n            val decryptedString = String(plainText)\r\n            return decryptedString.trim { it <= ' ' }\r\n        }\r\n    } catch (uee: UnsupportedEncodingException) {\r\n        uee.printStackTrace()\r\n    } catch (ibse: IllegalBlockSizeException) {\r\n        ibse.printStackTrace()\r\n    } catch (bpe: BadPaddingException) {\r\n        bpe.printStackTrace()\r\n    } catch (ike: InvalidKeyException) {\r\n        ike.printStackTrace()\r\n    } catch (nspe: NoSuchPaddingException) {\r\n        nspe.printStackTrace()\r\n    } catch (nsae: NoSuchAlgorithmException) {\r\n        nsae.printStackTrace()\r\n    } catch (e: ShortBufferException) {\r\n        e.printStackTrace()\r\n    }\r\n\r\n    return null\r\n}\r\n\r\nfun metaGenrateKey(): String {\r\n    //val secretKey: String = \"662ede816988e58fb6d057d9d85605e0\"\r\n    val keygen = (\"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"\r\n            + \"0123456789\"\r\n            + \"abcdefghijklmnopqrstuvxyz\")\r\n\r\n    val n = 32\r\n\r\n    // create StringBuffer size of keygen\r\n    val secretKey = StringBuilder(n)\r\n    for (i in 0 until n) {\r\n\r\n        // generate a random number between\r\n        // 0 to keygen variable length\r\n        val index = (keygen.length\r\n                * Math.random()).toInt()\r\n\r\n        // add Character one by one in end of secretKey\r\n        secretKey.append(keygen[index])\r\n\r\n    }\r\n    println(secretKey)\r\n    return secretKey.toString()\r\n}\r\n\r\nfun metaBlock(message: String){\r\n    //val secretKey: String = \"662ede816988e58fb6d057d9d85605e0\"\r\n    val keygen = metaGenrateKey()\r\n\r\n    var meta = encryptMeta(message, keygen)\r\n    println(meta)\r\n\r\n    val message_decripted = decryptWithAESmeta(keygen, meta)\r\n    println(message_decripted)\r\n}\r\n\r\n@RequiresApi(Build.VERSION_CODES.M)\r\nfun saveKeygenOx(context : Context, chatUid : String, keygen: String){\r\n\r\n    val keyGenParameterSpec = MasterKeys.AES256_GCM_SPEC\r\n    val masterKeyAlias = MasterKeys.getOrCreate(keyGenParameterSpec)\r\n    val sharedPreferences = EncryptedSharedPreferences.create(\r\n        \"meta_shared_preferences\",\r\n        masterKeyAlias,\r\n        context,\r\n        EncryptedSharedPreferences.PrefKeyEncryptionScheme.AES256_SIV,\r\n        EncryptedSharedPreferences.PrefValueEncryptionScheme.AES256_GCM\r\n    )\r\n\r\n    // storing a value\r\n    sharedPreferences\r\n        .edit()\r\n        .putString(chatUid, keygen)\r\n        .apply()\r\n}\r\n\r\n@RequiresApi(Build.VERSION_CODES.M)\r\nfun getMetaOx(context: Context, chatUid: String): String? {\r\n\r\n    val keyGenParameterSpec = MasterKeys.AES256_GCM_SPEC\r\n    val masterKeyAlias = MasterKeys.getOrCreate(keyGenParameterSpec)\r\n    val sharedPreferences = EncryptedSharedPreferences.create(\r\n        \"meta_shared_preferences\",\r\n        masterKeyAlias,\r\n        context,\r\n        EncryptedSharedPreferences.PrefKeyEncryptionScheme.AES256_SIV,\r\n        EncryptedSharedPreferences.PrefValueEncryptionScheme.AES256_GCM\r\n    )\r\n\r\n    // reading a value\r\n    println(sharedPreferences.getString(chatUid, \"\"))\r\n    return sharedPreferences.getString(chatUid, \"\") // -> \"some_data\"\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/singularity/ipcaplus/cryptography/metaData.kt b/app/src/main/java/com/singularity/ipcaplus/cryptography/metaData.kt
---- a/app/src/main/java/com/singularity/ipcaplus/cryptography/metaData.kt	(revision 61aecb98de8cc827aadb6472252112d5a0bddc54)
-+++ b/app/src/main/java/com/singularity/ipcaplus/cryptography/metaData.kt	(date 1641768812545)
-@@ -13,9 +13,11 @@
- import java.io.UnsupportedEncodingException
- import java.security.InvalidKeyException
- import java.security.NoSuchAlgorithmException
-+import java.security.SecureRandom
- import java.security.Security
- import java.util.Objects.hash
- import javax.crypto.*
-+import javax.crypto.spec.IvParameterSpec
- import javax.crypto.spec.SecretKeySpec
- 
- 
-@@ -26,6 +28,11 @@
-     Security.addProvider(BouncyCastleProvider())
-     hash(strToEncrypt)
-     var keyBytes: ByteArray
-+    //val initVector = generateRandomIV()
-+    val initVector = "7c5afb00aaecb1a1"
-+    val iv = IvParameterSpec(initVector.toByteArray(charset("UTF-8")))
-+    println("AVEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE $initVector")
-+
- 
-     try {
-         keyBytes = secret_key.toByteArray(charset("UTF8"))
-@@ -33,8 +40,8 @@
-         val input = strToEncrypt.toByteArray(charset("UTF8"))
- 
-         synchronized(Cipher::class.java) {
--            val cipher = Cipher.getInstance("AES/ECB/PKCS7Padding")
--            cipher.init(Cipher.ENCRYPT_MODE, skey)
-+            val cipher = Cipher.getInstance("AES/CBC/PKCS7Padding")
-+            cipher.init(Cipher.ENCRYPT_MODE, skey, iv)
- 
-             val cipherText = ByteArray(cipher.getOutputSize(input.size))
-             var ctLength = cipher.update(
-@@ -68,16 +75,18 @@
- fun decryptWithAESmeta(key: String, strToDecrypt: String?): String? {
-     Security.addProvider(BouncyCastleProvider())
-     var keyBytes: ByteArray
-+    val initVector = "7c5afb00aaecb1a1"
- 
-     try {
-+        val iv = IvParameterSpec(initVector.toByteArray(charset("UTF-8")))
-         keyBytes = key.toByteArray(charset("UTF8"))
-         val skey = SecretKeySpec(keyBytes, "AES")
-         val input = org.bouncycastle.util.encoders.Base64
-             .decode(strToDecrypt?.trim { it <= ' ' }?.toByteArray(charset("UTF8")))
- 
-         synchronized(Cipher::class.java) {
--            val cipher = Cipher.getInstance("AES/ECB/PKCS7Padding")
--            cipher.init(Cipher.DECRYPT_MODE, skey)
-+            val cipher = Cipher.getInstance("AES/CBC/PKCS7Padding")
-+            cipher.init(Cipher.DECRYPT_MODE, skey, iv)
- 
-             val plainText = ByteArray(cipher.getOutputSize(input.size))
-             var ptLength = cipher.update(input, 0, input.size, plainText, 0)
-@@ -176,4 +185,19 @@
-     // reading a value
-     println(sharedPreferences.getString(chatUid, ""))
-     return sharedPreferences.getString(chatUid, "") // -> "some_data"
-+}
-+
-+fun generateRandomIV(): String {
-+    val ranGen = SecureRandom()
-+    val aesKey = ByteArray(16)
-+    ranGen.nextBytes(aesKey)
-+    val result = StringBuffer()
-+    for (b in aesKey) {
-+        result.append(String.format("%02x", b))
-+    }
-+    return if (16 > result.toString().length) {
-+        result.toString()
-+    } else {
-+        result.toString().substring(0, 16)
-+    }
- }
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_rebase_[Default_Changelist]/shelved.patch
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_rebase_[Default_Changelist]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_rebase_[Default_Changelist]/shelved.patch
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_rebase_[Default_Changelist]/shelved.patch	(revision 61aecb98de8cc827aadb6472252112d5a0bddc54)
-+++ /dev/null	(revision 61aecb98de8cc827aadb6472252112d5a0bddc54)
-@@ -1,806 +0,0 @@
--Index: app/src/main/java/com/singularity/ipcaplus/drawer/DrawerActivty.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.singularity.ipcaplus.drawer\r\n\r\nimport android.content.ContentValues\r\nimport android.content.Intent\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport android.util.Log\r\nimport android.view.Menu\r\nimport android.view.MenuItem\r\nimport android.view.WindowManager\r\nimport android.widget.ImageView\r\nimport android.widget.TextView\r\nimport androidx.drawerlayout.widget.DrawerLayout\r\nimport androidx.navigation.findNavController\r\nimport androidx.navigation.ui.AppBarConfiguration\r\nimport androidx.navigation.ui.navigateUp\r\nimport androidx.navigation.ui.setupActionBarWithNavController\r\nimport androidx.navigation.ui.setupWithNavController\r\nimport com.google.android.material.navigation.NavigationView\r\nimport com.google.android.material.snackbar.Snackbar\r\nimport com.google.firebase.Timestamp\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.firestore.ktx.firestore\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.singularity.ipcaplus.R\r\nimport com.singularity.ipcaplus.WelcomeActivity\r\nimport com.singularity.ipcaplus.utils.PreferenceHelper.email\r\nimport com.singularity.ipcaplus.utils.PreferenceHelper.password\r\nimport com.singularity.ipcaplus.utils.PreferenceHelper.userId\r\nimport com.singularity.ipcaplus.chat.SearchActivity\r\nimport com.singularity.ipcaplus.cryptography.encryptMeta\r\nimport com.singularity.ipcaplus.cryptography.metaGenrateKey\r\nimport com.singularity.ipcaplus.databinding.ActivityDrawerActivtyBinding\r\nimport com.singularity.ipcaplus.models.Chat\r\nimport com.singularity.ipcaplus.models.Message\r\nimport com.singularity.ipcaplus.utils.PreferenceHelper\r\nimport com.singularity.ipcaplus.utils.UserLoggedIn\r\nimport com.singularity.ipcaplus.utils.Utilis\r\nimport kotlin.random.Random\r\nimport androidx.core.view.ViewCompat\r\n\r\nimport androidx.core.app.ActivityOptionsCompat\r\nimport com.singularity.ipcaplus.AddButtonActivity\r\nimport com.singularity.ipcaplus.chat.CreateChatActivity\r\nimport com.singularity.ipcaplus.databinding.ActivityProfileBinding\r\nimport com.singularity.ipcaplus.utils.Backend\r\n\r\n\r\nclass DrawerActivty : AppCompatActivity() {\r\n\r\n    private lateinit var appBarConfiguration: AppBarConfiguration\r\n    private lateinit var binding: ActivityDrawerActivtyBinding\r\n    private lateinit var binding2: ActivityProfileBinding\r\n    val db = Firebase.firestore\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n\r\n        binding = ActivityDrawerActivtyBinding.inflate(layoutInflater)\r\n       // binding2 = ActivityProfileBinding.inflate(layoutInflater)\r\n\r\n        setContentView(binding.root)\r\n\r\n       /* var imageView = binding.navView.getHeaderView(0).findViewById<ImageView>(R.id.imageView_profile)\r\n        var imageView2 = binding2.imageViewProfile.id*/\r\n\r\n        binding.navView.getHeaderView(0).findViewById<ImageView>(R.id.imageView_profile).setOnClickListener {\r\n\r\n            /*val options = ActivityOptionsCompat.makeSceneTransitionAnimation(\r\n                this,\r\n                imageView,\r\n                imageView2.toString()\r\n            )*/\r\n\r\n            val intent = Intent(this, ProfileActivity::class.java)\r\n            startActivity(intent)\r\n        }\r\n\r\n        Utilis.getFile(this,\"profilePictures/\" + Firebase.auth.uid + \".png\", \"png\") { bitmap ->\r\n            binding.navView.getHeaderView(0).findViewById<ImageView>(R.id.imageView_profile).setImageBitmap(bitmap)\r\n        }\r\n        if(!UserLoggedIn.name.isNullOrEmpty()){\r\n            val name = Utilis.getFirstAndLastName(UserLoggedIn.name!!)\r\n            binding.navView.getHeaderView(0).findViewById<TextView>(R.id.textView3).text = name\r\n            binding.navView.getHeaderView(0).findViewById<TextView>(R.id.emailTextView).text = UserLoggedIn.email\r\n        }\r\n\r\n        setSupportActionBar(binding.appBarMain.toolbar)\r\n        window.setFlags(\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN,\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN);\r\n\r\n\r\n        binding.appBarMain.fabAddChat.setOnClickListener { view ->\r\n            Snackbar.make(view, \"Replace with your own action\", Snackbar.LENGTH_LONG)\r\n                .setAction(\"Action\", null).show()\r\n        }\r\n        val drawerLayout: DrawerLayout = binding.drawerLayout\r\n        val navView: NavigationView = binding.navView\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        // Passing each menu ID as a set of Ids because each\r\n        // menu should be considered as top level destinations.\r\n        appBarConfiguration = AppBarConfiguration(\r\n            setOf(\r\n                R.id.nav_home\r\n            ), drawerLayout\r\n        )\r\n\r\n        // Generate key for chats\r\n        val keygen = metaGenrateKey()\r\n\r\n        // Criação de Chat\r\n        binding.appBarMain.fabAddChat.setOnClickListener {\r\n\r\n            val intent = Intent(this, AddButtonActivity::class.java)\r\n            startActivity(intent)\r\n\r\n            /*\r\n            val chat = Chat(\r\n                \"Chat Teste \" + Random.nextInt(256),\r\n                \"chat\",\r\n                keygen\r\n            )\r\n            // Build encryptation data of first message send by the system\r\n            var meta = encryptMeta(\"This is an Alpha Chat, bugs are expected,\" +\r\n                    \" please report them if you found some. Welcome to Singularity!\", keygen)\r\n            val id_amigo = \"Y90PjGQmLsMrxLicWkirOKpPSOx2\"\r\n            val message = Message(\r\n                \"system\",\r\n                meta.toString(),\r\n                \"2021-12-22\",\r\n                Timestamp.now(),\r\n                \"\"\r\n\r\n            )\r\n            db.collection(\"chat\")\r\n                .add(chat.toHash())\r\n                .addOnSuccessListener { documentReference ->\r\n                    db.collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .collection(\"message\")\r\n                        .add(message.toHash())\r\n                    db.collection(\"profile\")\r\n                        .document(\"${Firebase.auth.currentUser!!.uid}\")\r\n                        .collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .set(chat)\r\n                    db.collection(\"profile\")\r\n                        .document(id_amigo)\r\n                        .collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .set(chat)\r\n\r\n                }\r\n                .addOnFailureListener { e ->\r\n                    Log.w(ContentValues.TAG, \"Error adding document\", e)\r\n                }*/\r\n\r\n        }\r\n\r\n        // Log Out Button\r\n        binding.logoutLayout.setOnClickListener {\r\n\r\n            val prefs = PreferenceHelper.customPreference(this, \"User_data\")\r\n            prefs.password = null\r\n            prefs.email = null\r\n            prefs.userId = null\r\n\r\n            val intent = Intent(this, WelcomeActivity::class.java)\r\n            startActivity(intent)\r\n        }\r\n\r\n        // Passing each fragment ID as a set of Ids\r\n        setupActionBarWithNavController(navController, appBarConfiguration)\r\n        navView.setupWithNavController(navController)\r\n\r\n    }\r\n\r\n\r\n    /*\r\n        Refresh Activity Content\r\n    */\r\n    override fun onResume() {\r\n        super.onResume()\r\n\r\n        Utilis.getFile(this,\"profilePictures/\" + Firebase.auth.uid!! + \".png\", \"png\") { bitmap ->\r\n            binding.navView.getHeaderView(0).findViewById<ImageView>(R.id.imageView_profile).setImageBitmap(bitmap)\r\n        }\r\n    }\r\n\r\n\r\n        override fun onCreateOptionsMenu(menu: Menu): Boolean {\r\n        // Inflate the menu; this adds items to the action bar if it is present.\r\n        menuInflater.inflate(R.menu.drawer, menu)\r\n        return true\r\n    }\r\n\r\n    override fun onSupportNavigateUp(): Boolean {\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        return navController.navigateUp(appBarConfiguration) || super.onSupportNavigateUp()\r\n    }\r\n\r\n    override fun onOptionsItemSelected(item: MenuItem): Boolean {\r\n        // Handle item selection\r\n        return when (item.itemId) {\r\n            R.id.search_btn -> {\r\n                val intent = Intent(this, SearchActivity::class.java)\r\n                startActivity(intent)\r\n\r\n                true\r\n            }\r\n            else -> super.onOptionsItemSelected(item)\r\n        }\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/singularity/ipcaplus/drawer/DrawerActivty.kt b/app/src/main/java/com/singularity/ipcaplus/drawer/DrawerActivty.kt
----- a/app/src/main/java/com/singularity/ipcaplus/drawer/DrawerActivty.kt	(revision 58133ef53033e0643a17f1f4078750cf79ef5b84)
--+++ b/app/src/main/java/com/singularity/ipcaplus/drawer/DrawerActivty.kt	(date 1641230212949)
--@@ -1,6 +1,9 @@
-- package com.singularity.ipcaplus.drawer
-- 
--+import android.content.BroadcastReceiver
-- import android.content.ContentValues
--+import android.content.ContentValues.TAG
--+import android.content.Context
-- import android.content.Intent
-- import androidx.appcompat.app.AppCompatActivity
-- import android.os.Bundle
--@@ -10,6 +13,7 @@
-- import android.view.WindowManager
-- import android.widget.ImageView
-- import android.widget.TextView
--+import android.widget.Toast
-- import androidx.drawerlayout.widget.DrawerLayout
-- import androidx.navigation.findNavController
-- import androidx.navigation.ui.AppBarConfiguration
--@@ -33,17 +37,16 @@
-- import com.singularity.ipcaplus.databinding.ActivityDrawerActivtyBinding
-- import com.singularity.ipcaplus.models.Chat
-- import com.singularity.ipcaplus.models.Message
---import com.singularity.ipcaplus.utils.PreferenceHelper
---import com.singularity.ipcaplus.utils.UserLoggedIn
---import com.singularity.ipcaplus.utils.Utilis
-- import kotlin.random.Random
-- import androidx.core.view.ViewCompat
-- 
-- import androidx.core.app.ActivityOptionsCompat
--+import com.google.android.gms.tasks.OnCompleteListener
--+import com.google.firebase.messaging.FirebaseMessaging
-- import com.singularity.ipcaplus.AddButtonActivity
-- import com.singularity.ipcaplus.chat.CreateChatActivity
-- import com.singularity.ipcaplus.databinding.ActivityProfileBinding
---import com.singularity.ipcaplus.utils.Backend
--+import com.singularity.ipcaplus.utils.*
-- 
-- 
-- class DrawerActivty : AppCompatActivity() {
--@@ -53,6 +56,29 @@
--     private lateinit var binding2: ActivityProfileBinding
--     val db = Firebase.firestore
-- 
--+    var notificationReceiver : NotificationReceiver? = null
--+
--+    inner class NotificationReceiver : BroadcastReceiver() {
--+        override fun onReceive(p0: Context?, intent: Intent?) {
--+            intent?.extras?.getString(MyFirebaseMessagingService.NOTIFICATION_MESSAGE)?.let {
--+                alertNotificatio(this@MainActivity, it)
--+            }
--+        }
--+    }
--+
--+    override fun onResume() {
--+        super.onResume()
--+        notificationReceiver = NotificationReceiver()
--+        this.registerReceiver(notificationReceiver, IntentFilter(MyFirebaseMessagingService.BROADCAST_NEW_NOTIFICATION))
--+    }
--+
--+    override fun onPause() {
--+        super.onPause()
--+        notificationReceiver?.let {
--+            this.unregisterReceiver(it)
--+        }
--+    }
--+
--     override fun onCreate(savedInstanceState: Bundle?) {
--         super.onCreate(savedInstanceState)
-- 
--@@ -174,6 +200,22 @@
--         setupActionBarWithNavController(navController, appBarConfiguration)
--         navView.setupWithNavController(navController)
-- 
--+
--+        FirebaseMessaging.getInstance().token.addOnCompleteListener(OnCompleteListener { task ->
--+            if (!task.isSuccessful) {
--+                Log.w(TAG, "Fetching FCM registration token failed", task.exception)
--+                println("------------------------------------ não encontro o token")
--+                return@OnCompleteListener
--+            }
--+
--+            // Get new FCM registration token
--+            val token = task.result
--+
--+            // Log and toast
--+            val msg = "Token$token"
--+            Log.d(TAG, msg)
--+            Toast.makeText(baseContext, msg, Toast.LENGTH_SHORT).show()
--+        })
--     }
-- 
-- 
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM__Default_Changelist_.xml
--===================================================================
--diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM__Default_Changelist_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM__Default_Changelist_.xml
--deleted file mode 100644
----- a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM__Default_Changelist_.xml	(revision 58133ef53033e0643a17f1f4078750cf79ef5b84)
--+++ /dev/null	(revision 58133ef53033e0643a17f1f4078750cf79ef5b84)
--@@ -1,4 +0,0 @@
---<changelist name="Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM_[Default_Changelist]" date="1640607045965" recycled="true" deleted="true">
---  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM_[Default_Changelist]/shelved.patch" />
---  <option name="DESCRIPTION" value="Uncommitted changes before Update at 12/27/2021 12:10 PM [Default Changelist]" />
---</changelist>
--\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_3_06_PM_[Default_Changelist]/shelved.patch
--===================================================================
--diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_3_06_PM_[Default_Changelist]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_3_06_PM_[Default_Changelist]/shelved.patch
--deleted file mode 100644
----- a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_3_06_PM_[Default_Changelist]/shelved.patch	(revision 58133ef53033e0643a17f1f4078750cf79ef5b84)
--+++ /dev/null	(revision 58133ef53033e0643a17f1f4078750cf79ef5b84)
--@@ -1,168 +0,0 @@
---Index: app/src/main/java/com/singularity/ipcaplus/RegisterActivity.kt
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.singularity.ipcaplus\r\n\r\nimport android.content.ContentValues.TAG\r\nimport android.content.Intent\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport android.util.Log\r\nimport android.widget.Toast\r\nimport com.google.firebase.auth.FirebaseAuth\r\nimport com.google.firebase.auth.FirebaseUser\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.singularity.ipcaplus.cryptography.decryptWithAES\r\nimport com.singularity.ipcaplus.cryptography.encrypt\r\nimport com.singularity.ipcaplus.databinding.ActivityRegisterBinding\r\n\r\nclass RegisterActivity : AppCompatActivity() {\r\n    private lateinit var auth: FirebaseAuth\r\n    private lateinit var binding: ActivityRegisterBinding\r\n\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_login)\r\n\r\n        binding = ActivityRegisterBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        auth = Firebase.auth\r\n\r\n\r\n        binding.buttonRegister.setOnClickListener {\r\n            val email : String = binding.editTextEmail.text.toString()\r\n            val password : String = binding.editTextTextPassword.text.toString()\r\n\r\n\r\n            auth.createUserWithEmailAndPassword(email, password)\r\n                .addOnCompleteListener(this) { task ->\r\n                    if (task.isSuccessful) {\r\n                        // Sign in success, update UI with the signed-in user's information\r\n                        Log.d(TAG, \"createUserWithEmail:success\")\r\n                        val user = auth.currentUser\r\n                        emailVerification()\r\n                        startActivity(Intent(this, LoginActivity::class.java ))\r\n                    } else {\r\n                        // If sign in fails, display a message to the user.\r\n                        Log.w(TAG, \"createUserWithEmail:failure\", task.exception)\r\n                        Toast.makeText(baseContext, \"Authentication failed.\",\r\n                            Toast.LENGTH_SHORT).show()\r\n                    }\r\n                }\r\n        }\r\n    }\r\n\r\n    private fun emailVerification() {\r\n\r\n        auth.currentUser?.sendEmailVerification()\r\n            ?.addOnCompleteListener { task ->\r\n                if (task.isSuccessful) {\r\n                    // below message changed and user is navigated to Sign In activity\r\n                    val user = auth.currentUser\r\n                    Toast.makeText(\r\n                        this, \"Sign Up successful. Verification link sent to the Email address\",\r\n                        Toast.LENGTH_SHORT\r\n                    ).show()\r\n                }\r\n            }\r\n\r\n    }\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/app/src/main/java/com/singularity/ipcaplus/RegisterActivity.kt b/app/src/main/java/com/singularity/ipcaplus/RegisterActivity.kt
------ a/app/src/main/java/com/singularity/ipcaplus/RegisterActivity.kt	(revision 259ef520c64e84cee5b29ce2aa11b4d2c88df187)
---+++ b/app/src/main/java/com/singularity/ipcaplus/RegisterActivity.kt	(date 1640617365737)
---@@ -1,17 +1,15 @@
--- package com.singularity.ipcaplus
--- 
----import android.content.ContentValues.TAG
---+import android.content.ContentValues
--- import android.content.Intent
----import androidx.appcompat.app.AppCompatActivity
--- import android.os.Bundle
--- import android.util.Log
--- import android.widget.Toast
---+import androidx.appcompat.app.AppCompatActivity
---+import com.google.android.material.snackbar.Snackbar
--- import com.google.firebase.auth.FirebaseAuth
----import com.google.firebase.auth.FirebaseUser
--- import com.google.firebase.auth.ktx.auth
--- import com.google.firebase.ktx.Firebase
----import com.singularity.ipcaplus.cryptography.decryptWithAES
----import com.singularity.ipcaplus.cryptography.encrypt
--- import com.singularity.ipcaplus.databinding.ActivityRegisterBinding
--- 
--- class RegisterActivity : AppCompatActivity() {
---@@ -33,22 +31,27 @@
---             val email : String = binding.editTextEmail.text.toString()
---             val password : String = binding.editTextTextPassword.text.toString()
--- 
----
----            auth.createUserWithEmailAndPassword(email, password)
----                .addOnCompleteListener(this) { task ->
----                    if (task.isSuccessful) {
----                        // Sign in success, update UI with the signed-in user's information
----                        Log.d(TAG, "createUserWithEmail:success")
----                        val user = auth.currentUser
----                        emailVerification()
----                        startActivity(Intent(this, LoginActivity::class.java ))
----                    } else {
----                        // If sign in fails, display a message to the user.
----                        Log.w(TAG, "createUserWithEmail:failure", task.exception)
----                        Toast.makeText(baseContext, "Authentication failed.",
----                            Toast.LENGTH_SHORT).show()
---+            val emailDomain = Utilis.getEmailDomain(email)
---+            if(emailDomain != "alunos.ipca.pt" && emailDomain != "ipca.pt"){
---+                Snackbar.make(binding.root,
---+                    "You need to Sign Up with (ipca.pt) email!", Snackbar.LENGTH_SHORT).show()
---+            }else{
---+                auth.createUserWithEmailAndPassword(email, password)
---+                    .addOnCompleteListener(this) { task ->
---+                        if (task.isSuccessful) {
---+                            // Sign in success, update UI with the signed-in user's information
---+                            Log.d(ContentValues.TAG, "createUserWithEmail:success")
---+                            val user = auth.currentUser
---+                            emailVerification()
---+                            startActivity(Intent(this, LoginActivity::class.java ))
---+                        } else {
---+                            // If sign in fails, display a message to the user.
---+                            Log.w(ContentValues.TAG, "createUserWithEmail:failure", task.exception)
---+                            Toast.makeText(baseContext, "Authentication failed.",
---+                                Toast.LENGTH_SHORT).show()
---+                        }
---                     }
----                }
---+            }
---         }
---     }
--- 
---Index: app/src/main/java/com/singularity/ipcaplus/Backend.kt
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.singularity.ipcaplus\r\n\r\nimport android.graphics.Color\r\nimport com.github.sundeepk.compactcalendarview.domain.Event\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.firestore.Query\r\nimport com.google.firebase.firestore.ktx.firestore\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.singularity.ipcaplus.models.*\r\n\r\nobject Backend {\r\n\r\n    val db = Firebase.firestore\r\n\r\n    /*\r\n       ------------------------------------------------ Events ------------------------------------------------\r\n    */\r\n\r\n    /*\r\n       This function returns all events during the month in the firebase to an list\r\n       @month = selected month\r\n       @callBack = return the list\r\n    */\r\n    fun getAllMonthEvents(month: String, callBack: (List<EventCalendar>)->Unit) {\r\n\r\n        val events = arrayListOf<EventCalendar>()\r\n\r\n        // Get all user chat ids\r\n        val chatIds = arrayListOf<String>()\r\n        getAllUserChatIds {\r\n            chatIds.addAll(it)\r\n\r\n            // Search in all chats\r\n            for (id in chatIds) {\r\n                db.collection(\"chat\")\r\n                    .document(id)\r\n                    .collection(\"event\")\r\n                    .addSnapshotListener { documents, _ ->\r\n\r\n                        documents?.let {\r\n\r\n                            for (document in documents) {\r\n                                val event = EventCalendar.fromHash(document)\r\n                                event.id = document.id\r\n\r\n                                val date = Utilis.getDate(event.datetime.seconds * 1000, \"yyyy-MM-dd'T'HH:mm:ss.SSS\")\r\n                                if (month == Utilis.getMonthById(Utilis.getMonth(date).toInt())) {\r\n                                    events.add(event)\r\n                                }\r\n                            }\r\n                            callBack(events)\r\n                        }\r\n                    }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    private fun getAllUserChatIds(callBack: (List<String>)->Unit) {\r\n\r\n        val chatIds = arrayListOf<String>()\r\n\r\n        // Get Group Chats Ids\r\n        db.collection(\"profile\").document(Firebase.auth.currentUser!!.uid).collection(\"chat\")\r\n            .addSnapshotListener { documents, _ ->\r\n                documents?.let {\r\n                    for (document in it) {\r\n                        chatIds.add(document.id)\r\n                    }\r\n\r\n                    callBack(chatIds)\r\n                }\r\n            }\r\n    }\r\n\r\n\r\n    /*\r\n       This function returns all events during the month in the firebase to an list\r\n       @month = selected month\r\n       @callBack = return the list\r\n    */\r\n    fun getAllChatMonthEvents(month: String, chat_id: String, callBack: (List<EventCalendar>)->Unit) {\r\n\r\n        val events = arrayListOf<EventCalendar>()\r\n\r\n        db.collection(\"chat\")\r\n            .document(chat_id)\r\n            .collection(\"event\")\r\n            .addSnapshotListener { documents, _ ->\r\n\r\n                documents?.let {\r\n\r\n                    for (document in documents) {\r\n                        val event = EventCalendar.fromHash(document)\r\n                        event.id = document.id\r\n\r\n                        val date = Utilis.getDate(event.datetime.seconds * 1000, \"yyyy-MM-dd'T'HH:mm:ss.SSS\")\r\n                        if (month == Utilis.getMonthById(Utilis.getMonth(date).toInt())) {\r\n                            events.add(event)\r\n                        }\r\n                    }\r\n\r\n                    callBack(events)\r\n                }\r\n\r\n            }\r\n    }\r\n\r\n\r\n    /*\r\n       This function returns all events during the day in the firebase to an list\r\n       @day = selected day\r\n       @callBack = return the list\r\n    */\r\n    fun getAllChatMonthDayEvents(month: String, day: Int, chat_id: String, callBack: (List<EventCalendar>)->Unit) {\r\n\r\n        val events = arrayListOf<EventCalendar>()\r\n\r\n        db.collection(\"chat\")\r\n            .document(chat_id)\r\n            .collection(\"event\")\r\n            .addSnapshotListener { documents, _ ->\r\n\r\n                documents?.let {\r\n\r\n                    for (document in documents) {\r\n                        val event = EventCalendar.fromHash(document)\r\n                        event.id = document.id\r\n\r\n                        val date = Utilis.getDate(event.datetime.seconds * 1000, \"yyyy-MM-dd'T'HH:mm:ss.SSS\")\r\n                        if (day == Utilis.getDay(date).toInt() && month == Utilis.getMonthById(Utilis.getMonth(date).toInt())) {\r\n                            events.add(event)\r\n                        }\r\n                    }\r\n\r\n                    callBack(events)\r\n                }\r\n\r\n            }\r\n    }\r\n\r\n\r\n    /*\r\n       This function returns all events during the day in the firebase to an list\r\n       @day = selected day\r\n       @callBack = return the list\r\n    */\r\n    fun getAllMonthDayEvents(month: String, day: Int, callBack: (List<EventCalendar>)->Unit) {\r\n\r\n        val events = arrayListOf<EventCalendar>()\r\n\r\n        // Get all user chat ids\r\n        val chatIds = arrayListOf<String>()\r\n        getAllUserChatIds {\r\n            chatIds.addAll(it)\r\n\r\n            // Search in all chats\r\n            for (id in chatIds) {\r\n                db.collection(\"chat\")\r\n                    .document(id)\r\n                    .collection(\"event\")\r\n                    .addSnapshotListener { documents, _ ->\r\n\r\n                        documents?.let {\r\n\r\n                            for (document in documents) {\r\n                                val event = EventCalendar.fromHash(document)\r\n                                event.id = document.id\r\n\r\n                                val date = Utilis.getDate(event.datetime.seconds * 1000, \"yyyy-MM-dd'T'HH:mm:ss.SSS\")\r\n                                if (day == Utilis.getDay(date).toInt() && month == Utilis.getMonthById(Utilis.getMonth(date).toInt())) {\r\n                                    events.add(event)\r\n                                }\r\n                            }\r\n\r\n                            callBack(events)\r\n                        }\r\n\r\n                    }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    fun deleteEvent(chatID: String, eventID: String) {\r\n\r\n        db.collection(\"chat\")\r\n            .document(chatID)\r\n            .collection(\"event\")\r\n            .document(eventID)\r\n            .delete()\r\n\r\n    }\r\n\r\n\r\n    /*\r\n       ------------------------------------------------ Schedule ------------------------------------------------\r\n    */\r\n\r\n    /*\r\n       This function returns all events in the firebase to an list\r\n       @callBack = return the list\r\n    */\r\n    fun getDayCourseSubjects(day: String, courseId: String, callBack: (List<Subject>)->Unit) {\r\n\r\n        val subjects = arrayListOf<Subject>()\r\n        val subjectsWithBreaks = arrayListOf<Subject>()\r\n\r\n        db.collection(\"course\").document(courseId).collection(\"subject\")\r\n            .addSnapshotListener { documents, _ ->\r\n                documents?.let {\r\n\r\n                    // Add every subject to the list\r\n                    for (document in documents) {\r\n                        val subject = Subject.fromHash(document)\r\n                        if (day == subject.day) {\r\n                            subjects.add(subject)\r\n                        }\r\n                    }\r\n\r\n                    // Order the subjects by time\r\n                    for (i in 0 until subjects.size) {\r\n                        for (j in 0 until subjects.size - 1) {\r\n\r\n                            if (Utilis.convertHoursStringToInt(subjects[j].start_time) > Utilis.convertHoursStringToInt(subjects[j+1].start_time)) {\r\n                                val temp = subjects[j]\r\n                                subjects[j] = subjects[j + 1]\r\n                                subjects[j + 1] = temp\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    // Add Break Times Between Classes\r\n                    for (i in 0 until subjects.size) {\r\n                        if (i % 2 == 0) {\r\n                            subjectsWithBreaks.add(subjects[i])\r\n                        }\r\n                        else {\r\n                            val diff = Utilis.convertHoursStringToInt(subjects[i].start_time) - Utilis.convertHoursStringToInt(subjects[i-1].end_time)\r\n                            subjectsWithBreaks.add(Subject(\"breaktime\", diff.toString()))\r\n                            subjectsWithBreaks.add(subjects[i])\r\n                        }\r\n                    }\r\n\r\n                    callBack(subjectsWithBreaks)\r\n                }\r\n\r\n            }\r\n\r\n    }\r\n\r\n\r\n    /*\r\n       This function returns the user course by callback\r\n       @id = user uid\r\n    */\r\n    fun getUserCourse(uid: String, callBack:(String)->Unit) {\r\n\r\n        db.collection(\"profile\")\r\n            .document(uid)\r\n            .collection(\"course\")\r\n            .addSnapshotListener { documents, _ ->\r\n\r\n                documents?.let {\r\n\r\n                    var courseId = \"\"\r\n                    for (document in documents)\r\n                        courseId = document.id\r\n\r\n                    callBack(courseId)\r\n                }\r\n            }\r\n    }\r\n\r\n\r\n    /*\r\n       ------------------------------------------------ Contacts ------------------------------------------------\r\n    */\r\n    /*\r\n       This function returns all contacts in the firebase to an list\r\n       @callBack = return the list\r\n    */\r\n    fun getAllContacts(callBack: (List<Contact>)->Unit) {\r\n\r\n        val contacts = arrayListOf<Contact>()\r\n\r\n        db.collection(\"contacts\")\r\n            .addSnapshotListener { documents, _ ->\r\n\r\n                documents?.let {\r\n\r\n                    for (document in documents) {\r\n                        val contact = Contact.fromHash(document)\r\n                        contacts.add(contact)\r\n                    }\r\n\r\n                    callBack(contacts)\r\n                }\r\n\r\n            }\r\n\r\n    }\r\n\r\n\r\n    /*\r\n       ------------------------------------------------ Chats ------------------------------------------------\r\n    */\r\n    /*\r\n    /*\r\n       This function returns chats based on given type\r\n       @callBack = return the list\r\n    */\r\n    fun getChatByType(type: String ,callBack: (List<Chat>, List<String>)->Unit) {\r\n\r\n        val chats = arrayListOf<Chat>()\r\n        val chatIds = arrayListOf<String>()\r\n\r\n        db.collection(\"profile\").document(\"${Firebase.auth.currentUser!!.uid}\").collection(\"chat\")\r\n            .addSnapshotListener { documents, _ ->\r\n                documents?.let {\r\n                    for (document in documents) {\r\n                        val chat = Chat.fromHash(document)\r\n                        if (type == chat.type) {\r\n                            chats.add(chat)\r\n                            chatIds.add(document.id)\r\n                        }\r\n                    }\r\n\r\n                    callBack(chats, chatIds)\r\n                }\r\n\r\n            }\r\n\r\n    }\r\n    */\r\n\r\n    /*\r\n       This function returns last chat message by chat id\r\n       @callBack = return the list\r\n    */\r\n    fun getLastMessageByChatID(chatID: String, callBack: (Message?)->Unit) {\r\n\r\n        var message : Message? = null\r\n\r\n        db.collection(\"chat\").document(\"${chatID}\").collection(\"message\")\r\n            .orderBy(\"time\", Query.Direction.DESCENDING).limit(1)\r\n            .addSnapshotListener { documents, _ ->\r\n                documents?.let {\r\n                    for (document in documents) {\r\n                        message = Message.fromHash(document)\r\n                        }\r\n                    }\r\n\r\n                    callBack(message)\r\n                }\r\n\r\n    }\r\n\r\n\r\n    fun getChatAdminIds(chatID: String, callBack: (List<String>)->Unit) {\r\n\r\n        val adminIds = arrayListOf<String>()\r\n\r\n        // Get Group Chats Ids\r\n        db.collection(\"chat\").document(chatID).collection(\"admin\")\r\n            .addSnapshotListener { documents, _ ->\r\n                documents?.let {\r\n                    for (document in it) {\r\n                        adminIds.add(document.id)\r\n                    }\r\n\r\n                    callBack(adminIds)\r\n                }\r\n            }\r\n\r\n    }\r\n\r\n\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/app/src/main/java/com/singularity/ipcaplus/Backend.kt b/app/src/main/java/com/singularity/ipcaplus/Backend.kt
------ a/app/src/main/java/com/singularity/ipcaplus/Backend.kt	(revision 259ef520c64e84cee5b29ce2aa11b4d2c88df187)
---+++ b/app/src/main/java/com/singularity/ipcaplus/Backend.kt	(date 1640617597444)
---@@ -1,12 +1,13 @@
--- package com.singularity.ipcaplus
--- 
----import android.graphics.Color
----import com.github.sundeepk.compactcalendarview.domain.Event
--- import com.google.firebase.auth.ktx.auth
--- import com.google.firebase.firestore.Query
--- import com.google.firebase.firestore.ktx.firestore
--- import com.google.firebase.ktx.Firebase
----import com.singularity.ipcaplus.models.*
---+import com.singularity.ipcaplus.models.Contact
---+import com.singularity.ipcaplus.models.EventCalendar
---+import com.singularity.ipcaplus.models.Message
---+import com.singularity.ipcaplus.models.Subject
--- 
--- object Backend {
--- 
---@@ -375,5 +376,27 @@
--- 
---     }
--- 
---+    /*
---+       ------------------------------------------------ Register Manipulation ------------------------------------------------
---+    */
---+
---+    fun getIpcaData(email: String, callBack: (Message?)->Unit) {
---+
---+        var message : Message? = null
---+
---+        db.collection("ipca_data")
---+            .addSnapshotListener { documents, _ ->
---+                documents?.let {
---+                    for (document in documents) {
---+                        message = Message.fromHash(document)
---+                    }
---+                }
---+
---+                callBack(message)
---+            }
---+
---+    }
---+
---+
--- 
--- }
---\ No newline at end of file
---Index: app/src/main/java/com/singularity/ipcaplus/Utilis.kt
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.singularity.ipcaplus\r\n\r\nimport android.content.Context\r\nimport android.os.Build\r\nimport androidx.annotation.RequiresApi\r\nimport java.io.IOException\r\nimport java.text.SimpleDateFormat\r\nimport java.time.LocalDate\r\nimport java.util.*\r\nimport java.util.regex.Pattern\r\n\r\nobject  Utilis {\r\n\r\n    /*\r\n        This function return the current month id\r\n     */\r\n    @RequiresApi(Build.VERSION_CODES.O)\r\n    fun getCurrentMonthId(): Int {\r\n\r\n        val c = LocalDate.now()\r\n        val strArray = Pattern.compile(\"-\").split(c.toString())\r\n\r\n        return strArray[1].toInt()\r\n    }\r\n\r\n    /*\r\n        This function return the current year id\r\n     */\r\n    @RequiresApi(Build.VERSION_CODES.O)\r\n    fun getCurrentYear(): String {\r\n\r\n        val c = LocalDate.now()\r\n        val strArray = Pattern.compile(\"-\").split(c.toString())\r\n\r\n        return strArray[0]\r\n    }\r\n\r\n    @RequiresApi(Build.VERSION_CODES.O)\r\n    fun getYearByCalendarId(id: Int): Int {\r\n\r\n        var count = id\r\n        var result = 2021 - 121\r\n\r\n        while (count > 0) {\r\n            count -= 1\r\n            result ++\r\n        }\r\n\r\n        return result\r\n    }\r\n\r\n    /*\r\n        This function return the month value in string by an id\r\n        @month = month id\r\n     */\r\n    fun getMonthById(month: Int): String {\r\n        return when (month) {\r\n            1 -> \"Janeiro\"\r\n            2 -> \"Fevereiro\"\r\n            3 -> \"Março\"\r\n            4 -> \"Abril\"\r\n            5 -> \"Maio\"\r\n            6 -> \"Junho\"\r\n            7 -> \"Julho\"\r\n            8 -> \"Agosto\"\r\n            9 -> \"Setembro\"\r\n            10 -> \"Outubro\"\r\n            11 -> \"Novembro\"\r\n            12 -> \"Dezembro\"\r\n            else -> \"None\"\r\n        }\r\n    }\r\n\r\n    fun convertHoursStringToInt(strVal: String): Int {\r\n        val strArray = Pattern.compile(\":\").split(strVal)\r\n        val result = strArray[0] + strArray[1]\r\n        return result.toInt()\r\n    }\r\n\r\n    fun getDate(milliSeconds: Long, dateFormat: String?): String {\r\n        // Create a DateFormatter object for displaying date in specified format.\r\n        val formatter = SimpleDateFormat(dateFormat)\r\n\r\n        // Create a calendar object that will convert the date and time value in milliseconds to date.\r\n        val calendar: Calendar = Calendar.getInstance()\r\n        calendar.timeInMillis = milliSeconds\r\n        return formatter.format(calendar.time)\r\n    }\r\n\r\n\r\n    /*\r\n        This function split the date and return only the day\r\n        @date = default date\r\n     */\r\n    fun getDay(dateTime: String): String {\r\n\r\n        // Split the date\r\n        val strArray = Pattern.compile(\"-\").split(dateTime)\r\n        val strArray2 = Pattern.compile(\"T\").split(strArray[2])\r\n\r\n        return strArray2[0]\r\n    }\r\n\r\n\r\n    /*\r\n        This function split the date and return only the month in text\r\n        @date = default date\r\n     */\r\n    fun getMonth(dateTime: String): String {\r\n\r\n        // Split the date\r\n        val strArray = Pattern.compile(\"-\").split(dateTime)\r\n\r\n        return strArray[1].toString()\r\n    }\r\n\r\n\r\n    /*\r\n        This function split the date and return only the year in text\r\n        @date = default date\r\n     */\r\n    fun getYear(dateTime: String): String {\r\n\r\n        // Split the date\r\n        val strArray = Pattern.compile(\"-\").split(dateTime)\r\n\r\n        return strArray[0].toString()\r\n    }\r\n\r\n\r\n    /*\r\n        This function split the date and return only the Hours in text\r\n        @date = default date\r\n     */\r\n    fun getHours(dateTime: String): String {\r\n\r\n        // Split the date\r\n        val strArray = Pattern.compile(\"T\").split(dateTime)\r\n        val strArray2 = Pattern.compile(\":\").split(strArray[1])\r\n\r\n        return strArray2[0].toString()\r\n    }\r\n\r\n\r\n    /*\r\n        This function split the date and return only the Minutes in text\r\n        @date = default date\r\n     */\r\n    fun getMinutes(dateTime: String): String {\r\n\r\n        // Split the date\r\n        val strArray = Pattern.compile(\"T\").split(dateTime)\r\n        val strArray2 = Pattern.compile(\":\").split(strArray[1])\r\n\r\n        return strArray2[1].toString()\r\n    }\r\n\r\n\r\n    fun getJsonDataFromAsset(context: Context, fileName: String): String? {\r\n        val jsonString: String\r\n        try {\r\n            jsonString = context.assets.open(fileName).bufferedReader().use { it.readText() }\r\n        } catch (ioException: IOException) {\r\n            ioException.printStackTrace()\r\n            return null\r\n        }\r\n        return jsonString\r\n    }\r\n\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/app/src/main/java/com/singularity/ipcaplus/Utilis.kt b/app/src/main/java/com/singularity/ipcaplus/Utilis.kt
------ a/app/src/main/java/com/singularity/ipcaplus/Utilis.kt	(revision 259ef520c64e84cee5b29ce2aa11b4d2c88df187)
---+++ b/app/src/main/java/com/singularity/ipcaplus/Utilis.kt	(date 1640616340275)
---@@ -155,6 +155,9 @@
---         return strArray2[1].toString()
---     }
--- 
---+    /*
---+        This function get the buffer with the name of filename on assets folder
---+     */
--- 
---     fun getJsonDataFromAsset(context: Context, fileName: String): String? {
---         val jsonString: String
---@@ -167,4 +170,16 @@
---         return jsonString
---     }
--- 
---+    /*
---+        This function gets the domain of email
---+        split remove the @ and make the array like this -> [a20115][alunos.ipca.pt]
---+     */
---+    fun getEmailDomain(email: String) : String{
---+        val strArray = Pattern.compile("@").split(email)
---+        val result= strArray[1]
---+
---+        return result.toString()
---+
---+    }
---+
--- }
---\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch
--===================================================================
--diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch
--deleted file mode 100644
----- a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch	(revision 58133ef53033e0643a17f1f4078750cf79ef5b84)
--+++ /dev/null	(revision 58133ef53033e0643a17f1f4078750cf79ef5b84)
--@@ -1,47 +0,0 @@
---Index: app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.singularity.ipcaplus\r\n\r\nimport android.content.ContentValues\r\nimport android.content.Intent\r\nimport android.os.Build\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport java.util.Base64\r\nimport android.util.Log\r\nimport android.view.Menu\r\nimport android.view.WindowManager\r\nimport android.widget.ImageView\r\nimport androidx.annotation.RequiresApi\r\nimport androidx.drawerlayout.widget.DrawerLayout\r\nimport androidx.navigation.findNavController\r\nimport androidx.navigation.ui.AppBarConfiguration\r\nimport androidx.navigation.ui.navigateUp\r\nimport androidx.navigation.ui.setupActionBarWithNavController\r\nimport androidx.navigation.ui.setupWithNavController\r\nimport com.google.android.material.navigation.NavigationView\r\nimport com.google.android.material.snackbar.Snackbar\r\nimport com.google.firebase.Timestamp\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.firestore.ktx.firestore\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.singularity.ipcaplus.calendar.AddEventActivity\r\nimport com.singularity.ipcaplus.cryptography.decryptWithAESmeta\r\nimport com.singularity.ipcaplus.cryptography.encryptMeta\r\nimport com.singularity.ipcaplus.cryptography.metaGenrateKey\r\nimport com.singularity.ipcaplus.databinding.ActivityDrawerActivtyBinding\r\nimport com.singularity.ipcaplus.models.Chat\r\nimport com.singularity.ipcaplus.models.Message\r\nimport com.singularity.ipcaplus.profile.ProfileActivity\r\nimport java.lang.StringBuilder\r\nimport java.util.Base64.getEncoder\r\nimport java.util.concurrent.TimeUnit\r\nimport javax.crypto.KeyGenerator\r\nimport javax.crypto.SecretKey\r\nimport kotlin.random.Random\r\n\r\n\r\nclass DrawerActivty : AppCompatActivity() {\r\n\r\n    private lateinit var appBarConfiguration: AppBarConfiguration\r\n    private lateinit var binding: ActivityDrawerActivtyBinding\r\n\r\n    val db = Firebase.firestore\r\n\r\n    @RequiresApi(Build.VERSION_CODES.O)\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n\r\n        binding = ActivityDrawerActivtyBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        binding.navView.getHeaderView(0).findViewById<ImageView>(R.id.imageView_profile).setOnClickListener {\r\n\r\n            val intent = Intent(this, ProfileActivity::class.java)\r\n            startActivity(intent)\r\n\r\n        }\r\n\r\n        //val secretKey: String = \"662ede816988e58fb6d057d9d85605e0\"\r\n\r\n        /*val message = \"Hello Welcome to Solanium Dr.Diogo\"\r\n        var meta = encryptMeta(message, keygen)\r\n        println(meta)\r\n\r\n        val message_decripted = decryptWithAESmeta(keygen, meta)\r\n        println(message_decripted)*/\r\n\r\n        setSupportActionBar(binding.appBarMain.toolbar)\r\n        window.setFlags(\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN,\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN);\r\n\r\n\r\n        binding.appBarMain.fabAddChat.setOnClickListener { view ->\r\n            Snackbar.make(view, \"Replace with your own action\", Snackbar.LENGTH_LONG)\r\n                .setAction(\"Action\", null).show()\r\n        }\r\n        val drawerLayout: DrawerLayout = binding.drawerLayout\r\n        val navView: NavigationView = binding.navView\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        val stampCurrent = System.currentTimeMillis()\r\n        val stampSec = TimeUnit.MILLISECONDS.toSeconds(stampCurrent)\r\n        val stampNano = TimeUnit.MILLISECONDS.toNanos(stampCurrent).toInt()\r\n        // Passing each menu ID as a set of Ids because each\r\n        // menu should be considered as top level destinations.\r\n        appBarConfiguration = AppBarConfiguration(\r\n            setOf(\r\n                R.id.nav_home\r\n            ), drawerLayout\r\n        )\r\n\r\n        // Criação de Chat\r\n        binding.appBarMain.fabAddChat.setOnClickListener {\r\n\r\n            /*val keygen = metaGenrateKey()\r\n\r\n            val intent = Intent(this, ChatActivity::class.java)\r\n            intent.putExtra(\"keygen\", keygen)\r\n            startActivity(intent)*/\r\n\r\n            val chat = Chat(\r\n                \"Chat Teste \" + Random.nextInt(256),\r\n                \"chat\"\r\n            )\r\n\r\n            var meta = encryptMeta(\"This is an Alpha Chat, bugs are expected, please report them if you found some. Welcome to Singularity!\", \"662ede816988e58fb6d057d9d85605e0\")\r\n            val message = Message(\r\n                \"system\",\r\n                meta.toString(),\r\n                \"2021-12-22\",\r\n                Timestamp.now(),\r\n                \"\"\r\n\r\n            )\r\n            db.collection(\"chat\")\r\n                .add(chat.toHash())\r\n                .addOnSuccessListener { documentReference ->\r\n                    db.collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .collection(\"message\")\r\n                        .add(message.toHash())\r\n                    db.collection(\"profile\")\r\n                        .document(\"${Firebase.auth.currentUser!!.uid}\")\r\n                        .collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .set(chat)\r\n\r\n                }\r\n                .addOnFailureListener { e ->\r\n                    Log.w(ContentValues.TAG, \"Error adding document\", e)\r\n                }\r\n\r\n        }\r\n        // Passing each fragment ID as a set of Ids\r\n        setupActionBarWithNavController(navController, appBarConfiguration)\r\n        navView.setupWithNavController(navController)\r\n\r\n    }\r\n\r\n    override fun onCreateOptionsMenu(menu: Menu): Boolean {\r\n        // Inflate the menu; this adds items to the action bar if it is present.\r\n        menuInflater.inflate(R.menu.drawer, menu)\r\n        return true\r\n    }\r\n\r\n    override fun onSupportNavigateUp(): Boolean {\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        return navController.navigateUp(appBarConfiguration) || super.onSupportNavigateUp()\r\n    }\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt b/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt
------ a/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt	(revision db6f0662753bfe0d8d9a8102dae42e6ff910c141)
---+++ b/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt	(date 1640484576403)
---@@ -31,11 +31,8 @@
--- import com.singularity.ipcaplus.models.Chat
--- import com.singularity.ipcaplus.models.Message
--- import com.singularity.ipcaplus.profile.ProfileActivity
----import java.lang.StringBuilder
----import java.util.Base64.getEncoder
--- import java.util.concurrent.TimeUnit
--- import javax.crypto.KeyGenerator
----import javax.crypto.SecretKey
--- import kotlin.random.Random
--- 
--- 
---Index: .idea/deploymentTargetDropDown.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"deploymentTargetDropDown\">\r\n    <targetSelectedWithDropDown>\r\n      <Target>\r\n        <type value=\"QUICK_BOOT_TARGET\" />\r\n        <deviceKey>\r\n          <Key>\r\n            <type value=\"VIRTUAL_DEVICE_PATH\" />\r\n            <value value=\"C:\\Users\\diogo\\.android\\avd\\Pixel_5_API_27.avd\" />\r\n          </Key>\r\n        </deviceKey>\r\n      </Target>\r\n    </targetSelectedWithDropDown>\r\n    <timeTargetWasSelectedWithDropDown value=\"2021-12-20T17:50:43.965935700Z\" />\r\n  </component>\r\n</project>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/.idea/deploymentTargetDropDown.xml b/.idea/deploymentTargetDropDown.xml
------ a/.idea/deploymentTargetDropDown.xml	(revision db6f0662753bfe0d8d9a8102dae42e6ff910c141)
---+++ b/.idea/deploymentTargetDropDown.xml	(date 1640484631324)
---@@ -7,11 +7,11 @@
---         <deviceKey>
---           <Key>
---             <type value="VIRTUAL_DEVICE_PATH" />
----            <value value="C:\Users\diogo\.android\avd\Pixel_5_API_27.avd" />
---+            <value value="C:\Users\diogo\.android\avd\Pixel_3_API_27.avd" />
---           </Key>
---         </deviceKey>
---       </Target>
---     </targetSelectedWithDropDown>
----    <timeTargetWasSelectedWithDropDown value="2021-12-20T17:50:43.965935700Z" />
---+    <timeTargetWasSelectedWithDropDown value="2021-12-26T02:10:29.711791600Z" />
---   </component>
--- </project>
---\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_11_PM__Default_Changelist_.xml
--===================================================================
--diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_11_PM__Default_Changelist_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_11_PM__Default_Changelist_.xml
--deleted file mode 100644
----- a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_11_PM__Default_Changelist_.xml	(revision 58133ef53033e0643a17f1f4078750cf79ef5b84)
--+++ /dev/null	(revision 58133ef53033e0643a17f1f4078750cf79ef5b84)
--@@ -1,4 +0,0 @@
---<changelist name="Uncommitted_changes_before_Update_at_12_27_2021_12_11_PM_[Default_Changelist]" date="1640607098047" recycled="true" deleted="true">
---  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_11_PM_[Default_Changelist]/shelved.patch" />
---  <option name="DESCRIPTION" value="Uncommitted changes before Update at 12/27/2021 12:11 PM [Default Changelist]" />
---</changelist>
--\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM_[Default_Changelist]/shelved.patch
--===================================================================
--diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM_[Default_Changelist]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM_[Default_Changelist]/shelved.patch
--deleted file mode 100644
----- a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM_[Default_Changelist]/shelved.patch	(revision 58133ef53033e0643a17f1f4078750cf79ef5b84)
--+++ /dev/null	(revision 58133ef53033e0643a17f1f4078750cf79ef5b84)
--@@ -1,115 +0,0 @@
---Index: app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.singularity.ipcaplus\r\n\r\nimport android.content.ContentValues\r\nimport android.content.Context\r\nimport android.content.Intent\r\nimport android.content.SharedPreferences\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport android.util.Log\r\nimport android.view.Menu\r\nimport android.view.WindowManager\r\nimport android.widget.ImageView\r\nimport androidx.drawerlayout.widget.DrawerLayout\r\nimport androidx.navigation.findNavController\r\nimport androidx.navigation.ui.AppBarConfiguration\r\nimport androidx.navigation.ui.navigateUp\r\nimport androidx.navigation.ui.setupActionBarWithNavController\r\nimport androidx.navigation.ui.setupWithNavController\r\nimport com.google.android.material.navigation.NavigationView\r\nimport com.google.android.material.snackbar.Snackbar\r\nimport com.google.firebase.Timestamp\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.firestore.ktx.firestore\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.singularity.ipcaplus.PreferenceHelper.email\r\nimport com.singularity.ipcaplus.PreferenceHelper.password\r\nimport com.singularity.ipcaplus.PreferenceHelper.userId\r\nimport com.singularity.ipcaplus.calendar.AddEventActivity\r\nimport com.singularity.ipcaplus.databinding.ActivityDrawerActivtyBinding\r\nimport com.singularity.ipcaplus.models.Chat\r\nimport com.singularity.ipcaplus.models.Message\r\nimport com.singularity.ipcaplus.profile.ProfileActivity\r\nimport java.util.concurrent.TimeUnit\r\nimport kotlin.random.Random\r\n\r\n\r\nclass DrawerActivty : AppCompatActivity() {\r\n\r\n    private lateinit var appBarConfiguration: AppBarConfiguration\r\n    private lateinit var binding: ActivityDrawerActivtyBinding\r\n\r\n    val db = Firebase.firestore\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n\r\n        binding = ActivityDrawerActivtyBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        binding.navView.getHeaderView(0).findViewById<ImageView>(R.id.imageView_profile).setOnClickListener {\r\n\r\n            val intent = Intent(this, ProfileActivity::class.java)\r\n            startActivity(intent)\r\n\r\n        }\r\n\r\n        setSupportActionBar(binding.appBarMain.toolbar)\r\n        window.setFlags(\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN,\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN);\r\n\r\n\r\n        binding.appBarMain.fabAddChat.setOnClickListener { view ->\r\n            Snackbar.make(view, \"Replace with your own action\", Snackbar.LENGTH_LONG)\r\n                .setAction(\"Action\", null).show()\r\n        }\r\n        val drawerLayout: DrawerLayout = binding.drawerLayout\r\n        val navView: NavigationView = binding.navView\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        val stampCurrent = System.currentTimeMillis()\r\n        val stampSec = TimeUnit.MILLISECONDS.toSeconds(stampCurrent)\r\n        val stampNano = TimeUnit.MILLISECONDS.toNanos(stampCurrent).toInt()\r\n        // Passing each menu ID as a set of Ids because each\r\n        // menu should be considered as top level destinations.\r\n        appBarConfiguration = AppBarConfiguration(\r\n            setOf(\r\n                R.id.nav_home\r\n            ), drawerLayout\r\n        )\r\n\r\n        // Criação de Chat\r\n        binding.appBarMain.fabAddChat.setOnClickListener {\r\n            val chat = Chat(\r\n                \"Chat Teste \" + Random.nextInt(256),\r\n                \"chat\"\r\n\r\n            )\r\n            val message = Message(\r\n                \"system\",\r\n                \"This is an Alpha Chat, bugs are expected, please report them if you found some. Welcome to Singularity!\",\r\n                \"2021-12-22\",\r\n                Timestamp.now(),\r\n                \"\"\r\n\r\n            )\r\n            db.collection(\"chat\")\r\n                .add(chat.toHash())\r\n                .addOnSuccessListener { documentReference ->\r\n                    db.collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .collection(\"message\")\r\n                        .add(message.toHash())\r\n                    db.collection(\"profile\")\r\n                        .document(\"${Firebase.auth.currentUser!!.uid}\")\r\n                        .collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .set(chat)\r\n\r\n                }\r\n                .addOnFailureListener { e ->\r\n                    Log.w(ContentValues.TAG, \"Error adding document\", e)\r\n                }\r\n\r\n        }\r\n\r\n        // Log Out Button\r\n        binding.logoutLayout.setOnClickListener {\r\n\r\n            val prefs = PreferenceHelper.customPreference(this, \"User_data\")\r\n            prefs.password = null\r\n            prefs.email = null\r\n            prefs.userId = null\r\n\r\n            val intent = Intent(this, WelcomeActivity::class.java)\r\n            startActivity(intent)\r\n        }\r\n\r\n\r\n        // Passing each fragment ID as a set of Ids\r\n        setupActionBarWithNavController(navController, appBarConfiguration)\r\n        navView.setupWithNavController(navController)\r\n\r\n    }\r\n\r\n    override fun onCreateOptionsMenu(menu: Menu): Boolean {\r\n        // Inflate the menu; this adds items to the action bar if it is present.\r\n        menuInflater.inflate(R.menu.drawer, menu)\r\n        return true\r\n    }\r\n\r\n    override fun onSupportNavigateUp(): Boolean {\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        return navController.navigateUp(appBarConfiguration) || super.onSupportNavigateUp()\r\n    }\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt b/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt
------ a/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt	(revision 94adac9c4d1446b5b44892110de1ee705a5ef903)
---+++ b/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt	(date 1640607043249)
---@@ -130,6 +130,7 @@
---         setupActionBarWithNavController(navController, appBarConfiguration)
---         navView.setupWithNavController(navController)
--- 
---+
---     }
--- 
---     override fun onCreateOptionsMenu(menu: Menu): Boolean {
---Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch
---new file mode 100644
------ /dev/null	(date 1640603575056)
---+++ b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch	(date 1640603575056)
---@@ -0,0 +1,47 @@
---+Index: app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt
---+IDEA additional info:
---+Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---+<+>package com.singularity.ipcaplus\r\n\r\nimport android.content.ContentValues\r\nimport android.content.Intent\r\nimport android.os.Build\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport java.util.Base64\r\nimport android.util.Log\r\nimport android.view.Menu\r\nimport android.view.WindowManager\r\nimport android.widget.ImageView\r\nimport androidx.annotation.RequiresApi\r\nimport androidx.drawerlayout.widget.DrawerLayout\r\nimport androidx.navigation.findNavController\r\nimport androidx.navigation.ui.AppBarConfiguration\r\nimport androidx.navigation.ui.navigateUp\r\nimport androidx.navigation.ui.setupActionBarWithNavController\r\nimport androidx.navigation.ui.setupWithNavController\r\nimport com.google.android.material.navigation.NavigationView\r\nimport com.google.android.material.snackbar.Snackbar\r\nimport com.google.firebase.Timestamp\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.firestore.ktx.firestore\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.singularity.ipcaplus.calendar.AddEventActivity\r\nimport com.singularity.ipcaplus.cryptography.decryptWithAESmeta\r\nimport com.singularity.ipcaplus.cryptography.encryptMeta\r\nimport com.singularity.ipcaplus.cryptography.metaGenrateKey\r\nimport com.singularity.ipcaplus.databinding.ActivityDrawerActivtyBinding\r\nimport com.singularity.ipcaplus.models.Chat\r\nimport com.singularity.ipcaplus.models.Message\r\nimport com.singularity.ipcaplus.profile.ProfileActivity\r\nimport java.lang.StringBuilder\r\nimport java.util.Base64.getEncoder\r\nimport java.util.concurrent.TimeUnit\r\nimport javax.crypto.KeyGenerator\r\nimport javax.crypto.SecretKey\r\nimport kotlin.random.Random\r\n\r\n\r\nclass DrawerActivty : AppCompatActivity() {\r\n\r\n    private lateinit var appBarConfiguration: AppBarConfiguration\r\n    private lateinit var binding: ActivityDrawerActivtyBinding\r\n\r\n    val db = Firebase.firestore\r\n\r\n    @RequiresApi(Build.VERSION_CODES.O)\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n\r\n        binding = ActivityDrawerActivtyBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        binding.navView.getHeaderView(0).findViewById<ImageView>(R.id.imageView_profile).setOnClickListener {\r\n\r\n            val intent = Intent(this, ProfileActivity::class.java)\r\n            startActivity(intent)\r\n\r\n        }\r\n\r\n        //val secretKey: String = \"662ede816988e58fb6d057d9d85605e0\"\r\n\r\n        /*val message = \"Hello Welcome to Solanium Dr.Diogo\"\r\n        var meta = encryptMeta(message, keygen)\r\n        println(meta)\r\n\r\n        val message_decripted = decryptWithAESmeta(keygen, meta)\r\n        println(message_decripted)*/\r\n\r\n        setSupportActionBar(binding.appBarMain.toolbar)\r\n        window.setFlags(\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN,\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN);\r\n\r\n\r\n        binding.appBarMain.fabAddChat.setOnClickListener { view ->\r\n            Snackbar.make(view, \"Replace with your own action\", Snackbar.LENGTH_LONG)\r\n                .setAction(\"Action\", null).show()\r\n        }\r\n        val drawerLayout: DrawerLayout = binding.drawerLayout\r\n        val navView: NavigationView = binding.navView\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        val stampCurrent = System.currentTimeMillis()\r\n        val stampSec = TimeUnit.MILLISECONDS.toSeconds(stampCurrent)\r\n        val stampNano = TimeUnit.MILLISECONDS.toNanos(stampCurrent).toInt()\r\n        // Passing each menu ID as a set of Ids because each\r\n        // menu should be considered as top level destinations.\r\n        appBarConfiguration = AppBarConfiguration(\r\n            setOf(\r\n                R.id.nav_home\r\n            ), drawerLayout\r\n        )\r\n\r\n        // Criação de Chat\r\n        binding.appBarMain.fabAddChat.setOnClickListener {\r\n\r\n            /*val keygen = metaGenrateKey()\r\n\r\n            val intent = Intent(this, ChatActivity::class.java)\r\n            intent.putExtra(\"keygen\", keygen)\r\n            startActivity(intent)*/\r\n\r\n            val chat = Chat(\r\n                \"Chat Teste \" + Random.nextInt(256),\r\n                \"chat\"\r\n            )\r\n\r\n            var meta = encryptMeta(\"This is an Alpha Chat, bugs are expected, please report them if you found some. Welcome to Singularity!\", \"662ede816988e58fb6d057d9d85605e0\")\r\n            val message = Message(\r\n                \"system\",\r\n                meta.toString(),\r\n                \"2021-12-22\",\r\n                Timestamp.now(),\r\n                \"\"\r\n\r\n            )\r\n            db.collection(\"chat\")\r\n                .add(chat.toHash())\r\n                .addOnSuccessListener { documentReference ->\r\n                    db.collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .collection(\"message\")\r\n                        .add(message.toHash())\r\n                    db.collection(\"profile\")\r\n                        .document(\"${Firebase.auth.currentUser!!.uid}\")\r\n                        .collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .set(chat)\r\n\r\n                }\r\n                .addOnFailureListener { e ->\r\n                    Log.w(ContentValues.TAG, \"Error adding document\", e)\r\n                }\r\n\r\n        }\r\n        // Passing each fragment ID as a set of Ids\r\n        setupActionBarWithNavController(navController, appBarConfiguration)\r\n        navView.setupWithNavController(navController)\r\n\r\n    }\r\n\r\n    override fun onCreateOptionsMenu(menu: Menu): Boolean {\r\n        // Inflate the menu; this adds items to the action bar if it is present.\r\n        menuInflater.inflate(R.menu.drawer, menu)\r\n        return true\r\n    }\r\n\r\n    override fun onSupportNavigateUp(): Boolean {\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        return navController.navigateUp(appBarConfiguration) || super.onSupportNavigateUp()\r\n    }\r\n}
---+Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---+<+>UTF-8
---+===================================================================
---+diff --git a/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt b/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt
---+--- a/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt	(revision db6f0662753bfe0d8d9a8102dae42e6ff910c141)
---++++ b/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt	(date 1640484576403)
---+@@ -31,11 +31,8 @@
---+ import com.singularity.ipcaplus.models.Chat
---+ import com.singularity.ipcaplus.models.Message
---+ import com.singularity.ipcaplus.profile.ProfileActivity
---+-import java.lang.StringBuilder
---+-import java.util.Base64.getEncoder
---+ import java.util.concurrent.TimeUnit
---+ import javax.crypto.KeyGenerator
---+-import javax.crypto.SecretKey
---+ import kotlin.random.Random
---+ 
---+ 
---+Index: .idea/deploymentTargetDropDown.xml
---+IDEA additional info:
---+Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---+<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"deploymentTargetDropDown\">\r\n    <targetSelectedWithDropDown>\r\n      <Target>\r\n        <type value=\"QUICK_BOOT_TARGET\" />\r\n        <deviceKey>\r\n          <Key>\r\n            <type value=\"VIRTUAL_DEVICE_PATH\" />\r\n            <value value=\"C:\\Users\\diogo\\.android\\avd\\Pixel_5_API_27.avd\" />\r\n          </Key>\r\n        </deviceKey>\r\n      </Target>\r\n    </targetSelectedWithDropDown>\r\n    <timeTargetWasSelectedWithDropDown value=\"2021-12-20T17:50:43.965935700Z\" />\r\n  </component>\r\n</project>
---+Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---+<+>UTF-8
---+===================================================================
---+diff --git a/.idea/deploymentTargetDropDown.xml b/.idea/deploymentTargetDropDown.xml
---+--- a/.idea/deploymentTargetDropDown.xml	(revision db6f0662753bfe0d8d9a8102dae42e6ff910c141)
---++++ b/.idea/deploymentTargetDropDown.xml	(date 1640484631324)
---+@@ -7,11 +7,11 @@
---+         <deviceKey>
---+           <Key>
---+             <type value="VIRTUAL_DEVICE_PATH" />
---+-            <value value="C:\Users\diogo\.android\avd\Pixel_5_API_27.avd" />
---++            <value value="C:\Users\diogo\.android\avd\Pixel_3_API_27.avd" />
---+           </Key>
---+         </deviceKey>
---+       </Target>
---+     </targetSelectedWithDropDown>
---+-    <timeTargetWasSelectedWithDropDown value="2021-12-20T17:50:43.965935700Z" />
---++    <timeTargetWasSelectedWithDropDown value="2021-12-26T02:10:29.711791600Z" />
---+   </component>
---+ </project>
---+\ No newline at end of file
---Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM__Default_Changelist_.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM__Default_Changelist_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM__Default_Changelist_.xml
---new file mode 100644
------ /dev/null	(date 1640603694749)
---+++ b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM__Default_Changelist_.xml	(date 1640603694749)
---@@ -0,0 +1,4 @@
---+<changelist name="Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]" date="1640603683316" recycled="true" deleted="true">
---+  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch" />
---+  <option name="DESCRIPTION" value="Uncommitted changes before Update at 12/27/2021 11:12 AM [Default Changelist]" />
---+</changelist>
---\ No newline at end of file
---Index: .idea/deploymentTargetDropDown.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"deploymentTargetDropDown\">\r\n    <targetSelectedWithDropDown>\r\n      <Target>\r\n        <type value=\"QUICK_BOOT_TARGET\" />\r\n        <deviceKey>\r\n          <Key>\r\n            <type value=\"VIRTUAL_DEVICE_PATH\" />\r\n            <value value=\"C:\\Users\\diogo\\.android\\avd\\Pixel_5_API_27.avd\" />\r\n          </Key>\r\n        </deviceKey>\r\n      </Target>\r\n    </targetSelectedWithDropDown>\r\n    <timeTargetWasSelectedWithDropDown value=\"2021-12-20T17:50:43.965935700Z\" />\r\n  </component>\r\n</project>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/.idea/deploymentTargetDropDown.xml b/.idea/deploymentTargetDropDown.xml
------ a/.idea/deploymentTargetDropDown.xml	(revision 94adac9c4d1446b5b44892110de1ee705a5ef903)
---+++ b/.idea/deploymentTargetDropDown.xml	(date 1640603683277)
---@@ -7,11 +7,11 @@
---         <deviceKey>
---           <Key>
---             <type value="VIRTUAL_DEVICE_PATH" />
----            <value value="C:\Users\diogo\.android\avd\Pixel_5_API_27.avd" />
---+            <value value="C:\Users\diogo\.android\avd\Pixel_3_API_27.avd" />
---           </Key>
---         </deviceKey>
---       </Target>
---     </targetSelectedWithDropDown>
----    <timeTargetWasSelectedWithDropDown value="2021-12-20T17:50:43.965935700Z" />
---+    <timeTargetWasSelectedWithDropDown value="2021-12-26T02:10:29.711791600Z" />
---   </component>
--- </project>
---\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_11_PM_[Default_Changelist]/shelved.patch
--===================================================================
--diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_11_PM_[Default_Changelist]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_11_PM_[Default_Changelist]/shelved.patch
--deleted file mode 100644
----- a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_11_PM_[Default_Changelist]/shelved.patch	(revision 58133ef53033e0643a17f1f4078750cf79ef5b84)
--+++ /dev/null	(revision 58133ef53033e0643a17f1f4078750cf79ef5b84)
--@@ -1,255 +0,0 @@
---Index: app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.singularity.ipcaplus\r\n\r\nimport android.content.ContentValues\r\nimport android.content.Context\r\nimport android.content.Intent\r\nimport android.content.SharedPreferences\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport android.util.Log\r\nimport android.view.Menu\r\nimport android.view.WindowManager\r\nimport android.widget.ImageView\r\nimport androidx.drawerlayout.widget.DrawerLayout\r\nimport androidx.navigation.findNavController\r\nimport androidx.navigation.ui.AppBarConfiguration\r\nimport androidx.navigation.ui.navigateUp\r\nimport androidx.navigation.ui.setupActionBarWithNavController\r\nimport androidx.navigation.ui.setupWithNavController\r\nimport com.google.android.material.navigation.NavigationView\r\nimport com.google.android.material.snackbar.Snackbar\r\nimport com.google.firebase.Timestamp\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.firestore.ktx.firestore\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.singularity.ipcaplus.PreferenceHelper.email\r\nimport com.singularity.ipcaplus.PreferenceHelper.password\r\nimport com.singularity.ipcaplus.PreferenceHelper.userId\r\nimport com.singularity.ipcaplus.calendar.AddEventActivity\r\nimport com.singularity.ipcaplus.databinding.ActivityDrawerActivtyBinding\r\nimport com.singularity.ipcaplus.models.Chat\r\nimport com.singularity.ipcaplus.models.Message\r\nimport com.singularity.ipcaplus.profile.ProfileActivity\r\nimport java.util.concurrent.TimeUnit\r\nimport kotlin.random.Random\r\n\r\n\r\nclass DrawerActivty : AppCompatActivity() {\r\n\r\n    private lateinit var appBarConfiguration: AppBarConfiguration\r\n    private lateinit var binding: ActivityDrawerActivtyBinding\r\n\r\n    val db = Firebase.firestore\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n\r\n        binding = ActivityDrawerActivtyBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        binding.navView.getHeaderView(0).findViewById<ImageView>(R.id.imageView_profile).setOnClickListener {\r\n\r\n            val intent = Intent(this, ProfileActivity::class.java)\r\n            startActivity(intent)\r\n\r\n        }\r\n\r\n        setSupportActionBar(binding.appBarMain.toolbar)\r\n        window.setFlags(\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN,\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN);\r\n\r\n\r\n        binding.appBarMain.fabAddChat.setOnClickListener { view ->\r\n            Snackbar.make(view, \"Replace with your own action\", Snackbar.LENGTH_LONG)\r\n                .setAction(\"Action\", null).show()\r\n        }\r\n        val drawerLayout: DrawerLayout = binding.drawerLayout\r\n        val navView: NavigationView = binding.navView\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        val stampCurrent = System.currentTimeMillis()\r\n        val stampSec = TimeUnit.MILLISECONDS.toSeconds(stampCurrent)\r\n        val stampNano = TimeUnit.MILLISECONDS.toNanos(stampCurrent).toInt()\r\n        // Passing each menu ID as a set of Ids because each\r\n        // menu should be considered as top level destinations.\r\n        appBarConfiguration = AppBarConfiguration(\r\n            setOf(\r\n                R.id.nav_home\r\n            ), drawerLayout\r\n        )\r\n\r\n        // Criação de Chat\r\n        binding.appBarMain.fabAddChat.setOnClickListener {\r\n            val chat = Chat(\r\n                \"Chat Teste \" + Random.nextInt(256),\r\n                \"chat\"\r\n\r\n            )\r\n            val message = Message(\r\n                \"system\",\r\n                \"This is an Alpha Chat, bugs are expected, please report them if you found some. Welcome to Singularity!\",\r\n                \"2021-12-22\",\r\n                Timestamp.now(),\r\n                \"\"\r\n\r\n            )\r\n            db.collection(\"chat\")\r\n                .add(chat.toHash())\r\n                .addOnSuccessListener { documentReference ->\r\n                    db.collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .collection(\"message\")\r\n                        .add(message.toHash())\r\n                    db.collection(\"profile\")\r\n                        .document(\"${Firebase.auth.currentUser!!.uid}\")\r\n                        .collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .set(chat)\r\n\r\n                }\r\n                .addOnFailureListener { e ->\r\n                    Log.w(ContentValues.TAG, \"Error adding document\", e)\r\n                }\r\n\r\n        }\r\n\r\n        // Log Out Button\r\n        binding.logoutLayout.setOnClickListener {\r\n\r\n            val prefs = PreferenceHelper.customPreference(this, \"User_data\")\r\n            prefs.password = null\r\n            prefs.email = null\r\n            prefs.userId = null\r\n\r\n            val intent = Intent(this, WelcomeActivity::class.java)\r\n            startActivity(intent)\r\n        }\r\n\r\n\r\n        // Passing each fragment ID as a set of Ids\r\n        setupActionBarWithNavController(navController, appBarConfiguration)\r\n        navView.setupWithNavController(navController)\r\n\r\n    }\r\n\r\n    override fun onCreateOptionsMenu(menu: Menu): Boolean {\r\n        // Inflate the menu; this adds items to the action bar if it is present.\r\n        menuInflater.inflate(R.menu.drawer, menu)\r\n        return true\r\n    }\r\n\r\n    override fun onSupportNavigateUp(): Boolean {\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        return navController.navigateUp(appBarConfiguration) || super.onSupportNavigateUp()\r\n    }\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt b/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt
------ a/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt	(revision 8dc1056a94ce651214eaf46bac161cbcb2a45bf0)
---+++ b/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt	(date 1640607045782)
---@@ -130,6 +130,7 @@
---         setupActionBarWithNavController(navController, appBarConfiguration)
---         navView.setupWithNavController(navController)
--- 
---+
---     }
--- 
---     override fun onCreateOptionsMenu(menu: Menu): Boolean {
---Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM__Default_Changelist_.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM__Default_Changelist_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM__Default_Changelist_.xml
---new file mode 100644
------ /dev/null	(date 1640607060734)
---+++ b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM__Default_Changelist_.xml	(date 1640607060734)
---@@ -0,0 +1,4 @@
---+<changelist name="Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM_[Default_Changelist]" date="1640607045965" recycled="true" deleted="true">
---+  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM_[Default_Changelist]/shelved.patch" />
---+  <option name="DESCRIPTION" value="Uncommitted changes before Update at 12/27/2021 12:10 PM [Default Changelist]" />
---+</changelist>
---\ No newline at end of file
---Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM__Default_Changelist_.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM__Default_Changelist_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM__Default_Changelist_.xml
---new file mode 100644
------ /dev/null	(date 1640607060741)
---+++ b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM__Default_Changelist_.xml	(date 1640607060741)
---@@ -0,0 +1,4 @@
---+<changelist name="Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]" date="1640603683316" recycled="true" deleted="true">
---+  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch" />
---+  <option name="DESCRIPTION" value="Uncommitted changes before Update at 12/27/2021 11:12 AM [Default Changelist]" />
---+</changelist>
---\ No newline at end of file
---Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch
---new file mode 100644
------ /dev/null	(date 1640607045791)
---+++ b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch	(date 1640607045791)
---@@ -0,0 +1,47 @@
---+Index: app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt
---+IDEA additional info:
---+Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---+<+>package com.singularity.ipcaplus\r\n\r\nimport android.content.ContentValues\r\nimport android.content.Intent\r\nimport android.os.Build\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport java.util.Base64\r\nimport android.util.Log\r\nimport android.view.Menu\r\nimport android.view.WindowManager\r\nimport android.widget.ImageView\r\nimport androidx.annotation.RequiresApi\r\nimport androidx.drawerlayout.widget.DrawerLayout\r\nimport androidx.navigation.findNavController\r\nimport androidx.navigation.ui.AppBarConfiguration\r\nimport androidx.navigation.ui.navigateUp\r\nimport androidx.navigation.ui.setupActionBarWithNavController\r\nimport androidx.navigation.ui.setupWithNavController\r\nimport com.google.android.material.navigation.NavigationView\r\nimport com.google.android.material.snackbar.Snackbar\r\nimport com.google.firebase.Timestamp\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.firestore.ktx.firestore\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.singularity.ipcaplus.calendar.AddEventActivity\r\nimport com.singularity.ipcaplus.cryptography.decryptWithAESmeta\r\nimport com.singularity.ipcaplus.cryptography.encryptMeta\r\nimport com.singularity.ipcaplus.cryptography.metaGenrateKey\r\nimport com.singularity.ipcaplus.databinding.ActivityDrawerActivtyBinding\r\nimport com.singularity.ipcaplus.models.Chat\r\nimport com.singularity.ipcaplus.models.Message\r\nimport com.singularity.ipcaplus.profile.ProfileActivity\r\nimport java.lang.StringBuilder\r\nimport java.util.Base64.getEncoder\r\nimport java.util.concurrent.TimeUnit\r\nimport javax.crypto.KeyGenerator\r\nimport javax.crypto.SecretKey\r\nimport kotlin.random.Random\r\n\r\n\r\nclass DrawerActivty : AppCompatActivity() {\r\n\r\n    private lateinit var appBarConfiguration: AppBarConfiguration\r\n    private lateinit var binding: ActivityDrawerActivtyBinding\r\n\r\n    val db = Firebase.firestore\r\n\r\n    @RequiresApi(Build.VERSION_CODES.O)\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n\r\n        binding = ActivityDrawerActivtyBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        binding.navView.getHeaderView(0).findViewById<ImageView>(R.id.imageView_profile).setOnClickListener {\r\n\r\n            val intent = Intent(this, ProfileActivity::class.java)\r\n            startActivity(intent)\r\n\r\n        }\r\n\r\n        //val secretKey: String = \"662ede816988e58fb6d057d9d85605e0\"\r\n\r\n        /*val message = \"Hello Welcome to Solanium Dr.Diogo\"\r\n        var meta = encryptMeta(message, keygen)\r\n        println(meta)\r\n\r\n        val message_decripted = decryptWithAESmeta(keygen, meta)\r\n        println(message_decripted)*/\r\n\r\n        setSupportActionBar(binding.appBarMain.toolbar)\r\n        window.setFlags(\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN,\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN);\r\n\r\n\r\n        binding.appBarMain.fabAddChat.setOnClickListener { view ->\r\n            Snackbar.make(view, \"Replace with your own action\", Snackbar.LENGTH_LONG)\r\n                .setAction(\"Action\", null).show()\r\n        }\r\n        val drawerLayout: DrawerLayout = binding.drawerLayout\r\n        val navView: NavigationView = binding.navView\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        val stampCurrent = System.currentTimeMillis()\r\n        val stampSec = TimeUnit.MILLISECONDS.toSeconds(stampCurrent)\r\n        val stampNano = TimeUnit.MILLISECONDS.toNanos(stampCurrent).toInt()\r\n        // Passing each menu ID as a set of Ids because each\r\n        // menu should be considered as top level destinations.\r\n        appBarConfiguration = AppBarConfiguration(\r\n            setOf(\r\n                R.id.nav_home\r\n            ), drawerLayout\r\n        )\r\n\r\n        // Criação de Chat\r\n        binding.appBarMain.fabAddChat.setOnClickListener {\r\n\r\n            /*val keygen = metaGenrateKey()\r\n\r\n            val intent = Intent(this, ChatActivity::class.java)\r\n            intent.putExtra(\"keygen\", keygen)\r\n            startActivity(intent)*/\r\n\r\n            val chat = Chat(\r\n                \"Chat Teste \" + Random.nextInt(256),\r\n                \"chat\"\r\n            )\r\n\r\n            var meta = encryptMeta(\"This is an Alpha Chat, bugs are expected, please report them if you found some. Welcome to Singularity!\", \"662ede816988e58fb6d057d9d85605e0\")\r\n            val message = Message(\r\n                \"system\",\r\n                meta.toString(),\r\n                \"2021-12-22\",\r\n                Timestamp.now(),\r\n                \"\"\r\n\r\n            )\r\n            db.collection(\"chat\")\r\n                .add(chat.toHash())\r\n                .addOnSuccessListener { documentReference ->\r\n                    db.collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .collection(\"message\")\r\n                        .add(message.toHash())\r\n                    db.collection(\"profile\")\r\n                        .document(\"${Firebase.auth.currentUser!!.uid}\")\r\n                        .collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .set(chat)\r\n\r\n                }\r\n                .addOnFailureListener { e ->\r\n                    Log.w(ContentValues.TAG, \"Error adding document\", e)\r\n                }\r\n\r\n        }\r\n        // Passing each fragment ID as a set of Ids\r\n        setupActionBarWithNavController(navController, appBarConfiguration)\r\n        navView.setupWithNavController(navController)\r\n\r\n    }\r\n\r\n    override fun onCreateOptionsMenu(menu: Menu): Boolean {\r\n        // Inflate the menu; this adds items to the action bar if it is present.\r\n        menuInflater.inflate(R.menu.drawer, menu)\r\n        return true\r\n    }\r\n\r\n    override fun onSupportNavigateUp(): Boolean {\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        return navController.navigateUp(appBarConfiguration) || super.onSupportNavigateUp()\r\n    }\r\n}
---+Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---+<+>UTF-8
---+===================================================================
---+diff --git a/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt b/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt
---+--- a/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt	(revision db6f0662753bfe0d8d9a8102dae42e6ff910c141)
---++++ b/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt	(date 1640484576403)
---+@@ -31,11 +31,8 @@
---+ import com.singularity.ipcaplus.models.Chat
---+ import com.singularity.ipcaplus.models.Message
---+ import com.singularity.ipcaplus.profile.ProfileActivity
---+-import java.lang.StringBuilder
---+-import java.util.Base64.getEncoder
---+ import java.util.concurrent.TimeUnit
---+ import javax.crypto.KeyGenerator
---+-import javax.crypto.SecretKey
---+ import kotlin.random.Random
---+ 
---+ 
---+Index: .idea/deploymentTargetDropDown.xml
---+IDEA additional info:
---+Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---+<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"deploymentTargetDropDown\">\r\n    <targetSelectedWithDropDown>\r\n      <Target>\r\n        <type value=\"QUICK_BOOT_TARGET\" />\r\n        <deviceKey>\r\n          <Key>\r\n            <type value=\"VIRTUAL_DEVICE_PATH\" />\r\n            <value value=\"C:\\Users\\diogo\\.android\\avd\\Pixel_5_API_27.avd\" />\r\n          </Key>\r\n        </deviceKey>\r\n      </Target>\r\n    </targetSelectedWithDropDown>\r\n    <timeTargetWasSelectedWithDropDown value=\"2021-12-20T17:50:43.965935700Z\" />\r\n  </component>\r\n</project>
---+Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---+<+>UTF-8
---+===================================================================
---+diff --git a/.idea/deploymentTargetDropDown.xml b/.idea/deploymentTargetDropDown.xml
---+--- a/.idea/deploymentTargetDropDown.xml	(revision db6f0662753bfe0d8d9a8102dae42e6ff910c141)
---++++ b/.idea/deploymentTargetDropDown.xml	(date 1640484631324)
---+@@ -7,11 +7,11 @@
---+         <deviceKey>
---+           <Key>
---+             <type value="VIRTUAL_DEVICE_PATH" />
---+-            <value value="C:\Users\diogo\.android\avd\Pixel_5_API_27.avd" />
---++            <value value="C:\Users\diogo\.android\avd\Pixel_3_API_27.avd" />
---+           </Key>
---+         </deviceKey>
---+       </Target>
---+     </targetSelectedWithDropDown>
---+-    <timeTargetWasSelectedWithDropDown value="2021-12-20T17:50:43.965935700Z" />
---++    <timeTargetWasSelectedWithDropDown value="2021-12-26T02:10:29.711791600Z" />
---+   </component>
---+ </project>
---+\ No newline at end of file
---Index: .idea/deploymentTargetDropDown.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"deploymentTargetDropDown\">\r\n    <targetSelectedWithDropDown>\r\n      <Target>\r\n        <type value=\"QUICK_BOOT_TARGET\" />\r\n        <deviceKey>\r\n          <Key>\r\n            <type value=\"VIRTUAL_DEVICE_PATH\" />\r\n            <value value=\"C:\\Users\\diogo\\.android\\avd\\Pixel_5_API_27.avd\" />\r\n          </Key>\r\n        </deviceKey>\r\n      </Target>\r\n    </targetSelectedWithDropDown>\r\n    <timeTargetWasSelectedWithDropDown value=\"2021-12-20T17:50:43.965935700Z\" />\r\n  </component>\r\n</project>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/.idea/deploymentTargetDropDown.xml b/.idea/deploymentTargetDropDown.xml
------ a/.idea/deploymentTargetDropDown.xml	(revision 8dc1056a94ce651214eaf46bac161cbcb2a45bf0)
---+++ b/.idea/deploymentTargetDropDown.xml	(date 1640607045802)
---@@ -7,11 +7,11 @@
---         <deviceKey>
---           <Key>
---             <type value="VIRTUAL_DEVICE_PATH" />
----            <value value="C:\Users\diogo\.android\avd\Pixel_5_API_27.avd" />
---+            <value value="C:\Users\diogo\.android\avd\Pixel_3_API_27.avd" />
---           </Key>
---         </deviceKey>
---       </Target>
---     </targetSelectedWithDropDown>
----    <timeTargetWasSelectedWithDropDown value="2021-12-20T17:50:43.965935700Z" />
---+    <timeTargetWasSelectedWithDropDown value="2021-12-26T02:10:29.711791600Z" />
---   </component>
--- </project>
---\ No newline at end of file
---Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM_[Default_Changelist]/shelved.patch
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM_[Default_Changelist]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM_[Default_Changelist]/shelved.patch
---new file mode 100644
------ /dev/null	(date 1640607045101)
---+++ b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM_[Default_Changelist]/shelved.patch	(date 1640607045101)
---@@ -0,0 +1,115 @@
---+Index: app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt
---+IDEA additional info:
---+Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---+<+>package com.singularity.ipcaplus\r\n\r\nimport android.content.ContentValues\r\nimport android.content.Context\r\nimport android.content.Intent\r\nimport android.content.SharedPreferences\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport android.util.Log\r\nimport android.view.Menu\r\nimport android.view.WindowManager\r\nimport android.widget.ImageView\r\nimport androidx.drawerlayout.widget.DrawerLayout\r\nimport androidx.navigation.findNavController\r\nimport androidx.navigation.ui.AppBarConfiguration\r\nimport androidx.navigation.ui.navigateUp\r\nimport androidx.navigation.ui.setupActionBarWithNavController\r\nimport androidx.navigation.ui.setupWithNavController\r\nimport com.google.android.material.navigation.NavigationView\r\nimport com.google.android.material.snackbar.Snackbar\r\nimport com.google.firebase.Timestamp\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.firestore.ktx.firestore\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.singularity.ipcaplus.PreferenceHelper.email\r\nimport com.singularity.ipcaplus.PreferenceHelper.password\r\nimport com.singularity.ipcaplus.PreferenceHelper.userId\r\nimport com.singularity.ipcaplus.calendar.AddEventActivity\r\nimport com.singularity.ipcaplus.databinding.ActivityDrawerActivtyBinding\r\nimport com.singularity.ipcaplus.models.Chat\r\nimport com.singularity.ipcaplus.models.Message\r\nimport com.singularity.ipcaplus.profile.ProfileActivity\r\nimport java.util.concurrent.TimeUnit\r\nimport kotlin.random.Random\r\n\r\n\r\nclass DrawerActivty : AppCompatActivity() {\r\n\r\n    private lateinit var appBarConfiguration: AppBarConfiguration\r\n    private lateinit var binding: ActivityDrawerActivtyBinding\r\n\r\n    val db = Firebase.firestore\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n\r\n        binding = ActivityDrawerActivtyBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        binding.navView.getHeaderView(0).findViewById<ImageView>(R.id.imageView_profile).setOnClickListener {\r\n\r\n            val intent = Intent(this, ProfileActivity::class.java)\r\n            startActivity(intent)\r\n\r\n        }\r\n\r\n        setSupportActionBar(binding.appBarMain.toolbar)\r\n        window.setFlags(\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN,\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN);\r\n\r\n\r\n        binding.appBarMain.fabAddChat.setOnClickListener { view ->\r\n            Snackbar.make(view, \"Replace with your own action\", Snackbar.LENGTH_LONG)\r\n                .setAction(\"Action\", null).show()\r\n        }\r\n        val drawerLayout: DrawerLayout = binding.drawerLayout\r\n        val navView: NavigationView = binding.navView\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        val stampCurrent = System.currentTimeMillis()\r\n        val stampSec = TimeUnit.MILLISECONDS.toSeconds(stampCurrent)\r\n        val stampNano = TimeUnit.MILLISECONDS.toNanos(stampCurrent).toInt()\r\n        // Passing each menu ID as a set of Ids because each\r\n        // menu should be considered as top level destinations.\r\n        appBarConfiguration = AppBarConfiguration(\r\n            setOf(\r\n                R.id.nav_home\r\n            ), drawerLayout\r\n        )\r\n\r\n        // Criação de Chat\r\n        binding.appBarMain.fabAddChat.setOnClickListener {\r\n            val chat = Chat(\r\n                \"Chat Teste \" + Random.nextInt(256),\r\n                \"chat\"\r\n\r\n            )\r\n            val message = Message(\r\n                \"system\",\r\n                \"This is an Alpha Chat, bugs are expected, please report them if you found some. Welcome to Singularity!\",\r\n                \"2021-12-22\",\r\n                Timestamp.now(),\r\n                \"\"\r\n\r\n            )\r\n            db.collection(\"chat\")\r\n                .add(chat.toHash())\r\n                .addOnSuccessListener { documentReference ->\r\n                    db.collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .collection(\"message\")\r\n                        .add(message.toHash())\r\n                    db.collection(\"profile\")\r\n                        .document(\"${Firebase.auth.currentUser!!.uid}\")\r\n                        .collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .set(chat)\r\n\r\n                }\r\n                .addOnFailureListener { e ->\r\n                    Log.w(ContentValues.TAG, \"Error adding document\", e)\r\n                }\r\n\r\n        }\r\n\r\n        // Log Out Button\r\n        binding.logoutLayout.setOnClickListener {\r\n\r\n            val prefs = PreferenceHelper.customPreference(this, \"User_data\")\r\n            prefs.password = null\r\n            prefs.email = null\r\n            prefs.userId = null\r\n\r\n            val intent = Intent(this, WelcomeActivity::class.java)\r\n            startActivity(intent)\r\n        }\r\n\r\n\r\n        // Passing each fragment ID as a set of Ids\r\n        setupActionBarWithNavController(navController, appBarConfiguration)\r\n        navView.setupWithNavController(navController)\r\n\r\n    }\r\n\r\n    override fun onCreateOptionsMenu(menu: Menu): Boolean {\r\n        // Inflate the menu; this adds items to the action bar if it is present.\r\n        menuInflater.inflate(R.menu.drawer, menu)\r\n        return true\r\n    }\r\n\r\n    override fun onSupportNavigateUp(): Boolean {\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        return navController.navigateUp(appBarConfiguration) || super.onSupportNavigateUp()\r\n    }\r\n}
---+Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---+<+>UTF-8
---+===================================================================
---+diff --git a/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt b/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt
---+--- a/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt	(revision 94adac9c4d1446b5b44892110de1ee705a5ef903)
---++++ b/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt	(date 1640607043249)
---+@@ -130,6 +130,7 @@
---+         setupActionBarWithNavController(navController, appBarConfiguration)
---+         navView.setupWithNavController(navController)
---+ 
---++
---+     }
---+ 
---+     override fun onCreateOptionsMenu(menu: Menu): Boolean {
---+Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch
---+IDEA additional info:
---+Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---+<+>UTF-8
---+===================================================================
---+diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch
---+new file mode 100644
---+--- /dev/null	(date 1640603575056)
---++++ b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch	(date 1640603575056)
---+@@ -0,0 +1,47 @@
---++Index: app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt
---++IDEA additional info:
---++Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---++<+>package com.singularity.ipcaplus\r\n\r\nimport android.content.ContentValues\r\nimport android.content.Intent\r\nimport android.os.Build\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport java.util.Base64\r\nimport android.util.Log\r\nimport android.view.Menu\r\nimport android.view.WindowManager\r\nimport android.widget.ImageView\r\nimport androidx.annotation.RequiresApi\r\nimport androidx.drawerlayout.widget.DrawerLayout\r\nimport androidx.navigation.findNavController\r\nimport androidx.navigation.ui.AppBarConfiguration\r\nimport androidx.navigation.ui.navigateUp\r\nimport androidx.navigation.ui.setupActionBarWithNavController\r\nimport androidx.navigation.ui.setupWithNavController\r\nimport com.google.android.material.navigation.NavigationView\r\nimport com.google.android.material.snackbar.Snackbar\r\nimport com.google.firebase.Timestamp\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.firestore.ktx.firestore\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.singularity.ipcaplus.calendar.AddEventActivity\r\nimport com.singularity.ipcaplus.cryptography.decryptWithAESmeta\r\nimport com.singularity.ipcaplus.cryptography.encryptMeta\r\nimport com.singularity.ipcaplus.cryptography.metaGenrateKey\r\nimport com.singularity.ipcaplus.databinding.ActivityDrawerActivtyBinding\r\nimport com.singularity.ipcaplus.models.Chat\r\nimport com.singularity.ipcaplus.models.Message\r\nimport com.singularity.ipcaplus.profile.ProfileActivity\r\nimport java.lang.StringBuilder\r\nimport java.util.Base64.getEncoder\r\nimport java.util.concurrent.TimeUnit\r\nimport javax.crypto.KeyGenerator\r\nimport javax.crypto.SecretKey\r\nimport kotlin.random.Random\r\n\r\n\r\nclass DrawerActivty : AppCompatActivity() {\r\n\r\n    private lateinit var appBarConfiguration: AppBarConfiguration\r\n    private lateinit var binding: ActivityDrawerActivtyBinding\r\n\r\n    val db = Firebase.firestore\r\n\r\n    @RequiresApi(Build.VERSION_CODES.O)\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n\r\n        binding = ActivityDrawerActivtyBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        binding.navView.getHeaderView(0).findViewById<ImageView>(R.id.imageView_profile).setOnClickListener {\r\n\r\n            val intent = Intent(this, ProfileActivity::class.java)\r\n            startActivity(intent)\r\n\r\n        }\r\n\r\n        //val secretKey: String = \"662ede816988e58fb6d057d9d85605e0\"\r\n\r\n        /*val message = \"Hello Welcome to Solanium Dr.Diogo\"\r\n        var meta = encryptMeta(message, keygen)\r\n        println(meta)\r\n\r\n        val message_decripted = decryptWithAESmeta(keygen, meta)\r\n        println(message_decripted)*/\r\n\r\n        setSupportActionBar(binding.appBarMain.toolbar)\r\n        window.setFlags(\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN,\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN);\r\n\r\n\r\n        binding.appBarMain.fabAddChat.setOnClickListener { view ->\r\n            Snackbar.make(view, \"Replace with your own action\", Snackbar.LENGTH_LONG)\r\n                .setAction(\"Action\", null).show()\r\n        }\r\n        val drawerLayout: DrawerLayout = binding.drawerLayout\r\n        val navView: NavigationView = binding.navView\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        val stampCurrent = System.currentTimeMillis()\r\n        val stampSec = TimeUnit.MILLISECONDS.toSeconds(stampCurrent)\r\n        val stampNano = TimeUnit.MILLISECONDS.toNanos(stampCurrent).toInt()\r\n        // Passing each menu ID as a set of Ids because each\r\n        // menu should be considered as top level destinations.\r\n        appBarConfiguration = AppBarConfiguration(\r\n            setOf(\r\n                R.id.nav_home\r\n            ), drawerLayout\r\n        )\r\n\r\n        // Criação de Chat\r\n        binding.appBarMain.fabAddChat.setOnClickListener {\r\n\r\n            /*val keygen = metaGenrateKey()\r\n\r\n            val intent = Intent(this, ChatActivity::class.java)\r\n            intent.putExtra(\"keygen\", keygen)\r\n            startActivity(intent)*/\r\n\r\n            val chat = Chat(\r\n                \"Chat Teste \" + Random.nextInt(256),\r\n                \"chat\"\r\n            )\r\n\r\n            var meta = encryptMeta(\"This is an Alpha Chat, bugs are expected, please report them if you found some. Welcome to Singularity!\", \"662ede816988e58fb6d057d9d85605e0\")\r\n            val message = Message(\r\n                \"system\",\r\n                meta.toString(),\r\n                \"2021-12-22\",\r\n                Timestamp.now(),\r\n                \"\"\r\n\r\n            )\r\n            db.collection(\"chat\")\r\n                .add(chat.toHash())\r\n                .addOnSuccessListener { documentReference ->\r\n                    db.collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .collection(\"message\")\r\n                        .add(message.toHash())\r\n                    db.collection(\"profile\")\r\n                        .document(\"${Firebase.auth.currentUser!!.uid}\")\r\n                        .collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .set(chat)\r\n\r\n                }\r\n                .addOnFailureListener { e ->\r\n                    Log.w(ContentValues.TAG, \"Error adding document\", e)\r\n                }\r\n\r\n        }\r\n        // Passing each fragment ID as a set of Ids\r\n        setupActionBarWithNavController(navController, appBarConfiguration)\r\n        navView.setupWithNavController(navController)\r\n\r\n    }\r\n\r\n    override fun onCreateOptionsMenu(menu: Menu): Boolean {\r\n        // Inflate the menu; this adds items to the action bar if it is present.\r\n        menuInflater.inflate(R.menu.drawer, menu)\r\n        return true\r\n    }\r\n\r\n    override fun onSupportNavigateUp(): Boolean {\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        return navController.navigateUp(appBarConfiguration) || super.onSupportNavigateUp()\r\n    }\r\n}
---++Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---++<+>UTF-8
---++===================================================================
---++diff --git a/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt b/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt
---++--- a/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt	(revision db6f0662753bfe0d8d9a8102dae42e6ff910c141)
---+++++ b/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt	(date 1640484576403)
---++@@ -31,11 +31,8 @@
---++ import com.singularity.ipcaplus.models.Chat
---++ import com.singularity.ipcaplus.models.Message
---++ import com.singularity.ipcaplus.profile.ProfileActivity
---++-import java.lang.StringBuilder
---++-import java.util.Base64.getEncoder
---++ import java.util.concurrent.TimeUnit
---++ import javax.crypto.KeyGenerator
---++-import javax.crypto.SecretKey
---++ import kotlin.random.Random
---++ 
---++ 
---++Index: .idea/deploymentTargetDropDown.xml
---++IDEA additional info:
---++Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---++<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"deploymentTargetDropDown\">\r\n    <targetSelectedWithDropDown>\r\n      <Target>\r\n        <type value=\"QUICK_BOOT_TARGET\" />\r\n        <deviceKey>\r\n          <Key>\r\n            <type value=\"VIRTUAL_DEVICE_PATH\" />\r\n            <value value=\"C:\\Users\\diogo\\.android\\avd\\Pixel_5_API_27.avd\" />\r\n          </Key>\r\n        </deviceKey>\r\n      </Target>\r\n    </targetSelectedWithDropDown>\r\n    <timeTargetWasSelectedWithDropDown value=\"2021-12-20T17:50:43.965935700Z\" />\r\n  </component>\r\n</project>
---++Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---++<+>UTF-8
---++===================================================================
---++diff --git a/.idea/deploymentTargetDropDown.xml b/.idea/deploymentTargetDropDown.xml
---++--- a/.idea/deploymentTargetDropDown.xml	(revision db6f0662753bfe0d8d9a8102dae42e6ff910c141)
---+++++ b/.idea/deploymentTargetDropDown.xml	(date 1640484631324)
---++@@ -7,11 +7,11 @@
---++         <deviceKey>
---++           <Key>
---++             <type value="VIRTUAL_DEVICE_PATH" />
---++-            <value value="C:\Users\diogo\.android\avd\Pixel_5_API_27.avd" />
---+++            <value value="C:\Users\diogo\.android\avd\Pixel_3_API_27.avd" />
---++           </Key>
---++         </deviceKey>
---++       </Target>
---++     </targetSelectedWithDropDown>
---++-    <timeTargetWasSelectedWithDropDown value="2021-12-20T17:50:43.965935700Z" />
---+++    <timeTargetWasSelectedWithDropDown value="2021-12-26T02:10:29.711791600Z" />
---++   </component>
---++ </project>
---++\ No newline at end of file
---+Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM__Default_Changelist_.xml
---+IDEA additional info:
---+Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---+<+>UTF-8
---+===================================================================
---+diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM__Default_Changelist_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM__Default_Changelist_.xml
---+new file mode 100644
---+--- /dev/null	(date 1640603694749)
---++++ b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM__Default_Changelist_.xml	(date 1640603694749)
---+@@ -0,0 +1,4 @@
---++<changelist name="Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]" date="1640603683316" recycled="true" deleted="true">
---++  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch" />
---++  <option name="DESCRIPTION" value="Uncommitted changes before Update at 12/27/2021 11:12 AM [Default Changelist]" />
---++</changelist>
---+\ No newline at end of file
---+Index: .idea/deploymentTargetDropDown.xml
---+IDEA additional info:
---+Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---+<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"deploymentTargetDropDown\">\r\n    <targetSelectedWithDropDown>\r\n      <Target>\r\n        <type value=\"QUICK_BOOT_TARGET\" />\r\n        <deviceKey>\r\n          <Key>\r\n            <type value=\"VIRTUAL_DEVICE_PATH\" />\r\n            <value value=\"C:\\Users\\diogo\\.android\\avd\\Pixel_5_API_27.avd\" />\r\n          </Key>\r\n        </deviceKey>\r\n      </Target>\r\n    </targetSelectedWithDropDown>\r\n    <timeTargetWasSelectedWithDropDown value=\"2021-12-20T17:50:43.965935700Z\" />\r\n  </component>\r\n</project>
---+Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---+<+>UTF-8
---+===================================================================
---+diff --git a/.idea/deploymentTargetDropDown.xml b/.idea/deploymentTargetDropDown.xml
---+--- a/.idea/deploymentTargetDropDown.xml	(revision 94adac9c4d1446b5b44892110de1ee705a5ef903)
---++++ b/.idea/deploymentTargetDropDown.xml	(date 1640603683277)
---+@@ -7,11 +7,11 @@
---+         <deviceKey>
---+           <Key>
---+             <type value="VIRTUAL_DEVICE_PATH" />
---+-            <value value="C:\Users\diogo\.android\avd\Pixel_5_API_27.avd" />
---++            <value value="C:\Users\diogo\.android\avd\Pixel_3_API_27.avd" />
---+           </Key>
---+         </deviceKey>
---+       </Target>
---+     </targetSelectedWithDropDown>
---+-    <timeTargetWasSelectedWithDropDown value="2021-12-20T17:50:43.965935700Z" />
---++    <timeTargetWasSelectedWithDropDown value="2021-12-26T02:10:29.711791600Z" />
---+   </component>
---+ </project>
---+\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM__Default_Changelist_.xml
--===================================================================
--diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM__Default_Changelist_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM__Default_Changelist_.xml
--deleted file mode 100644
----- a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM__Default_Changelist_.xml	(revision 58133ef53033e0643a17f1f4078750cf79ef5b84)
--+++ /dev/null	(revision 58133ef53033e0643a17f1f4078750cf79ef5b84)
--@@ -1,4 +0,0 @@
---<changelist name="Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]" date="1640603683316" recycled="true" deleted="true">
---  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch" />
---  <option name="DESCRIPTION" value="Uncommitted changes before Update at 12/27/2021 11:12 AM [Default Changelist]" />
---</changelist>
--\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_3_06_PM__Default_Changelist_.xml
--===================================================================
--diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_3_06_PM__Default_Changelist_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_3_06_PM__Default_Changelist_.xml
--deleted file mode 100644
----- a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_3_06_PM__Default_Changelist_.xml	(revision 58133ef53033e0643a17f1f4078750cf79ef5b84)
--+++ /dev/null	(revision 58133ef53033e0643a17f1f4078750cf79ef5b84)
--@@ -1,4 +0,0 @@
---<changelist name="Uncommitted_changes_before_Update_at_12_27_2021_3_06_PM_[Default_Changelist]" date="1640617599712" recycled="true" deleted="true">
---  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_3_06_PM_[Default_Changelist]/shelved.patch" />
---  <option name="DESCRIPTION" value="Uncommitted changes before Update at 12/27/2021 3:06 PM [Default Changelist]" />
---</changelist>
--\ No newline at end of file
--Index: app/src/main/java/com/singularity/ipcaplus/Alerts.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/singularity/ipcaplus/Alerts.kt b/app/src/main/java/com/singularity/ipcaplus/Alerts.kt
--new file mode 100644
----- /dev/null	(date 1641230309317)
--+++ b/app/src/main/java/com/singularity/ipcaplus/Alerts.kt	(date 1641230309317)
--@@ -0,0 +1,32 @@
--+package com.singularity.ipcaplus
--+
--+import android.app.Activity
--+import android.view.Gravity
--+import android.view.View
--+import android.widget.Button
--+import android.widget.TextView
--+import androidx.appcompat.app.AlertDialog
--+import kotlinx.coroutines.*
--+
--+fun alertNotificatio(context: Activity, message: String) : AlertDialog {
--+
--+    val dialogView: View = context.layoutInflater.inflate(R.layout.alert_discard, null)
--+
--+    val builder = AlertDialog.Builder(context)
--+    builder.setCancelable(false)
--+    builder.setView(dialogView)
--+    val alertDialog = builder.create()
--+
--+    alertDialog.window?.setGravity(Gravity.CENTER)
--+    alertDialog.window?.setBackgroundDrawableResource(android.R.color.transparent)
--+    val textViewTitle = dialogView.findViewById<TextView>(R.id.textViewAlertMessage)
--+    textViewTitle.text = message
--+
--+    alertDialog.show()
--+
--+    GlobalScope.launch (Dispatchers.Main){
--+        delay(2000)
--+        alertDialog.dismiss()
--+    }
--+    return alertDialog
--+}
--\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_03_01_2022_15_56_[Default_Changelist]/shelved.patch
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_03_01_2022_15_56_[Default_Changelist]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_03_01_2022_15_56_[Default_Changelist]/shelved.patch
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_03_01_2022_15_56_[Default_Changelist]/shelved.patch	(revision 61aecb98de8cc827aadb6472252112d5a0bddc54)
-+++ /dev/null	(revision 61aecb98de8cc827aadb6472252112d5a0bddc54)
-@@ -1,778 +0,0 @@
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_11_PM__Default_Changelist_.xml
--===================================================================
--diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_11_PM__Default_Changelist_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_11_PM__Default_Changelist_.xml
--deleted file mode 100644
----- a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_11_PM__Default_Changelist_.xml	(revision 6357a5bbd27af02f311f8311dcf2ebf10c453e1f)
--+++ /dev/null	(revision 6357a5bbd27af02f311f8311dcf2ebf10c453e1f)
--@@ -1,4 +0,0 @@
---<changelist name="Uncommitted_changes_before_Update_at_12_27_2021_12_11_PM_[Default_Changelist]" date="1640607098047" recycled="true" deleted="true">
---  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_11_PM_[Default_Changelist]/shelved.patch" />
---  <option name="DESCRIPTION" value="Uncommitted changes before Update at 12/27/2021 12:11 PM [Default Changelist]" />
---</changelist>
--\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM__Default_Changelist_.xml
--===================================================================
--diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM__Default_Changelist_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM__Default_Changelist_.xml
--deleted file mode 100644
----- a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM__Default_Changelist_.xml	(revision 6357a5bbd27af02f311f8311dcf2ebf10c453e1f)
--+++ /dev/null	(revision 6357a5bbd27af02f311f8311dcf2ebf10c453e1f)
--@@ -1,4 +0,0 @@
---<changelist name="Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM_[Default_Changelist]" date="1640607045965" recycled="true" deleted="true">
---  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM_[Default_Changelist]/shelved.patch" />
---  <option name="DESCRIPTION" value="Uncommitted changes before Update at 12/27/2021 12:10 PM [Default Changelist]" />
---</changelist>
--\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM_[Default_Changelist]/shelved.patch
--===================================================================
--diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM_[Default_Changelist]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM_[Default_Changelist]/shelved.patch
--deleted file mode 100644
----- a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM_[Default_Changelist]/shelved.patch	(revision 6357a5bbd27af02f311f8311dcf2ebf10c453e1f)
--+++ /dev/null	(revision 6357a5bbd27af02f311f8311dcf2ebf10c453e1f)
--@@ -1,115 +0,0 @@
---Index: app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.singularity.ipcaplus\r\n\r\nimport android.content.ContentValues\r\nimport android.content.Context\r\nimport android.content.Intent\r\nimport android.content.SharedPreferences\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport android.util.Log\r\nimport android.view.Menu\r\nimport android.view.WindowManager\r\nimport android.widget.ImageView\r\nimport androidx.drawerlayout.widget.DrawerLayout\r\nimport androidx.navigation.findNavController\r\nimport androidx.navigation.ui.AppBarConfiguration\r\nimport androidx.navigation.ui.navigateUp\r\nimport androidx.navigation.ui.setupActionBarWithNavController\r\nimport androidx.navigation.ui.setupWithNavController\r\nimport com.google.android.material.navigation.NavigationView\r\nimport com.google.android.material.snackbar.Snackbar\r\nimport com.google.firebase.Timestamp\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.firestore.ktx.firestore\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.singularity.ipcaplus.PreferenceHelper.email\r\nimport com.singularity.ipcaplus.PreferenceHelper.password\r\nimport com.singularity.ipcaplus.PreferenceHelper.userId\r\nimport com.singularity.ipcaplus.calendar.AddEventActivity\r\nimport com.singularity.ipcaplus.databinding.ActivityDrawerActivtyBinding\r\nimport com.singularity.ipcaplus.models.Chat\r\nimport com.singularity.ipcaplus.models.Message\r\nimport com.singularity.ipcaplus.profile.ProfileActivity\r\nimport java.util.concurrent.TimeUnit\r\nimport kotlin.random.Random\r\n\r\n\r\nclass DrawerActivty : AppCompatActivity() {\r\n\r\n    private lateinit var appBarConfiguration: AppBarConfiguration\r\n    private lateinit var binding: ActivityDrawerActivtyBinding\r\n\r\n    val db = Firebase.firestore\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n\r\n        binding = ActivityDrawerActivtyBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        binding.navView.getHeaderView(0).findViewById<ImageView>(R.id.imageView_profile).setOnClickListener {\r\n\r\n            val intent = Intent(this, ProfileActivity::class.java)\r\n            startActivity(intent)\r\n\r\n        }\r\n\r\n        setSupportActionBar(binding.appBarMain.toolbar)\r\n        window.setFlags(\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN,\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN);\r\n\r\n\r\n        binding.appBarMain.fabAddChat.setOnClickListener { view ->\r\n            Snackbar.make(view, \"Replace with your own action\", Snackbar.LENGTH_LONG)\r\n                .setAction(\"Action\", null).show()\r\n        }\r\n        val drawerLayout: DrawerLayout = binding.drawerLayout\r\n        val navView: NavigationView = binding.navView\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        val stampCurrent = System.currentTimeMillis()\r\n        val stampSec = TimeUnit.MILLISECONDS.toSeconds(stampCurrent)\r\n        val stampNano = TimeUnit.MILLISECONDS.toNanos(stampCurrent).toInt()\r\n        // Passing each menu ID as a set of Ids because each\r\n        // menu should be considered as top level destinations.\r\n        appBarConfiguration = AppBarConfiguration(\r\n            setOf(\r\n                R.id.nav_home\r\n            ), drawerLayout\r\n        )\r\n\r\n        // Criação de Chat\r\n        binding.appBarMain.fabAddChat.setOnClickListener {\r\n            val chat = Chat(\r\n                \"Chat Teste \" + Random.nextInt(256),\r\n                \"chat\"\r\n\r\n            )\r\n            val message = Message(\r\n                \"system\",\r\n                \"This is an Alpha Chat, bugs are expected, please report them if you found some. Welcome to Singularity!\",\r\n                \"2021-12-22\",\r\n                Timestamp.now(),\r\n                \"\"\r\n\r\n            )\r\n            db.collection(\"chat\")\r\n                .add(chat.toHash())\r\n                .addOnSuccessListener { documentReference ->\r\n                    db.collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .collection(\"message\")\r\n                        .add(message.toHash())\r\n                    db.collection(\"profile\")\r\n                        .document(\"${Firebase.auth.currentUser!!.uid}\")\r\n                        .collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .set(chat)\r\n\r\n                }\r\n                .addOnFailureListener { e ->\r\n                    Log.w(ContentValues.TAG, \"Error adding document\", e)\r\n                }\r\n\r\n        }\r\n\r\n        // Log Out Button\r\n        binding.logoutLayout.setOnClickListener {\r\n\r\n            val prefs = PreferenceHelper.customPreference(this, \"User_data\")\r\n            prefs.password = null\r\n            prefs.email = null\r\n            prefs.userId = null\r\n\r\n            val intent = Intent(this, WelcomeActivity::class.java)\r\n            startActivity(intent)\r\n        }\r\n\r\n\r\n        // Passing each fragment ID as a set of Ids\r\n        setupActionBarWithNavController(navController, appBarConfiguration)\r\n        navView.setupWithNavController(navController)\r\n\r\n    }\r\n\r\n    override fun onCreateOptionsMenu(menu: Menu): Boolean {\r\n        // Inflate the menu; this adds items to the action bar if it is present.\r\n        menuInflater.inflate(R.menu.drawer, menu)\r\n        return true\r\n    }\r\n\r\n    override fun onSupportNavigateUp(): Boolean {\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        return navController.navigateUp(appBarConfiguration) || super.onSupportNavigateUp()\r\n    }\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt b/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt
------ a/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt	(revision 94adac9c4d1446b5b44892110de1ee705a5ef903)
---+++ b/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt	(date 1640607043249)
---@@ -130,6 +130,7 @@
---         setupActionBarWithNavController(navController, appBarConfiguration)
---         navView.setupWithNavController(navController)
--- 
---+
---     }
--- 
---     override fun onCreateOptionsMenu(menu: Menu): Boolean {
---Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch
---new file mode 100644
------ /dev/null	(date 1640603575056)
---+++ b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch	(date 1640603575056)
---@@ -0,0 +1,47 @@
---+Index: app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt
---+IDEA additional info:
---+Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---+<+>package com.singularity.ipcaplus\r\n\r\nimport android.content.ContentValues\r\nimport android.content.Intent\r\nimport android.os.Build\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport java.util.Base64\r\nimport android.util.Log\r\nimport android.view.Menu\r\nimport android.view.WindowManager\r\nimport android.widget.ImageView\r\nimport androidx.annotation.RequiresApi\r\nimport androidx.drawerlayout.widget.DrawerLayout\r\nimport androidx.navigation.findNavController\r\nimport androidx.navigation.ui.AppBarConfiguration\r\nimport androidx.navigation.ui.navigateUp\r\nimport androidx.navigation.ui.setupActionBarWithNavController\r\nimport androidx.navigation.ui.setupWithNavController\r\nimport com.google.android.material.navigation.NavigationView\r\nimport com.google.android.material.snackbar.Snackbar\r\nimport com.google.firebase.Timestamp\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.firestore.ktx.firestore\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.singularity.ipcaplus.calendar.AddEventActivity\r\nimport com.singularity.ipcaplus.cryptography.decryptWithAESmeta\r\nimport com.singularity.ipcaplus.cryptography.encryptMeta\r\nimport com.singularity.ipcaplus.cryptography.metaGenrateKey\r\nimport com.singularity.ipcaplus.databinding.ActivityDrawerActivtyBinding\r\nimport com.singularity.ipcaplus.models.Chat\r\nimport com.singularity.ipcaplus.models.Message\r\nimport com.singularity.ipcaplus.profile.ProfileActivity\r\nimport java.lang.StringBuilder\r\nimport java.util.Base64.getEncoder\r\nimport java.util.concurrent.TimeUnit\r\nimport javax.crypto.KeyGenerator\r\nimport javax.crypto.SecretKey\r\nimport kotlin.random.Random\r\n\r\n\r\nclass DrawerActivty : AppCompatActivity() {\r\n\r\n    private lateinit var appBarConfiguration: AppBarConfiguration\r\n    private lateinit var binding: ActivityDrawerActivtyBinding\r\n\r\n    val db = Firebase.firestore\r\n\r\n    @RequiresApi(Build.VERSION_CODES.O)\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n\r\n        binding = ActivityDrawerActivtyBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        binding.navView.getHeaderView(0).findViewById<ImageView>(R.id.imageView_profile).setOnClickListener {\r\n\r\n            val intent = Intent(this, ProfileActivity::class.java)\r\n            startActivity(intent)\r\n\r\n        }\r\n\r\n        //val secretKey: String = \"662ede816988e58fb6d057d9d85605e0\"\r\n\r\n        /*val message = \"Hello Welcome to Solanium Dr.Diogo\"\r\n        var meta = encryptMeta(message, keygen)\r\n        println(meta)\r\n\r\n        val message_decripted = decryptWithAESmeta(keygen, meta)\r\n        println(message_decripted)*/\r\n\r\n        setSupportActionBar(binding.appBarMain.toolbar)\r\n        window.setFlags(\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN,\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN);\r\n\r\n\r\n        binding.appBarMain.fabAddChat.setOnClickListener { view ->\r\n            Snackbar.make(view, \"Replace with your own action\", Snackbar.LENGTH_LONG)\r\n                .setAction(\"Action\", null).show()\r\n        }\r\n        val drawerLayout: DrawerLayout = binding.drawerLayout\r\n        val navView: NavigationView = binding.navView\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        val stampCurrent = System.currentTimeMillis()\r\n        val stampSec = TimeUnit.MILLISECONDS.toSeconds(stampCurrent)\r\n        val stampNano = TimeUnit.MILLISECONDS.toNanos(stampCurrent).toInt()\r\n        // Passing each menu ID as a set of Ids because each\r\n        // menu should be considered as top level destinations.\r\n        appBarConfiguration = AppBarConfiguration(\r\n            setOf(\r\n                R.id.nav_home\r\n            ), drawerLayout\r\n        )\r\n\r\n        // Criação de Chat\r\n        binding.appBarMain.fabAddChat.setOnClickListener {\r\n\r\n            /*val keygen = metaGenrateKey()\r\n\r\n            val intent = Intent(this, ChatActivity::class.java)\r\n            intent.putExtra(\"keygen\", keygen)\r\n            startActivity(intent)*/\r\n\r\n            val chat = Chat(\r\n                \"Chat Teste \" + Random.nextInt(256),\r\n                \"chat\"\r\n            )\r\n\r\n            var meta = encryptMeta(\"This is an Alpha Chat, bugs are expected, please report them if you found some. Welcome to Singularity!\", \"662ede816988e58fb6d057d9d85605e0\")\r\n            val message = Message(\r\n                \"system\",\r\n                meta.toString(),\r\n                \"2021-12-22\",\r\n                Timestamp.now(),\r\n                \"\"\r\n\r\n            )\r\n            db.collection(\"chat\")\r\n                .add(chat.toHash())\r\n                .addOnSuccessListener { documentReference ->\r\n                    db.collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .collection(\"message\")\r\n                        .add(message.toHash())\r\n                    db.collection(\"profile\")\r\n                        .document(\"${Firebase.auth.currentUser!!.uid}\")\r\n                        .collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .set(chat)\r\n\r\n                }\r\n                .addOnFailureListener { e ->\r\n                    Log.w(ContentValues.TAG, \"Error adding document\", e)\r\n                }\r\n\r\n        }\r\n        // Passing each fragment ID as a set of Ids\r\n        setupActionBarWithNavController(navController, appBarConfiguration)\r\n        navView.setupWithNavController(navController)\r\n\r\n    }\r\n\r\n    override fun onCreateOptionsMenu(menu: Menu): Boolean {\r\n        // Inflate the menu; this adds items to the action bar if it is present.\r\n        menuInflater.inflate(R.menu.drawer, menu)\r\n        return true\r\n    }\r\n\r\n    override fun onSupportNavigateUp(): Boolean {\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        return navController.navigateUp(appBarConfiguration) || super.onSupportNavigateUp()\r\n    }\r\n}
---+Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---+<+>UTF-8
---+===================================================================
---+diff --git a/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt b/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt
---+--- a/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt	(revision db6f0662753bfe0d8d9a8102dae42e6ff910c141)
---++++ b/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt	(date 1640484576403)
---+@@ -31,11 +31,8 @@
---+ import com.singularity.ipcaplus.models.Chat
---+ import com.singularity.ipcaplus.models.Message
---+ import com.singularity.ipcaplus.profile.ProfileActivity
---+-import java.lang.StringBuilder
---+-import java.util.Base64.getEncoder
---+ import java.util.concurrent.TimeUnit
---+ import javax.crypto.KeyGenerator
---+-import javax.crypto.SecretKey
---+ import kotlin.random.Random
---+ 
---+ 
---+Index: .idea/deploymentTargetDropDown.xml
---+IDEA additional info:
---+Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---+<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"deploymentTargetDropDown\">\r\n    <targetSelectedWithDropDown>\r\n      <Target>\r\n        <type value=\"QUICK_BOOT_TARGET\" />\r\n        <deviceKey>\r\n          <Key>\r\n            <type value=\"VIRTUAL_DEVICE_PATH\" />\r\n            <value value=\"C:\\Users\\diogo\\.android\\avd\\Pixel_5_API_27.avd\" />\r\n          </Key>\r\n        </deviceKey>\r\n      </Target>\r\n    </targetSelectedWithDropDown>\r\n    <timeTargetWasSelectedWithDropDown value=\"2021-12-20T17:50:43.965935700Z\" />\r\n  </component>\r\n</project>
---+Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---+<+>UTF-8
---+===================================================================
---+diff --git a/.idea/deploymentTargetDropDown.xml b/.idea/deploymentTargetDropDown.xml
---+--- a/.idea/deploymentTargetDropDown.xml	(revision db6f0662753bfe0d8d9a8102dae42e6ff910c141)
---++++ b/.idea/deploymentTargetDropDown.xml	(date 1640484631324)
---+@@ -7,11 +7,11 @@
---+         <deviceKey>
---+           <Key>
---+             <type value="VIRTUAL_DEVICE_PATH" />
---+-            <value value="C:\Users\diogo\.android\avd\Pixel_5_API_27.avd" />
---++            <value value="C:\Users\diogo\.android\avd\Pixel_3_API_27.avd" />
---+           </Key>
---+         </deviceKey>
---+       </Target>
---+     </targetSelectedWithDropDown>
---+-    <timeTargetWasSelectedWithDropDown value="2021-12-20T17:50:43.965935700Z" />
---++    <timeTargetWasSelectedWithDropDown value="2021-12-26T02:10:29.711791600Z" />
---+   </component>
---+ </project>
---+\ No newline at end of file
---Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM__Default_Changelist_.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM__Default_Changelist_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM__Default_Changelist_.xml
---new file mode 100644
------ /dev/null	(date 1640603694749)
---+++ b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM__Default_Changelist_.xml	(date 1640603694749)
---@@ -0,0 +1,4 @@
---+<changelist name="Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]" date="1640603683316" recycled="true" deleted="true">
---+  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch" />
---+  <option name="DESCRIPTION" value="Uncommitted changes before Update at 12/27/2021 11:12 AM [Default Changelist]" />
---+</changelist>
---\ No newline at end of file
---Index: .idea/deploymentTargetDropDown.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"deploymentTargetDropDown\">\r\n    <targetSelectedWithDropDown>\r\n      <Target>\r\n        <type value=\"QUICK_BOOT_TARGET\" />\r\n        <deviceKey>\r\n          <Key>\r\n            <type value=\"VIRTUAL_DEVICE_PATH\" />\r\n            <value value=\"C:\\Users\\diogo\\.android\\avd\\Pixel_5_API_27.avd\" />\r\n          </Key>\r\n        </deviceKey>\r\n      </Target>\r\n    </targetSelectedWithDropDown>\r\n    <timeTargetWasSelectedWithDropDown value=\"2021-12-20T17:50:43.965935700Z\" />\r\n  </component>\r\n</project>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/.idea/deploymentTargetDropDown.xml b/.idea/deploymentTargetDropDown.xml
------ a/.idea/deploymentTargetDropDown.xml	(revision 94adac9c4d1446b5b44892110de1ee705a5ef903)
---+++ b/.idea/deploymentTargetDropDown.xml	(date 1640603683277)
---@@ -7,11 +7,11 @@
---         <deviceKey>
---           <Key>
---             <type value="VIRTUAL_DEVICE_PATH" />
----            <value value="C:\Users\diogo\.android\avd\Pixel_5_API_27.avd" />
---+            <value value="C:\Users\diogo\.android\avd\Pixel_3_API_27.avd" />
---           </Key>
---         </deviceKey>
---       </Target>
---     </targetSelectedWithDropDown>
----    <timeTargetWasSelectedWithDropDown value="2021-12-20T17:50:43.965935700Z" />
---+    <timeTargetWasSelectedWithDropDown value="2021-12-26T02:10:29.711791600Z" />
---   </component>
--- </project>
---\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_3_06_PM_[Default_Changelist]/shelved.patch
--===================================================================
--diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_3_06_PM_[Default_Changelist]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_3_06_PM_[Default_Changelist]/shelved.patch
--deleted file mode 100644
----- a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_3_06_PM_[Default_Changelist]/shelved.patch	(revision 6357a5bbd27af02f311f8311dcf2ebf10c453e1f)
--+++ /dev/null	(revision 6357a5bbd27af02f311f8311dcf2ebf10c453e1f)
--@@ -1,168 +0,0 @@
---Index: app/src/main/java/com/singularity/ipcaplus/RegisterActivity.kt
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.singularity.ipcaplus\r\n\r\nimport android.content.ContentValues.TAG\r\nimport android.content.Intent\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport android.util.Log\r\nimport android.widget.Toast\r\nimport com.google.firebase.auth.FirebaseAuth\r\nimport com.google.firebase.auth.FirebaseUser\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.singularity.ipcaplus.cryptography.decryptWithAES\r\nimport com.singularity.ipcaplus.cryptography.encrypt\r\nimport com.singularity.ipcaplus.databinding.ActivityRegisterBinding\r\n\r\nclass RegisterActivity : AppCompatActivity() {\r\n    private lateinit var auth: FirebaseAuth\r\n    private lateinit var binding: ActivityRegisterBinding\r\n\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_login)\r\n\r\n        binding = ActivityRegisterBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        auth = Firebase.auth\r\n\r\n\r\n        binding.buttonRegister.setOnClickListener {\r\n            val email : String = binding.editTextEmail.text.toString()\r\n            val password : String = binding.editTextTextPassword.text.toString()\r\n\r\n\r\n            auth.createUserWithEmailAndPassword(email, password)\r\n                .addOnCompleteListener(this) { task ->\r\n                    if (task.isSuccessful) {\r\n                        // Sign in success, update UI with the signed-in user's information\r\n                        Log.d(TAG, \"createUserWithEmail:success\")\r\n                        val user = auth.currentUser\r\n                        emailVerification()\r\n                        startActivity(Intent(this, LoginActivity::class.java ))\r\n                    } else {\r\n                        // If sign in fails, display a message to the user.\r\n                        Log.w(TAG, \"createUserWithEmail:failure\", task.exception)\r\n                        Toast.makeText(baseContext, \"Authentication failed.\",\r\n                            Toast.LENGTH_SHORT).show()\r\n                    }\r\n                }\r\n        }\r\n    }\r\n\r\n    private fun emailVerification() {\r\n\r\n        auth.currentUser?.sendEmailVerification()\r\n            ?.addOnCompleteListener { task ->\r\n                if (task.isSuccessful) {\r\n                    // below message changed and user is navigated to Sign In activity\r\n                    val user = auth.currentUser\r\n                    Toast.makeText(\r\n                        this, \"Sign Up successful. Verification link sent to the Email address\",\r\n                        Toast.LENGTH_SHORT\r\n                    ).show()\r\n                }\r\n            }\r\n\r\n    }\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/app/src/main/java/com/singularity/ipcaplus/RegisterActivity.kt b/app/src/main/java/com/singularity/ipcaplus/RegisterActivity.kt
------ a/app/src/main/java/com/singularity/ipcaplus/RegisterActivity.kt	(revision 259ef520c64e84cee5b29ce2aa11b4d2c88df187)
---+++ b/app/src/main/java/com/singularity/ipcaplus/RegisterActivity.kt	(date 1640617365737)
---@@ -1,17 +1,15 @@
--- package com.singularity.ipcaplus
--- 
----import android.content.ContentValues.TAG
---+import android.content.ContentValues
--- import android.content.Intent
----import androidx.appcompat.app.AppCompatActivity
--- import android.os.Bundle
--- import android.util.Log
--- import android.widget.Toast
---+import androidx.appcompat.app.AppCompatActivity
---+import com.google.android.material.snackbar.Snackbar
--- import com.google.firebase.auth.FirebaseAuth
----import com.google.firebase.auth.FirebaseUser
--- import com.google.firebase.auth.ktx.auth
--- import com.google.firebase.ktx.Firebase
----import com.singularity.ipcaplus.cryptography.decryptWithAES
----import com.singularity.ipcaplus.cryptography.encrypt
--- import com.singularity.ipcaplus.databinding.ActivityRegisterBinding
--- 
--- class RegisterActivity : AppCompatActivity() {
---@@ -33,22 +31,27 @@
---             val email : String = binding.editTextEmail.text.toString()
---             val password : String = binding.editTextTextPassword.text.toString()
--- 
----
----            auth.createUserWithEmailAndPassword(email, password)
----                .addOnCompleteListener(this) { task ->
----                    if (task.isSuccessful) {
----                        // Sign in success, update UI with the signed-in user's information
----                        Log.d(TAG, "createUserWithEmail:success")
----                        val user = auth.currentUser
----                        emailVerification()
----                        startActivity(Intent(this, LoginActivity::class.java ))
----                    } else {
----                        // If sign in fails, display a message to the user.
----                        Log.w(TAG, "createUserWithEmail:failure", task.exception)
----                        Toast.makeText(baseContext, "Authentication failed.",
----                            Toast.LENGTH_SHORT).show()
---+            val emailDomain = Utilis.getEmailDomain(email)
---+            if(emailDomain != "alunos.ipca.pt" && emailDomain != "ipca.pt"){
---+                Snackbar.make(binding.root,
---+                    "You need to Sign Up with (ipca.pt) email!", Snackbar.LENGTH_SHORT).show()
---+            }else{
---+                auth.createUserWithEmailAndPassword(email, password)
---+                    .addOnCompleteListener(this) { task ->
---+                        if (task.isSuccessful) {
---+                            // Sign in success, update UI with the signed-in user's information
---+                            Log.d(ContentValues.TAG, "createUserWithEmail:success")
---+                            val user = auth.currentUser
---+                            emailVerification()
---+                            startActivity(Intent(this, LoginActivity::class.java ))
---+                        } else {
---+                            // If sign in fails, display a message to the user.
---+                            Log.w(ContentValues.TAG, "createUserWithEmail:failure", task.exception)
---+                            Toast.makeText(baseContext, "Authentication failed.",
---+                                Toast.LENGTH_SHORT).show()
---+                        }
---                     }
----                }
---+            }
---         }
---     }
--- 
---Index: app/src/main/java/com/singularity/ipcaplus/Backend.kt
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.singularity.ipcaplus\r\n\r\nimport android.graphics.Color\r\nimport com.github.sundeepk.compactcalendarview.domain.Event\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.firestore.Query\r\nimport com.google.firebase.firestore.ktx.firestore\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.singularity.ipcaplus.models.*\r\n\r\nobject Backend {\r\n\r\n    val db = Firebase.firestore\r\n\r\n    /*\r\n       ------------------------------------------------ Events ------------------------------------------------\r\n    */\r\n\r\n    /*\r\n       This function returns all events during the month in the firebase to an list\r\n       @month = selected month\r\n       @callBack = return the list\r\n    */\r\n    fun getAllMonthEvents(month: String, callBack: (List<EventCalendar>)->Unit) {\r\n\r\n        val events = arrayListOf<EventCalendar>()\r\n\r\n        // Get all user chat ids\r\n        val chatIds = arrayListOf<String>()\r\n        getAllUserChatIds {\r\n            chatIds.addAll(it)\r\n\r\n            // Search in all chats\r\n            for (id in chatIds) {\r\n                db.collection(\"chat\")\r\n                    .document(id)\r\n                    .collection(\"event\")\r\n                    .addSnapshotListener { documents, _ ->\r\n\r\n                        documents?.let {\r\n\r\n                            for (document in documents) {\r\n                                val event = EventCalendar.fromHash(document)\r\n                                event.id = document.id\r\n\r\n                                val date = Utilis.getDate(event.datetime.seconds * 1000, \"yyyy-MM-dd'T'HH:mm:ss.SSS\")\r\n                                if (month == Utilis.getMonthById(Utilis.getMonth(date).toInt())) {\r\n                                    events.add(event)\r\n                                }\r\n                            }\r\n                            callBack(events)\r\n                        }\r\n                    }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    private fun getAllUserChatIds(callBack: (List<String>)->Unit) {\r\n\r\n        val chatIds = arrayListOf<String>()\r\n\r\n        // Get Group Chats Ids\r\n        db.collection(\"profile\").document(Firebase.auth.currentUser!!.uid).collection(\"chat\")\r\n            .addSnapshotListener { documents, _ ->\r\n                documents?.let {\r\n                    for (document in it) {\r\n                        chatIds.add(document.id)\r\n                    }\r\n\r\n                    callBack(chatIds)\r\n                }\r\n            }\r\n    }\r\n\r\n\r\n    /*\r\n       This function returns all events during the month in the firebase to an list\r\n       @month = selected month\r\n       @callBack = return the list\r\n    */\r\n    fun getAllChatMonthEvents(month: String, chat_id: String, callBack: (List<EventCalendar>)->Unit) {\r\n\r\n        val events = arrayListOf<EventCalendar>()\r\n\r\n        db.collection(\"chat\")\r\n            .document(chat_id)\r\n            .collection(\"event\")\r\n            .addSnapshotListener { documents, _ ->\r\n\r\n                documents?.let {\r\n\r\n                    for (document in documents) {\r\n                        val event = EventCalendar.fromHash(document)\r\n                        event.id = document.id\r\n\r\n                        val date = Utilis.getDate(event.datetime.seconds * 1000, \"yyyy-MM-dd'T'HH:mm:ss.SSS\")\r\n                        if (month == Utilis.getMonthById(Utilis.getMonth(date).toInt())) {\r\n                            events.add(event)\r\n                        }\r\n                    }\r\n\r\n                    callBack(events)\r\n                }\r\n\r\n            }\r\n    }\r\n\r\n\r\n    /*\r\n       This function returns all events during the day in the firebase to an list\r\n       @day = selected day\r\n       @callBack = return the list\r\n    */\r\n    fun getAllChatMonthDayEvents(month: String, day: Int, chat_id: String, callBack: (List<EventCalendar>)->Unit) {\r\n\r\n        val events = arrayListOf<EventCalendar>()\r\n\r\n        db.collection(\"chat\")\r\n            .document(chat_id)\r\n            .collection(\"event\")\r\n            .addSnapshotListener { documents, _ ->\r\n\r\n                documents?.let {\r\n\r\n                    for (document in documents) {\r\n                        val event = EventCalendar.fromHash(document)\r\n                        event.id = document.id\r\n\r\n                        val date = Utilis.getDate(event.datetime.seconds * 1000, \"yyyy-MM-dd'T'HH:mm:ss.SSS\")\r\n                        if (day == Utilis.getDay(date).toInt() && month == Utilis.getMonthById(Utilis.getMonth(date).toInt())) {\r\n                            events.add(event)\r\n                        }\r\n                    }\r\n\r\n                    callBack(events)\r\n                }\r\n\r\n            }\r\n    }\r\n\r\n\r\n    /*\r\n       This function returns all events during the day in the firebase to an list\r\n       @day = selected day\r\n       @callBack = return the list\r\n    */\r\n    fun getAllMonthDayEvents(month: String, day: Int, callBack: (List<EventCalendar>)->Unit) {\r\n\r\n        val events = arrayListOf<EventCalendar>()\r\n\r\n        // Get all user chat ids\r\n        val chatIds = arrayListOf<String>()\r\n        getAllUserChatIds {\r\n            chatIds.addAll(it)\r\n\r\n            // Search in all chats\r\n            for (id in chatIds) {\r\n                db.collection(\"chat\")\r\n                    .document(id)\r\n                    .collection(\"event\")\r\n                    .addSnapshotListener { documents, _ ->\r\n\r\n                        documents?.let {\r\n\r\n                            for (document in documents) {\r\n                                val event = EventCalendar.fromHash(document)\r\n                                event.id = document.id\r\n\r\n                                val date = Utilis.getDate(event.datetime.seconds * 1000, \"yyyy-MM-dd'T'HH:mm:ss.SSS\")\r\n                                if (day == Utilis.getDay(date).toInt() && month == Utilis.getMonthById(Utilis.getMonth(date).toInt())) {\r\n                                    events.add(event)\r\n                                }\r\n                            }\r\n\r\n                            callBack(events)\r\n                        }\r\n\r\n                    }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    fun deleteEvent(chatID: String, eventID: String) {\r\n\r\n        db.collection(\"chat\")\r\n            .document(chatID)\r\n            .collection(\"event\")\r\n            .document(eventID)\r\n            .delete()\r\n\r\n    }\r\n\r\n\r\n    /*\r\n       ------------------------------------------------ Schedule ------------------------------------------------\r\n    */\r\n\r\n    /*\r\n       This function returns all events in the firebase to an list\r\n       @callBack = return the list\r\n    */\r\n    fun getDayCourseSubjects(day: String, courseId: String, callBack: (List<Subject>)->Unit) {\r\n\r\n        val subjects = arrayListOf<Subject>()\r\n        val subjectsWithBreaks = arrayListOf<Subject>()\r\n\r\n        db.collection(\"course\").document(courseId).collection(\"subject\")\r\n            .addSnapshotListener { documents, _ ->\r\n                documents?.let {\r\n\r\n                    // Add every subject to the list\r\n                    for (document in documents) {\r\n                        val subject = Subject.fromHash(document)\r\n                        if (day == subject.day) {\r\n                            subjects.add(subject)\r\n                        }\r\n                    }\r\n\r\n                    // Order the subjects by time\r\n                    for (i in 0 until subjects.size) {\r\n                        for (j in 0 until subjects.size - 1) {\r\n\r\n                            if (Utilis.convertHoursStringToInt(subjects[j].start_time) > Utilis.convertHoursStringToInt(subjects[j+1].start_time)) {\r\n                                val temp = subjects[j]\r\n                                subjects[j] = subjects[j + 1]\r\n                                subjects[j + 1] = temp\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    // Add Break Times Between Classes\r\n                    for (i in 0 until subjects.size) {\r\n                        if (i % 2 == 0) {\r\n                            subjectsWithBreaks.add(subjects[i])\r\n                        }\r\n                        else {\r\n                            val diff = Utilis.convertHoursStringToInt(subjects[i].start_time) - Utilis.convertHoursStringToInt(subjects[i-1].end_time)\r\n                            subjectsWithBreaks.add(Subject(\"breaktime\", diff.toString()))\r\n                            subjectsWithBreaks.add(subjects[i])\r\n                        }\r\n                    }\r\n\r\n                    callBack(subjectsWithBreaks)\r\n                }\r\n\r\n            }\r\n\r\n    }\r\n\r\n\r\n    /*\r\n       This function returns the user course by callback\r\n       @id = user uid\r\n    */\r\n    fun getUserCourse(uid: String, callBack:(String)->Unit) {\r\n\r\n        db.collection(\"profile\")\r\n            .document(uid)\r\n            .collection(\"course\")\r\n            .addSnapshotListener { documents, _ ->\r\n\r\n                documents?.let {\r\n\r\n                    var courseId = \"\"\r\n                    for (document in documents)\r\n                        courseId = document.id\r\n\r\n                    callBack(courseId)\r\n                }\r\n            }\r\n    }\r\n\r\n\r\n    /*\r\n       ------------------------------------------------ Contacts ------------------------------------------------\r\n    */\r\n    /*\r\n       This function returns all contacts in the firebase to an list\r\n       @callBack = return the list\r\n    */\r\n    fun getAllContacts(callBack: (List<Contact>)->Unit) {\r\n\r\n        val contacts = arrayListOf<Contact>()\r\n\r\n        db.collection(\"contacts\")\r\n            .addSnapshotListener { documents, _ ->\r\n\r\n                documents?.let {\r\n\r\n                    for (document in documents) {\r\n                        val contact = Contact.fromHash(document)\r\n                        contacts.add(contact)\r\n                    }\r\n\r\n                    callBack(contacts)\r\n                }\r\n\r\n            }\r\n\r\n    }\r\n\r\n\r\n    /*\r\n       ------------------------------------------------ Chats ------------------------------------------------\r\n    */\r\n    /*\r\n    /*\r\n       This function returns chats based on given type\r\n       @callBack = return the list\r\n    */\r\n    fun getChatByType(type: String ,callBack: (List<Chat>, List<String>)->Unit) {\r\n\r\n        val chats = arrayListOf<Chat>()\r\n        val chatIds = arrayListOf<String>()\r\n\r\n        db.collection(\"profile\").document(\"${Firebase.auth.currentUser!!.uid}\").collection(\"chat\")\r\n            .addSnapshotListener { documents, _ ->\r\n                documents?.let {\r\n                    for (document in documents) {\r\n                        val chat = Chat.fromHash(document)\r\n                        if (type == chat.type) {\r\n                            chats.add(chat)\r\n                            chatIds.add(document.id)\r\n                        }\r\n                    }\r\n\r\n                    callBack(chats, chatIds)\r\n                }\r\n\r\n            }\r\n\r\n    }\r\n    */\r\n\r\n    /*\r\n       This function returns last chat message by chat id\r\n       @callBack = return the list\r\n    */\r\n    fun getLastMessageByChatID(chatID: String, callBack: (Message?)->Unit) {\r\n\r\n        var message : Message? = null\r\n\r\n        db.collection(\"chat\").document(\"${chatID}\").collection(\"message\")\r\n            .orderBy(\"time\", Query.Direction.DESCENDING).limit(1)\r\n            .addSnapshotListener { documents, _ ->\r\n                documents?.let {\r\n                    for (document in documents) {\r\n                        message = Message.fromHash(document)\r\n                        }\r\n                    }\r\n\r\n                    callBack(message)\r\n                }\r\n\r\n    }\r\n\r\n\r\n    fun getChatAdminIds(chatID: String, callBack: (List<String>)->Unit) {\r\n\r\n        val adminIds = arrayListOf<String>()\r\n\r\n        // Get Group Chats Ids\r\n        db.collection(\"chat\").document(chatID).collection(\"admin\")\r\n            .addSnapshotListener { documents, _ ->\r\n                documents?.let {\r\n                    for (document in it) {\r\n                        adminIds.add(document.id)\r\n                    }\r\n\r\n                    callBack(adminIds)\r\n                }\r\n            }\r\n\r\n    }\r\n\r\n\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/app/src/main/java/com/singularity/ipcaplus/Backend.kt b/app/src/main/java/com/singularity/ipcaplus/Backend.kt
------ a/app/src/main/java/com/singularity/ipcaplus/Backend.kt	(revision 259ef520c64e84cee5b29ce2aa11b4d2c88df187)
---+++ b/app/src/main/java/com/singularity/ipcaplus/Backend.kt	(date 1640617597444)
---@@ -1,12 +1,13 @@
--- package com.singularity.ipcaplus
--- 
----import android.graphics.Color
----import com.github.sundeepk.compactcalendarview.domain.Event
--- import com.google.firebase.auth.ktx.auth
--- import com.google.firebase.firestore.Query
--- import com.google.firebase.firestore.ktx.firestore
--- import com.google.firebase.ktx.Firebase
----import com.singularity.ipcaplus.models.*
---+import com.singularity.ipcaplus.models.Contact
---+import com.singularity.ipcaplus.models.EventCalendar
---+import com.singularity.ipcaplus.models.Message
---+import com.singularity.ipcaplus.models.Subject
--- 
--- object Backend {
--- 
---@@ -375,5 +376,27 @@
--- 
---     }
--- 
---+    /*
---+       ------------------------------------------------ Register Manipulation ------------------------------------------------
---+    */
---+
---+    fun getIpcaData(email: String, callBack: (Message?)->Unit) {
---+
---+        var message : Message? = null
---+
---+        db.collection("ipca_data")
---+            .addSnapshotListener { documents, _ ->
---+                documents?.let {
---+                    for (document in documents) {
---+                        message = Message.fromHash(document)
---+                    }
---+                }
---+
---+                callBack(message)
---+            }
---+
---+    }
---+
---+
--- 
--- }
---\ No newline at end of file
---Index: app/src/main/java/com/singularity/ipcaplus/Utilis.kt
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.singularity.ipcaplus\r\n\r\nimport android.content.Context\r\nimport android.os.Build\r\nimport androidx.annotation.RequiresApi\r\nimport java.io.IOException\r\nimport java.text.SimpleDateFormat\r\nimport java.time.LocalDate\r\nimport java.util.*\r\nimport java.util.regex.Pattern\r\n\r\nobject  Utilis {\r\n\r\n    /*\r\n        This function return the current month id\r\n     */\r\n    @RequiresApi(Build.VERSION_CODES.O)\r\n    fun getCurrentMonthId(): Int {\r\n\r\n        val c = LocalDate.now()\r\n        val strArray = Pattern.compile(\"-\").split(c.toString())\r\n\r\n        return strArray[1].toInt()\r\n    }\r\n\r\n    /*\r\n        This function return the current year id\r\n     */\r\n    @RequiresApi(Build.VERSION_CODES.O)\r\n    fun getCurrentYear(): String {\r\n\r\n        val c = LocalDate.now()\r\n        val strArray = Pattern.compile(\"-\").split(c.toString())\r\n\r\n        return strArray[0]\r\n    }\r\n\r\n    @RequiresApi(Build.VERSION_CODES.O)\r\n    fun getYearByCalendarId(id: Int): Int {\r\n\r\n        var count = id\r\n        var result = 2021 - 121\r\n\r\n        while (count > 0) {\r\n            count -= 1\r\n            result ++\r\n        }\r\n\r\n        return result\r\n    }\r\n\r\n    /*\r\n        This function return the month value in string by an id\r\n        @month = month id\r\n     */\r\n    fun getMonthById(month: Int): String {\r\n        return when (month) {\r\n            1 -> \"Janeiro\"\r\n            2 -> \"Fevereiro\"\r\n            3 -> \"Março\"\r\n            4 -> \"Abril\"\r\n            5 -> \"Maio\"\r\n            6 -> \"Junho\"\r\n            7 -> \"Julho\"\r\n            8 -> \"Agosto\"\r\n            9 -> \"Setembro\"\r\n            10 -> \"Outubro\"\r\n            11 -> \"Novembro\"\r\n            12 -> \"Dezembro\"\r\n            else -> \"None\"\r\n        }\r\n    }\r\n\r\n    fun convertHoursStringToInt(strVal: String): Int {\r\n        val strArray = Pattern.compile(\":\").split(strVal)\r\n        val result = strArray[0] + strArray[1]\r\n        return result.toInt()\r\n    }\r\n\r\n    fun getDate(milliSeconds: Long, dateFormat: String?): String {\r\n        // Create a DateFormatter object for displaying date in specified format.\r\n        val formatter = SimpleDateFormat(dateFormat)\r\n\r\n        // Create a calendar object that will convert the date and time value in milliseconds to date.\r\n        val calendar: Calendar = Calendar.getInstance()\r\n        calendar.timeInMillis = milliSeconds\r\n        return formatter.format(calendar.time)\r\n    }\r\n\r\n\r\n    /*\r\n        This function split the date and return only the day\r\n        @date = default date\r\n     */\r\n    fun getDay(dateTime: String): String {\r\n\r\n        // Split the date\r\n        val strArray = Pattern.compile(\"-\").split(dateTime)\r\n        val strArray2 = Pattern.compile(\"T\").split(strArray[2])\r\n\r\n        return strArray2[0]\r\n    }\r\n\r\n\r\n    /*\r\n        This function split the date and return only the month in text\r\n        @date = default date\r\n     */\r\n    fun getMonth(dateTime: String): String {\r\n\r\n        // Split the date\r\n        val strArray = Pattern.compile(\"-\").split(dateTime)\r\n\r\n        return strArray[1].toString()\r\n    }\r\n\r\n\r\n    /*\r\n        This function split the date and return only the year in text\r\n        @date = default date\r\n     */\r\n    fun getYear(dateTime: String): String {\r\n\r\n        // Split the date\r\n        val strArray = Pattern.compile(\"-\").split(dateTime)\r\n\r\n        return strArray[0].toString()\r\n    }\r\n\r\n\r\n    /*\r\n        This function split the date and return only the Hours in text\r\n        @date = default date\r\n     */\r\n    fun getHours(dateTime: String): String {\r\n\r\n        // Split the date\r\n        val strArray = Pattern.compile(\"T\").split(dateTime)\r\n        val strArray2 = Pattern.compile(\":\").split(strArray[1])\r\n\r\n        return strArray2[0].toString()\r\n    }\r\n\r\n\r\n    /*\r\n        This function split the date and return only the Minutes in text\r\n        @date = default date\r\n     */\r\n    fun getMinutes(dateTime: String): String {\r\n\r\n        // Split the date\r\n        val strArray = Pattern.compile(\"T\").split(dateTime)\r\n        val strArray2 = Pattern.compile(\":\").split(strArray[1])\r\n\r\n        return strArray2[1].toString()\r\n    }\r\n\r\n\r\n    fun getJsonDataFromAsset(context: Context, fileName: String): String? {\r\n        val jsonString: String\r\n        try {\r\n            jsonString = context.assets.open(fileName).bufferedReader().use { it.readText() }\r\n        } catch (ioException: IOException) {\r\n            ioException.printStackTrace()\r\n            return null\r\n        }\r\n        return jsonString\r\n    }\r\n\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/app/src/main/java/com/singularity/ipcaplus/Utilis.kt b/app/src/main/java/com/singularity/ipcaplus/Utilis.kt
------ a/app/src/main/java/com/singularity/ipcaplus/Utilis.kt	(revision 259ef520c64e84cee5b29ce2aa11b4d2c88df187)
---+++ b/app/src/main/java/com/singularity/ipcaplus/Utilis.kt	(date 1640616340275)
---@@ -155,6 +155,9 @@
---         return strArray2[1].toString()
---     }
--- 
---+    /*
---+        This function get the buffer with the name of filename on assets folder
---+     */
--- 
---     fun getJsonDataFromAsset(context: Context, fileName: String): String? {
---         val jsonString: String
---@@ -167,4 +170,16 @@
---         return jsonString
---     }
--- 
---+    /*
---+        This function gets the domain of email
---+        split remove the @ and make the array like this -> [a20115][alunos.ipca.pt]
---+     */
---+    fun getEmailDomain(email: String) : String{
---+        val strArray = Pattern.compile("@").split(email)
---+        val result= strArray[1]
---+
---+        return result.toString()
---+
---+    }
---+
--- }
---\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_11_PM_[Default_Changelist]/shelved.patch
--===================================================================
--diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_11_PM_[Default_Changelist]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_11_PM_[Default_Changelist]/shelved.patch
--deleted file mode 100644
----- a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_11_PM_[Default_Changelist]/shelved.patch	(revision 6357a5bbd27af02f311f8311dcf2ebf10c453e1f)
--+++ /dev/null	(revision 6357a5bbd27af02f311f8311dcf2ebf10c453e1f)
--@@ -1,255 +0,0 @@
---Index: app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.singularity.ipcaplus\r\n\r\nimport android.content.ContentValues\r\nimport android.content.Context\r\nimport android.content.Intent\r\nimport android.content.SharedPreferences\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport android.util.Log\r\nimport android.view.Menu\r\nimport android.view.WindowManager\r\nimport android.widget.ImageView\r\nimport androidx.drawerlayout.widget.DrawerLayout\r\nimport androidx.navigation.findNavController\r\nimport androidx.navigation.ui.AppBarConfiguration\r\nimport androidx.navigation.ui.navigateUp\r\nimport androidx.navigation.ui.setupActionBarWithNavController\r\nimport androidx.navigation.ui.setupWithNavController\r\nimport com.google.android.material.navigation.NavigationView\r\nimport com.google.android.material.snackbar.Snackbar\r\nimport com.google.firebase.Timestamp\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.firestore.ktx.firestore\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.singularity.ipcaplus.PreferenceHelper.email\r\nimport com.singularity.ipcaplus.PreferenceHelper.password\r\nimport com.singularity.ipcaplus.PreferenceHelper.userId\r\nimport com.singularity.ipcaplus.calendar.AddEventActivity\r\nimport com.singularity.ipcaplus.databinding.ActivityDrawerActivtyBinding\r\nimport com.singularity.ipcaplus.models.Chat\r\nimport com.singularity.ipcaplus.models.Message\r\nimport com.singularity.ipcaplus.profile.ProfileActivity\r\nimport java.util.concurrent.TimeUnit\r\nimport kotlin.random.Random\r\n\r\n\r\nclass DrawerActivty : AppCompatActivity() {\r\n\r\n    private lateinit var appBarConfiguration: AppBarConfiguration\r\n    private lateinit var binding: ActivityDrawerActivtyBinding\r\n\r\n    val db = Firebase.firestore\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n\r\n        binding = ActivityDrawerActivtyBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        binding.navView.getHeaderView(0).findViewById<ImageView>(R.id.imageView_profile).setOnClickListener {\r\n\r\n            val intent = Intent(this, ProfileActivity::class.java)\r\n            startActivity(intent)\r\n\r\n        }\r\n\r\n        setSupportActionBar(binding.appBarMain.toolbar)\r\n        window.setFlags(\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN,\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN);\r\n\r\n\r\n        binding.appBarMain.fabAddChat.setOnClickListener { view ->\r\n            Snackbar.make(view, \"Replace with your own action\", Snackbar.LENGTH_LONG)\r\n                .setAction(\"Action\", null).show()\r\n        }\r\n        val drawerLayout: DrawerLayout = binding.drawerLayout\r\n        val navView: NavigationView = binding.navView\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        val stampCurrent = System.currentTimeMillis()\r\n        val stampSec = TimeUnit.MILLISECONDS.toSeconds(stampCurrent)\r\n        val stampNano = TimeUnit.MILLISECONDS.toNanos(stampCurrent).toInt()\r\n        // Passing each menu ID as a set of Ids because each\r\n        // menu should be considered as top level destinations.\r\n        appBarConfiguration = AppBarConfiguration(\r\n            setOf(\r\n                R.id.nav_home\r\n            ), drawerLayout\r\n        )\r\n\r\n        // Criação de Chat\r\n        binding.appBarMain.fabAddChat.setOnClickListener {\r\n            val chat = Chat(\r\n                \"Chat Teste \" + Random.nextInt(256),\r\n                \"chat\"\r\n\r\n            )\r\n            val message = Message(\r\n                \"system\",\r\n                \"This is an Alpha Chat, bugs are expected, please report them if you found some. Welcome to Singularity!\",\r\n                \"2021-12-22\",\r\n                Timestamp.now(),\r\n                \"\"\r\n\r\n            )\r\n            db.collection(\"chat\")\r\n                .add(chat.toHash())\r\n                .addOnSuccessListener { documentReference ->\r\n                    db.collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .collection(\"message\")\r\n                        .add(message.toHash())\r\n                    db.collection(\"profile\")\r\n                        .document(\"${Firebase.auth.currentUser!!.uid}\")\r\n                        .collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .set(chat)\r\n\r\n                }\r\n                .addOnFailureListener { e ->\r\n                    Log.w(ContentValues.TAG, \"Error adding document\", e)\r\n                }\r\n\r\n        }\r\n\r\n        // Log Out Button\r\n        binding.logoutLayout.setOnClickListener {\r\n\r\n            val prefs = PreferenceHelper.customPreference(this, \"User_data\")\r\n            prefs.password = null\r\n            prefs.email = null\r\n            prefs.userId = null\r\n\r\n            val intent = Intent(this, WelcomeActivity::class.java)\r\n            startActivity(intent)\r\n        }\r\n\r\n\r\n        // Passing each fragment ID as a set of Ids\r\n        setupActionBarWithNavController(navController, appBarConfiguration)\r\n        navView.setupWithNavController(navController)\r\n\r\n    }\r\n\r\n    override fun onCreateOptionsMenu(menu: Menu): Boolean {\r\n        // Inflate the menu; this adds items to the action bar if it is present.\r\n        menuInflater.inflate(R.menu.drawer, menu)\r\n        return true\r\n    }\r\n\r\n    override fun onSupportNavigateUp(): Boolean {\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        return navController.navigateUp(appBarConfiguration) || super.onSupportNavigateUp()\r\n    }\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt b/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt
------ a/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt	(revision 8dc1056a94ce651214eaf46bac161cbcb2a45bf0)
---+++ b/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt	(date 1640607045782)
---@@ -130,6 +130,7 @@
---         setupActionBarWithNavController(navController, appBarConfiguration)
---         navView.setupWithNavController(navController)
--- 
---+
---     }
--- 
---     override fun onCreateOptionsMenu(menu: Menu): Boolean {
---Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM__Default_Changelist_.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM__Default_Changelist_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM__Default_Changelist_.xml
---new file mode 100644
------ /dev/null	(date 1640607060734)
---+++ b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM__Default_Changelist_.xml	(date 1640607060734)
---@@ -0,0 +1,4 @@
---+<changelist name="Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM_[Default_Changelist]" date="1640607045965" recycled="true" deleted="true">
---+  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM_[Default_Changelist]/shelved.patch" />
---+  <option name="DESCRIPTION" value="Uncommitted changes before Update at 12/27/2021 12:10 PM [Default Changelist]" />
---+</changelist>
---\ No newline at end of file
---Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM__Default_Changelist_.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM__Default_Changelist_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM__Default_Changelist_.xml
---new file mode 100644
------ /dev/null	(date 1640607060741)
---+++ b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM__Default_Changelist_.xml	(date 1640607060741)
---@@ -0,0 +1,4 @@
---+<changelist name="Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]" date="1640603683316" recycled="true" deleted="true">
---+  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch" />
---+  <option name="DESCRIPTION" value="Uncommitted changes before Update at 12/27/2021 11:12 AM [Default Changelist]" />
---+</changelist>
---\ No newline at end of file
---Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch
---new file mode 100644
------ /dev/null	(date 1640607045791)
---+++ b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch	(date 1640607045791)
---@@ -0,0 +1,47 @@
---+Index: app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt
---+IDEA additional info:
---+Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---+<+>package com.singularity.ipcaplus\r\n\r\nimport android.content.ContentValues\r\nimport android.content.Intent\r\nimport android.os.Build\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport java.util.Base64\r\nimport android.util.Log\r\nimport android.view.Menu\r\nimport android.view.WindowManager\r\nimport android.widget.ImageView\r\nimport androidx.annotation.RequiresApi\r\nimport androidx.drawerlayout.widget.DrawerLayout\r\nimport androidx.navigation.findNavController\r\nimport androidx.navigation.ui.AppBarConfiguration\r\nimport androidx.navigation.ui.navigateUp\r\nimport androidx.navigation.ui.setupActionBarWithNavController\r\nimport androidx.navigation.ui.setupWithNavController\r\nimport com.google.android.material.navigation.NavigationView\r\nimport com.google.android.material.snackbar.Snackbar\r\nimport com.google.firebase.Timestamp\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.firestore.ktx.firestore\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.singularity.ipcaplus.calendar.AddEventActivity\r\nimport com.singularity.ipcaplus.cryptography.decryptWithAESmeta\r\nimport com.singularity.ipcaplus.cryptography.encryptMeta\r\nimport com.singularity.ipcaplus.cryptography.metaGenrateKey\r\nimport com.singularity.ipcaplus.databinding.ActivityDrawerActivtyBinding\r\nimport com.singularity.ipcaplus.models.Chat\r\nimport com.singularity.ipcaplus.models.Message\r\nimport com.singularity.ipcaplus.profile.ProfileActivity\r\nimport java.lang.StringBuilder\r\nimport java.util.Base64.getEncoder\r\nimport java.util.concurrent.TimeUnit\r\nimport javax.crypto.KeyGenerator\r\nimport javax.crypto.SecretKey\r\nimport kotlin.random.Random\r\n\r\n\r\nclass DrawerActivty : AppCompatActivity() {\r\n\r\n    private lateinit var appBarConfiguration: AppBarConfiguration\r\n    private lateinit var binding: ActivityDrawerActivtyBinding\r\n\r\n    val db = Firebase.firestore\r\n\r\n    @RequiresApi(Build.VERSION_CODES.O)\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n\r\n        binding = ActivityDrawerActivtyBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        binding.navView.getHeaderView(0).findViewById<ImageView>(R.id.imageView_profile).setOnClickListener {\r\n\r\n            val intent = Intent(this, ProfileActivity::class.java)\r\n            startActivity(intent)\r\n\r\n        }\r\n\r\n        //val secretKey: String = \"662ede816988e58fb6d057d9d85605e0\"\r\n\r\n        /*val message = \"Hello Welcome to Solanium Dr.Diogo\"\r\n        var meta = encryptMeta(message, keygen)\r\n        println(meta)\r\n\r\n        val message_decripted = decryptWithAESmeta(keygen, meta)\r\n        println(message_decripted)*/\r\n\r\n        setSupportActionBar(binding.appBarMain.toolbar)\r\n        window.setFlags(\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN,\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN);\r\n\r\n\r\n        binding.appBarMain.fabAddChat.setOnClickListener { view ->\r\n            Snackbar.make(view, \"Replace with your own action\", Snackbar.LENGTH_LONG)\r\n                .setAction(\"Action\", null).show()\r\n        }\r\n        val drawerLayout: DrawerLayout = binding.drawerLayout\r\n        val navView: NavigationView = binding.navView\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        val stampCurrent = System.currentTimeMillis()\r\n        val stampSec = TimeUnit.MILLISECONDS.toSeconds(stampCurrent)\r\n        val stampNano = TimeUnit.MILLISECONDS.toNanos(stampCurrent).toInt()\r\n        // Passing each menu ID as a set of Ids because each\r\n        // menu should be considered as top level destinations.\r\n        appBarConfiguration = AppBarConfiguration(\r\n            setOf(\r\n                R.id.nav_home\r\n            ), drawerLayout\r\n        )\r\n\r\n        // Criação de Chat\r\n        binding.appBarMain.fabAddChat.setOnClickListener {\r\n\r\n            /*val keygen = metaGenrateKey()\r\n\r\n            val intent = Intent(this, ChatActivity::class.java)\r\n            intent.putExtra(\"keygen\", keygen)\r\n            startActivity(intent)*/\r\n\r\n            val chat = Chat(\r\n                \"Chat Teste \" + Random.nextInt(256),\r\n                \"chat\"\r\n            )\r\n\r\n            var meta = encryptMeta(\"This is an Alpha Chat, bugs are expected, please report them if you found some. Welcome to Singularity!\", \"662ede816988e58fb6d057d9d85605e0\")\r\n            val message = Message(\r\n                \"system\",\r\n                meta.toString(),\r\n                \"2021-12-22\",\r\n                Timestamp.now(),\r\n                \"\"\r\n\r\n            )\r\n            db.collection(\"chat\")\r\n                .add(chat.toHash())\r\n                .addOnSuccessListener { documentReference ->\r\n                    db.collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .collection(\"message\")\r\n                        .add(message.toHash())\r\n                    db.collection(\"profile\")\r\n                        .document(\"${Firebase.auth.currentUser!!.uid}\")\r\n                        .collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .set(chat)\r\n\r\n                }\r\n                .addOnFailureListener { e ->\r\n                    Log.w(ContentValues.TAG, \"Error adding document\", e)\r\n                }\r\n\r\n        }\r\n        // Passing each fragment ID as a set of Ids\r\n        setupActionBarWithNavController(navController, appBarConfiguration)\r\n        navView.setupWithNavController(navController)\r\n\r\n    }\r\n\r\n    override fun onCreateOptionsMenu(menu: Menu): Boolean {\r\n        // Inflate the menu; this adds items to the action bar if it is present.\r\n        menuInflater.inflate(R.menu.drawer, menu)\r\n        return true\r\n    }\r\n\r\n    override fun onSupportNavigateUp(): Boolean {\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        return navController.navigateUp(appBarConfiguration) || super.onSupportNavigateUp()\r\n    }\r\n}
---+Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---+<+>UTF-8
---+===================================================================
---+diff --git a/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt b/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt
---+--- a/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt	(revision db6f0662753bfe0d8d9a8102dae42e6ff910c141)
---++++ b/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt	(date 1640484576403)
---+@@ -31,11 +31,8 @@
---+ import com.singularity.ipcaplus.models.Chat
---+ import com.singularity.ipcaplus.models.Message
---+ import com.singularity.ipcaplus.profile.ProfileActivity
---+-import java.lang.StringBuilder
---+-import java.util.Base64.getEncoder
---+ import java.util.concurrent.TimeUnit
---+ import javax.crypto.KeyGenerator
---+-import javax.crypto.SecretKey
---+ import kotlin.random.Random
---+ 
---+ 
---+Index: .idea/deploymentTargetDropDown.xml
---+IDEA additional info:
---+Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---+<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"deploymentTargetDropDown\">\r\n    <targetSelectedWithDropDown>\r\n      <Target>\r\n        <type value=\"QUICK_BOOT_TARGET\" />\r\n        <deviceKey>\r\n          <Key>\r\n            <type value=\"VIRTUAL_DEVICE_PATH\" />\r\n            <value value=\"C:\\Users\\diogo\\.android\\avd\\Pixel_5_API_27.avd\" />\r\n          </Key>\r\n        </deviceKey>\r\n      </Target>\r\n    </targetSelectedWithDropDown>\r\n    <timeTargetWasSelectedWithDropDown value=\"2021-12-20T17:50:43.965935700Z\" />\r\n  </component>\r\n</project>
---+Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---+<+>UTF-8
---+===================================================================
---+diff --git a/.idea/deploymentTargetDropDown.xml b/.idea/deploymentTargetDropDown.xml
---+--- a/.idea/deploymentTargetDropDown.xml	(revision db6f0662753bfe0d8d9a8102dae42e6ff910c141)
---++++ b/.idea/deploymentTargetDropDown.xml	(date 1640484631324)
---+@@ -7,11 +7,11 @@
---+         <deviceKey>
---+           <Key>
---+             <type value="VIRTUAL_DEVICE_PATH" />
---+-            <value value="C:\Users\diogo\.android\avd\Pixel_5_API_27.avd" />
---++            <value value="C:\Users\diogo\.android\avd\Pixel_3_API_27.avd" />
---+           </Key>
---+         </deviceKey>
---+       </Target>
---+     </targetSelectedWithDropDown>
---+-    <timeTargetWasSelectedWithDropDown value="2021-12-20T17:50:43.965935700Z" />
---++    <timeTargetWasSelectedWithDropDown value="2021-12-26T02:10:29.711791600Z" />
---+   </component>
---+ </project>
---+\ No newline at end of file
---Index: .idea/deploymentTargetDropDown.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"deploymentTargetDropDown\">\r\n    <targetSelectedWithDropDown>\r\n      <Target>\r\n        <type value=\"QUICK_BOOT_TARGET\" />\r\n        <deviceKey>\r\n          <Key>\r\n            <type value=\"VIRTUAL_DEVICE_PATH\" />\r\n            <value value=\"C:\\Users\\diogo\\.android\\avd\\Pixel_5_API_27.avd\" />\r\n          </Key>\r\n        </deviceKey>\r\n      </Target>\r\n    </targetSelectedWithDropDown>\r\n    <timeTargetWasSelectedWithDropDown value=\"2021-12-20T17:50:43.965935700Z\" />\r\n  </component>\r\n</project>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/.idea/deploymentTargetDropDown.xml b/.idea/deploymentTargetDropDown.xml
------ a/.idea/deploymentTargetDropDown.xml	(revision 8dc1056a94ce651214eaf46bac161cbcb2a45bf0)
---+++ b/.idea/deploymentTargetDropDown.xml	(date 1640607045802)
---@@ -7,11 +7,11 @@
---         <deviceKey>
---           <Key>
---             <type value="VIRTUAL_DEVICE_PATH" />
----            <value value="C:\Users\diogo\.android\avd\Pixel_5_API_27.avd" />
---+            <value value="C:\Users\diogo\.android\avd\Pixel_3_API_27.avd" />
---           </Key>
---         </deviceKey>
---       </Target>
---     </targetSelectedWithDropDown>
----    <timeTargetWasSelectedWithDropDown value="2021-12-20T17:50:43.965935700Z" />
---+    <timeTargetWasSelectedWithDropDown value="2021-12-26T02:10:29.711791600Z" />
---   </component>
--- </project>
---\ No newline at end of file
---Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM_[Default_Changelist]/shelved.patch
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM_[Default_Changelist]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM_[Default_Changelist]/shelved.patch
---new file mode 100644
------ /dev/null	(date 1640607045101)
---+++ b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_12_10_PM_[Default_Changelist]/shelved.patch	(date 1640607045101)
---@@ -0,0 +1,115 @@
---+Index: app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt
---+IDEA additional info:
---+Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---+<+>package com.singularity.ipcaplus\r\n\r\nimport android.content.ContentValues\r\nimport android.content.Context\r\nimport android.content.Intent\r\nimport android.content.SharedPreferences\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport android.util.Log\r\nimport android.view.Menu\r\nimport android.view.WindowManager\r\nimport android.widget.ImageView\r\nimport androidx.drawerlayout.widget.DrawerLayout\r\nimport androidx.navigation.findNavController\r\nimport androidx.navigation.ui.AppBarConfiguration\r\nimport androidx.navigation.ui.navigateUp\r\nimport androidx.navigation.ui.setupActionBarWithNavController\r\nimport androidx.navigation.ui.setupWithNavController\r\nimport com.google.android.material.navigation.NavigationView\r\nimport com.google.android.material.snackbar.Snackbar\r\nimport com.google.firebase.Timestamp\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.firestore.ktx.firestore\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.singularity.ipcaplus.PreferenceHelper.email\r\nimport com.singularity.ipcaplus.PreferenceHelper.password\r\nimport com.singularity.ipcaplus.PreferenceHelper.userId\r\nimport com.singularity.ipcaplus.calendar.AddEventActivity\r\nimport com.singularity.ipcaplus.databinding.ActivityDrawerActivtyBinding\r\nimport com.singularity.ipcaplus.models.Chat\r\nimport com.singularity.ipcaplus.models.Message\r\nimport com.singularity.ipcaplus.profile.ProfileActivity\r\nimport java.util.concurrent.TimeUnit\r\nimport kotlin.random.Random\r\n\r\n\r\nclass DrawerActivty : AppCompatActivity() {\r\n\r\n    private lateinit var appBarConfiguration: AppBarConfiguration\r\n    private lateinit var binding: ActivityDrawerActivtyBinding\r\n\r\n    val db = Firebase.firestore\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n\r\n        binding = ActivityDrawerActivtyBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        binding.navView.getHeaderView(0).findViewById<ImageView>(R.id.imageView_profile).setOnClickListener {\r\n\r\n            val intent = Intent(this, ProfileActivity::class.java)\r\n            startActivity(intent)\r\n\r\n        }\r\n\r\n        setSupportActionBar(binding.appBarMain.toolbar)\r\n        window.setFlags(\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN,\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN);\r\n\r\n\r\n        binding.appBarMain.fabAddChat.setOnClickListener { view ->\r\n            Snackbar.make(view, \"Replace with your own action\", Snackbar.LENGTH_LONG)\r\n                .setAction(\"Action\", null).show()\r\n        }\r\n        val drawerLayout: DrawerLayout = binding.drawerLayout\r\n        val navView: NavigationView = binding.navView\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        val stampCurrent = System.currentTimeMillis()\r\n        val stampSec = TimeUnit.MILLISECONDS.toSeconds(stampCurrent)\r\n        val stampNano = TimeUnit.MILLISECONDS.toNanos(stampCurrent).toInt()\r\n        // Passing each menu ID as a set of Ids because each\r\n        // menu should be considered as top level destinations.\r\n        appBarConfiguration = AppBarConfiguration(\r\n            setOf(\r\n                R.id.nav_home\r\n            ), drawerLayout\r\n        )\r\n\r\n        // Criação de Chat\r\n        binding.appBarMain.fabAddChat.setOnClickListener {\r\n            val chat = Chat(\r\n                \"Chat Teste \" + Random.nextInt(256),\r\n                \"chat\"\r\n\r\n            )\r\n            val message = Message(\r\n                \"system\",\r\n                \"This is an Alpha Chat, bugs are expected, please report them if you found some. Welcome to Singularity!\",\r\n                \"2021-12-22\",\r\n                Timestamp.now(),\r\n                \"\"\r\n\r\n            )\r\n            db.collection(\"chat\")\r\n                .add(chat.toHash())\r\n                .addOnSuccessListener { documentReference ->\r\n                    db.collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .collection(\"message\")\r\n                        .add(message.toHash())\r\n                    db.collection(\"profile\")\r\n                        .document(\"${Firebase.auth.currentUser!!.uid}\")\r\n                        .collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .set(chat)\r\n\r\n                }\r\n                .addOnFailureListener { e ->\r\n                    Log.w(ContentValues.TAG, \"Error adding document\", e)\r\n                }\r\n\r\n        }\r\n\r\n        // Log Out Button\r\n        binding.logoutLayout.setOnClickListener {\r\n\r\n            val prefs = PreferenceHelper.customPreference(this, \"User_data\")\r\n            prefs.password = null\r\n            prefs.email = null\r\n            prefs.userId = null\r\n\r\n            val intent = Intent(this, WelcomeActivity::class.java)\r\n            startActivity(intent)\r\n        }\r\n\r\n\r\n        // Passing each fragment ID as a set of Ids\r\n        setupActionBarWithNavController(navController, appBarConfiguration)\r\n        navView.setupWithNavController(navController)\r\n\r\n    }\r\n\r\n    override fun onCreateOptionsMenu(menu: Menu): Boolean {\r\n        // Inflate the menu; this adds items to the action bar if it is present.\r\n        menuInflater.inflate(R.menu.drawer, menu)\r\n        return true\r\n    }\r\n\r\n    override fun onSupportNavigateUp(): Boolean {\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        return navController.navigateUp(appBarConfiguration) || super.onSupportNavigateUp()\r\n    }\r\n}
---+Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---+<+>UTF-8
---+===================================================================
---+diff --git a/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt b/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt
---+--- a/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt	(revision 94adac9c4d1446b5b44892110de1ee705a5ef903)
---++++ b/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt	(date 1640607043249)
---+@@ -130,6 +130,7 @@
---+         setupActionBarWithNavController(navController, appBarConfiguration)
---+         navView.setupWithNavController(navController)
---+ 
---++
---+     }
---+ 
---+     override fun onCreateOptionsMenu(menu: Menu): Boolean {
---+Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch
---+IDEA additional info:
---+Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---+<+>UTF-8
---+===================================================================
---+diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch
---+new file mode 100644
---+--- /dev/null	(date 1640603575056)
---++++ b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch	(date 1640603575056)
---+@@ -0,0 +1,47 @@
---++Index: app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt
---++IDEA additional info:
---++Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---++<+>package com.singularity.ipcaplus\r\n\r\nimport android.content.ContentValues\r\nimport android.content.Intent\r\nimport android.os.Build\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport java.util.Base64\r\nimport android.util.Log\r\nimport android.view.Menu\r\nimport android.view.WindowManager\r\nimport android.widget.ImageView\r\nimport androidx.annotation.RequiresApi\r\nimport androidx.drawerlayout.widget.DrawerLayout\r\nimport androidx.navigation.findNavController\r\nimport androidx.navigation.ui.AppBarConfiguration\r\nimport androidx.navigation.ui.navigateUp\r\nimport androidx.navigation.ui.setupActionBarWithNavController\r\nimport androidx.navigation.ui.setupWithNavController\r\nimport com.google.android.material.navigation.NavigationView\r\nimport com.google.android.material.snackbar.Snackbar\r\nimport com.google.firebase.Timestamp\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.firestore.ktx.firestore\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.singularity.ipcaplus.calendar.AddEventActivity\r\nimport com.singularity.ipcaplus.cryptography.decryptWithAESmeta\r\nimport com.singularity.ipcaplus.cryptography.encryptMeta\r\nimport com.singularity.ipcaplus.cryptography.metaGenrateKey\r\nimport com.singularity.ipcaplus.databinding.ActivityDrawerActivtyBinding\r\nimport com.singularity.ipcaplus.models.Chat\r\nimport com.singularity.ipcaplus.models.Message\r\nimport com.singularity.ipcaplus.profile.ProfileActivity\r\nimport java.lang.StringBuilder\r\nimport java.util.Base64.getEncoder\r\nimport java.util.concurrent.TimeUnit\r\nimport javax.crypto.KeyGenerator\r\nimport javax.crypto.SecretKey\r\nimport kotlin.random.Random\r\n\r\n\r\nclass DrawerActivty : AppCompatActivity() {\r\n\r\n    private lateinit var appBarConfiguration: AppBarConfiguration\r\n    private lateinit var binding: ActivityDrawerActivtyBinding\r\n\r\n    val db = Firebase.firestore\r\n\r\n    @RequiresApi(Build.VERSION_CODES.O)\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n\r\n        binding = ActivityDrawerActivtyBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        binding.navView.getHeaderView(0).findViewById<ImageView>(R.id.imageView_profile).setOnClickListener {\r\n\r\n            val intent = Intent(this, ProfileActivity::class.java)\r\n            startActivity(intent)\r\n\r\n        }\r\n\r\n        //val secretKey: String = \"662ede816988e58fb6d057d9d85605e0\"\r\n\r\n        /*val message = \"Hello Welcome to Solanium Dr.Diogo\"\r\n        var meta = encryptMeta(message, keygen)\r\n        println(meta)\r\n\r\n        val message_decripted = decryptWithAESmeta(keygen, meta)\r\n        println(message_decripted)*/\r\n\r\n        setSupportActionBar(binding.appBarMain.toolbar)\r\n        window.setFlags(\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN,\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN);\r\n\r\n\r\n        binding.appBarMain.fabAddChat.setOnClickListener { view ->\r\n            Snackbar.make(view, \"Replace with your own action\", Snackbar.LENGTH_LONG)\r\n                .setAction(\"Action\", null).show()\r\n        }\r\n        val drawerLayout: DrawerLayout = binding.drawerLayout\r\n        val navView: NavigationView = binding.navView\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        val stampCurrent = System.currentTimeMillis()\r\n        val stampSec = TimeUnit.MILLISECONDS.toSeconds(stampCurrent)\r\n        val stampNano = TimeUnit.MILLISECONDS.toNanos(stampCurrent).toInt()\r\n        // Passing each menu ID as a set of Ids because each\r\n        // menu should be considered as top level destinations.\r\n        appBarConfiguration = AppBarConfiguration(\r\n            setOf(\r\n                R.id.nav_home\r\n            ), drawerLayout\r\n        )\r\n\r\n        // Criação de Chat\r\n        binding.appBarMain.fabAddChat.setOnClickListener {\r\n\r\n            /*val keygen = metaGenrateKey()\r\n\r\n            val intent = Intent(this, ChatActivity::class.java)\r\n            intent.putExtra(\"keygen\", keygen)\r\n            startActivity(intent)*/\r\n\r\n            val chat = Chat(\r\n                \"Chat Teste \" + Random.nextInt(256),\r\n                \"chat\"\r\n            )\r\n\r\n            var meta = encryptMeta(\"This is an Alpha Chat, bugs are expected, please report them if you found some. Welcome to Singularity!\", \"662ede816988e58fb6d057d9d85605e0\")\r\n            val message = Message(\r\n                \"system\",\r\n                meta.toString(),\r\n                \"2021-12-22\",\r\n                Timestamp.now(),\r\n                \"\"\r\n\r\n            )\r\n            db.collection(\"chat\")\r\n                .add(chat.toHash())\r\n                .addOnSuccessListener { documentReference ->\r\n                    db.collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .collection(\"message\")\r\n                        .add(message.toHash())\r\n                    db.collection(\"profile\")\r\n                        .document(\"${Firebase.auth.currentUser!!.uid}\")\r\n                        .collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .set(chat)\r\n\r\n                }\r\n                .addOnFailureListener { e ->\r\n                    Log.w(ContentValues.TAG, \"Error adding document\", e)\r\n                }\r\n\r\n        }\r\n        // Passing each fragment ID as a set of Ids\r\n        setupActionBarWithNavController(navController, appBarConfiguration)\r\n        navView.setupWithNavController(navController)\r\n\r\n    }\r\n\r\n    override fun onCreateOptionsMenu(menu: Menu): Boolean {\r\n        // Inflate the menu; this adds items to the action bar if it is present.\r\n        menuInflater.inflate(R.menu.drawer, menu)\r\n        return true\r\n    }\r\n\r\n    override fun onSupportNavigateUp(): Boolean {\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        return navController.navigateUp(appBarConfiguration) || super.onSupportNavigateUp()\r\n    }\r\n}
---++Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---++<+>UTF-8
---++===================================================================
---++diff --git a/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt b/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt
---++--- a/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt	(revision db6f0662753bfe0d8d9a8102dae42e6ff910c141)
---+++++ b/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt	(date 1640484576403)
---++@@ -31,11 +31,8 @@
---++ import com.singularity.ipcaplus.models.Chat
---++ import com.singularity.ipcaplus.models.Message
---++ import com.singularity.ipcaplus.profile.ProfileActivity
---++-import java.lang.StringBuilder
---++-import java.util.Base64.getEncoder
---++ import java.util.concurrent.TimeUnit
---++ import javax.crypto.KeyGenerator
---++-import javax.crypto.SecretKey
---++ import kotlin.random.Random
---++ 
---++ 
---++Index: .idea/deploymentTargetDropDown.xml
---++IDEA additional info:
---++Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---++<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"deploymentTargetDropDown\">\r\n    <targetSelectedWithDropDown>\r\n      <Target>\r\n        <type value=\"QUICK_BOOT_TARGET\" />\r\n        <deviceKey>\r\n          <Key>\r\n            <type value=\"VIRTUAL_DEVICE_PATH\" />\r\n            <value value=\"C:\\Users\\diogo\\.android\\avd\\Pixel_5_API_27.avd\" />\r\n          </Key>\r\n        </deviceKey>\r\n      </Target>\r\n    </targetSelectedWithDropDown>\r\n    <timeTargetWasSelectedWithDropDown value=\"2021-12-20T17:50:43.965935700Z\" />\r\n  </component>\r\n</project>
---++Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---++<+>UTF-8
---++===================================================================
---++diff --git a/.idea/deploymentTargetDropDown.xml b/.idea/deploymentTargetDropDown.xml
---++--- a/.idea/deploymentTargetDropDown.xml	(revision db6f0662753bfe0d8d9a8102dae42e6ff910c141)
---+++++ b/.idea/deploymentTargetDropDown.xml	(date 1640484631324)
---++@@ -7,11 +7,11 @@
---++         <deviceKey>
---++           <Key>
---++             <type value="VIRTUAL_DEVICE_PATH" />
---++-            <value value="C:\Users\diogo\.android\avd\Pixel_5_API_27.avd" />
---+++            <value value="C:\Users\diogo\.android\avd\Pixel_3_API_27.avd" />
---++           </Key>
---++         </deviceKey>
---++       </Target>
---++     </targetSelectedWithDropDown>
---++-    <timeTargetWasSelectedWithDropDown value="2021-12-20T17:50:43.965935700Z" />
---+++    <timeTargetWasSelectedWithDropDown value="2021-12-26T02:10:29.711791600Z" />
---++   </component>
---++ </project>
---++\ No newline at end of file
---+Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM__Default_Changelist_.xml
---+IDEA additional info:
---+Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---+<+>UTF-8
---+===================================================================
---+diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM__Default_Changelist_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM__Default_Changelist_.xml
---+new file mode 100644
---+--- /dev/null	(date 1640603694749)
---++++ b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM__Default_Changelist_.xml	(date 1640603694749)
---+@@ -0,0 +1,4 @@
---++<changelist name="Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]" date="1640603683316" recycled="true" deleted="true">
---++  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch" />
---++  <option name="DESCRIPTION" value="Uncommitted changes before Update at 12/27/2021 11:12 AM [Default Changelist]" />
---++</changelist>
---+\ No newline at end of file
---+Index: .idea/deploymentTargetDropDown.xml
---+IDEA additional info:
---+Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---+<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"deploymentTargetDropDown\">\r\n    <targetSelectedWithDropDown>\r\n      <Target>\r\n        <type value=\"QUICK_BOOT_TARGET\" />\r\n        <deviceKey>\r\n          <Key>\r\n            <type value=\"VIRTUAL_DEVICE_PATH\" />\r\n            <value value=\"C:\\Users\\diogo\\.android\\avd\\Pixel_5_API_27.avd\" />\r\n          </Key>\r\n        </deviceKey>\r\n      </Target>\r\n    </targetSelectedWithDropDown>\r\n    <timeTargetWasSelectedWithDropDown value=\"2021-12-20T17:50:43.965935700Z\" />\r\n  </component>\r\n</project>
---+Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---+<+>UTF-8
---+===================================================================
---+diff --git a/.idea/deploymentTargetDropDown.xml b/.idea/deploymentTargetDropDown.xml
---+--- a/.idea/deploymentTargetDropDown.xml	(revision 94adac9c4d1446b5b44892110de1ee705a5ef903)
---++++ b/.idea/deploymentTargetDropDown.xml	(date 1640603683277)
---+@@ -7,11 +7,11 @@
---+         <deviceKey>
---+           <Key>
---+             <type value="VIRTUAL_DEVICE_PATH" />
---+-            <value value="C:\Users\diogo\.android\avd\Pixel_5_API_27.avd" />
---++            <value value="C:\Users\diogo\.android\avd\Pixel_3_API_27.avd" />
---+           </Key>
---+         </deviceKey>
---+       </Target>
---+     </targetSelectedWithDropDown>
---+-    <timeTargetWasSelectedWithDropDown value="2021-12-20T17:50:43.965935700Z" />
---++    <timeTargetWasSelectedWithDropDown value="2021-12-26T02:10:29.711791600Z" />
---+   </component>
---+ </project>
---+\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch
--===================================================================
--diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch
--deleted file mode 100644
----- a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch	(revision 6357a5bbd27af02f311f8311dcf2ebf10c453e1f)
--+++ /dev/null	(revision 6357a5bbd27af02f311f8311dcf2ebf10c453e1f)
--@@ -1,47 +0,0 @@
---Index: app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.singularity.ipcaplus\r\n\r\nimport android.content.ContentValues\r\nimport android.content.Intent\r\nimport android.os.Build\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport java.util.Base64\r\nimport android.util.Log\r\nimport android.view.Menu\r\nimport android.view.WindowManager\r\nimport android.widget.ImageView\r\nimport androidx.annotation.RequiresApi\r\nimport androidx.drawerlayout.widget.DrawerLayout\r\nimport androidx.navigation.findNavController\r\nimport androidx.navigation.ui.AppBarConfiguration\r\nimport androidx.navigation.ui.navigateUp\r\nimport androidx.navigation.ui.setupActionBarWithNavController\r\nimport androidx.navigation.ui.setupWithNavController\r\nimport com.google.android.material.navigation.NavigationView\r\nimport com.google.android.material.snackbar.Snackbar\r\nimport com.google.firebase.Timestamp\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.firestore.ktx.firestore\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.singularity.ipcaplus.calendar.AddEventActivity\r\nimport com.singularity.ipcaplus.cryptography.decryptWithAESmeta\r\nimport com.singularity.ipcaplus.cryptography.encryptMeta\r\nimport com.singularity.ipcaplus.cryptography.metaGenrateKey\r\nimport com.singularity.ipcaplus.databinding.ActivityDrawerActivtyBinding\r\nimport com.singularity.ipcaplus.models.Chat\r\nimport com.singularity.ipcaplus.models.Message\r\nimport com.singularity.ipcaplus.profile.ProfileActivity\r\nimport java.lang.StringBuilder\r\nimport java.util.Base64.getEncoder\r\nimport java.util.concurrent.TimeUnit\r\nimport javax.crypto.KeyGenerator\r\nimport javax.crypto.SecretKey\r\nimport kotlin.random.Random\r\n\r\n\r\nclass DrawerActivty : AppCompatActivity() {\r\n\r\n    private lateinit var appBarConfiguration: AppBarConfiguration\r\n    private lateinit var binding: ActivityDrawerActivtyBinding\r\n\r\n    val db = Firebase.firestore\r\n\r\n    @RequiresApi(Build.VERSION_CODES.O)\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n\r\n        binding = ActivityDrawerActivtyBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        binding.navView.getHeaderView(0).findViewById<ImageView>(R.id.imageView_profile).setOnClickListener {\r\n\r\n            val intent = Intent(this, ProfileActivity::class.java)\r\n            startActivity(intent)\r\n\r\n        }\r\n\r\n        //val secretKey: String = \"662ede816988e58fb6d057d9d85605e0\"\r\n\r\n        /*val message = \"Hello Welcome to Solanium Dr.Diogo\"\r\n        var meta = encryptMeta(message, keygen)\r\n        println(meta)\r\n\r\n        val message_decripted = decryptWithAESmeta(keygen, meta)\r\n        println(message_decripted)*/\r\n\r\n        setSupportActionBar(binding.appBarMain.toolbar)\r\n        window.setFlags(\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN,\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN);\r\n\r\n\r\n        binding.appBarMain.fabAddChat.setOnClickListener { view ->\r\n            Snackbar.make(view, \"Replace with your own action\", Snackbar.LENGTH_LONG)\r\n                .setAction(\"Action\", null).show()\r\n        }\r\n        val drawerLayout: DrawerLayout = binding.drawerLayout\r\n        val navView: NavigationView = binding.navView\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        val stampCurrent = System.currentTimeMillis()\r\n        val stampSec = TimeUnit.MILLISECONDS.toSeconds(stampCurrent)\r\n        val stampNano = TimeUnit.MILLISECONDS.toNanos(stampCurrent).toInt()\r\n        // Passing each menu ID as a set of Ids because each\r\n        // menu should be considered as top level destinations.\r\n        appBarConfiguration = AppBarConfiguration(\r\n            setOf(\r\n                R.id.nav_home\r\n            ), drawerLayout\r\n        )\r\n\r\n        // Criação de Chat\r\n        binding.appBarMain.fabAddChat.setOnClickListener {\r\n\r\n            /*val keygen = metaGenrateKey()\r\n\r\n            val intent = Intent(this, ChatActivity::class.java)\r\n            intent.putExtra(\"keygen\", keygen)\r\n            startActivity(intent)*/\r\n\r\n            val chat = Chat(\r\n                \"Chat Teste \" + Random.nextInt(256),\r\n                \"chat\"\r\n            )\r\n\r\n            var meta = encryptMeta(\"This is an Alpha Chat, bugs are expected, please report them if you found some. Welcome to Singularity!\", \"662ede816988e58fb6d057d9d85605e0\")\r\n            val message = Message(\r\n                \"system\",\r\n                meta.toString(),\r\n                \"2021-12-22\",\r\n                Timestamp.now(),\r\n                \"\"\r\n\r\n            )\r\n            db.collection(\"chat\")\r\n                .add(chat.toHash())\r\n                .addOnSuccessListener { documentReference ->\r\n                    db.collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .collection(\"message\")\r\n                        .add(message.toHash())\r\n                    db.collection(\"profile\")\r\n                        .document(\"${Firebase.auth.currentUser!!.uid}\")\r\n                        .collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .set(chat)\r\n\r\n                }\r\n                .addOnFailureListener { e ->\r\n                    Log.w(ContentValues.TAG, \"Error adding document\", e)\r\n                }\r\n\r\n        }\r\n        // Passing each fragment ID as a set of Ids\r\n        setupActionBarWithNavController(navController, appBarConfiguration)\r\n        navView.setupWithNavController(navController)\r\n\r\n    }\r\n\r\n    override fun onCreateOptionsMenu(menu: Menu): Boolean {\r\n        // Inflate the menu; this adds items to the action bar if it is present.\r\n        menuInflater.inflate(R.menu.drawer, menu)\r\n        return true\r\n    }\r\n\r\n    override fun onSupportNavigateUp(): Boolean {\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        return navController.navigateUp(appBarConfiguration) || super.onSupportNavigateUp()\r\n    }\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt b/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt
------ a/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt	(revision db6f0662753bfe0d8d9a8102dae42e6ff910c141)
---+++ b/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt	(date 1640484576403)
---@@ -31,11 +31,8 @@
--- import com.singularity.ipcaplus.models.Chat
--- import com.singularity.ipcaplus.models.Message
--- import com.singularity.ipcaplus.profile.ProfileActivity
----import java.lang.StringBuilder
----import java.util.Base64.getEncoder
--- import java.util.concurrent.TimeUnit
--- import javax.crypto.KeyGenerator
----import javax.crypto.SecretKey
--- import kotlin.random.Random
--- 
--- 
---Index: .idea/deploymentTargetDropDown.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"deploymentTargetDropDown\">\r\n    <targetSelectedWithDropDown>\r\n      <Target>\r\n        <type value=\"QUICK_BOOT_TARGET\" />\r\n        <deviceKey>\r\n          <Key>\r\n            <type value=\"VIRTUAL_DEVICE_PATH\" />\r\n            <value value=\"C:\\Users\\diogo\\.android\\avd\\Pixel_5_API_27.avd\" />\r\n          </Key>\r\n        </deviceKey>\r\n      </Target>\r\n    </targetSelectedWithDropDown>\r\n    <timeTargetWasSelectedWithDropDown value=\"2021-12-20T17:50:43.965935700Z\" />\r\n  </component>\r\n</project>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/.idea/deploymentTargetDropDown.xml b/.idea/deploymentTargetDropDown.xml
------ a/.idea/deploymentTargetDropDown.xml	(revision db6f0662753bfe0d8d9a8102dae42e6ff910c141)
---+++ b/.idea/deploymentTargetDropDown.xml	(date 1640484631324)
---@@ -7,11 +7,11 @@
---         <deviceKey>
---           <Key>
---             <type value="VIRTUAL_DEVICE_PATH" />
----            <value value="C:\Users\diogo\.android\avd\Pixel_5_API_27.avd" />
---+            <value value="C:\Users\diogo\.android\avd\Pixel_3_API_27.avd" />
---           </Key>
---         </deviceKey>
---       </Target>
---     </targetSelectedWithDropDown>
----    <timeTargetWasSelectedWithDropDown value="2021-12-20T17:50:43.965935700Z" />
---+    <timeTargetWasSelectedWithDropDown value="2021-12-26T02:10:29.711791600Z" />
---   </component>
--- </project>
---\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM__Default_Changelist_.xml
--===================================================================
--diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM__Default_Changelist_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM__Default_Changelist_.xml
--deleted file mode 100644
----- a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM__Default_Changelist_.xml	(revision 6357a5bbd27af02f311f8311dcf2ebf10c453e1f)
--+++ /dev/null	(revision 6357a5bbd27af02f311f8311dcf2ebf10c453e1f)
--@@ -1,4 +0,0 @@
---<changelist name="Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]" date="1640603683316" recycled="true" deleted="true">
---  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_11_12_AM_[Default_Changelist]/shelved.patch" />
---  <option name="DESCRIPTION" value="Uncommitted changes before Update at 12/27/2021 11:12 AM [Default Changelist]" />
---</changelist>
--\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_25_2021_11_48_PM__Default_Changelist_.xml
--===================================================================
--diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_25_2021_11_48_PM__Default_Changelist_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_12_25_2021_11_48_PM__Default_Changelist_.xml
--deleted file mode 100644
----- a/.idea/shelf/Uncommitted_changes_before_Update_at_12_25_2021_11_48_PM__Default_Changelist_.xml	(revision 6357a5bbd27af02f311f8311dcf2ebf10c453e1f)
--+++ /dev/null	(revision 6357a5bbd27af02f311f8311dcf2ebf10c453e1f)
--@@ -1,4 +0,0 @@
---<changelist name="Uncommitted_changes_before_Update_at_12_25_2021_11_48_PM_[Default_Changelist]" date="1640476111741" recycled="true" deleted="true">
---  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_12_25_2021_11_48_PM_[Default_Changelist]/shelved.patch" />
---  <option name="DESCRIPTION" value="Uncommitted changes before Update at 12/25/2021 11:48 PM [Default Changelist]" />
---</changelist>
--\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_25_2021_11_48_PM_[Default_Changelist]/shelved.patch
--===================================================================
--diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_25_2021_11_48_PM_[Default_Changelist]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_12_25_2021_11_48_PM_[Default_Changelist]/shelved.patch
--deleted file mode 100644
----- a/.idea/shelf/Uncommitted_changes_before_Update_at_12_25_2021_11_48_PM_[Default_Changelist]/shelved.patch	(revision 6357a5bbd27af02f311f8311dcf2ebf10c453e1f)
--+++ /dev/null	(revision 6357a5bbd27af02f311f8311dcf2ebf10c453e1f)
--@@ -1,98 +0,0 @@
---Index: app/src/main/java/com/singularity/ipcaplus/cryptography/metaData.kt
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.singularity.ipcaplus.cryptography\r\n\r\nimport android.content.Context\r\nimport android.preference.PreferenceManager\r\nimport org.bouncycastle.jce.provider.BouncyCastleProvider\r\nimport org.bouncycastle.util.encoders.Base64\r\nimport java.io.*\r\nimport java.security.InvalidKeyException\r\nimport java.security.NoSuchAlgorithmException\r\nimport java.security.Security\r\nimport javax.crypto.*\r\nimport javax.crypto.spec.SecretKeySpec\r\n\r\n\r\nfun encryptMeta(strToEncrypt: String, secret_key: String): String? {\r\n    Security.addProvider(BouncyCastleProvider())\r\n    var keyBytes: ByteArray\r\n\r\n    try {\r\n        keyBytes = secret_key.toByteArray(charset(\"UTF8\"))\r\n        val skey = SecretKeySpec(keyBytes, \"AES\")\r\n        val input = strToEncrypt.toByteArray(charset(\"UTF8\"))\r\n\r\n        synchronized(Cipher::class.java) {\r\n            val cipher = Cipher.getInstance(\"AES/ECB/PKCS7Padding\")\r\n            cipher.init(Cipher.ENCRYPT_MODE, skey)\r\n\r\n            val cipherText = ByteArray(cipher.getOutputSize(input.size))\r\n            var ctLength = cipher.update(\r\n                input, 0, input.size,\r\n                cipherText, 0\r\n            )\r\n            ctLength += cipher.doFinal(cipherText, ctLength)\r\n            return String(\r\n                Base64.encode(cipherText)\r\n            )\r\n        }\r\n    } catch (uee: UnsupportedEncodingException) {\r\n        uee.printStackTrace()\r\n    } catch (ibse: IllegalBlockSizeException) {\r\n        ibse.printStackTrace()\r\n    } catch (bpe: BadPaddingException) {\r\n        bpe.printStackTrace()\r\n    } catch (ike: InvalidKeyException) {\r\n        ike.printStackTrace()\r\n    } catch (nspe: NoSuchPaddingException) {\r\n        nspe.printStackTrace()\r\n    } catch (nsae: NoSuchAlgorithmException) {\r\n        nsae.printStackTrace()\r\n    } catch (e: ShortBufferException) {\r\n        e.printStackTrace()\r\n    }\r\n\r\n    return null\r\n}\r\n\r\n\r\nfun decryptWithAESmeta(key: String, strToDecrypt: String?): String? {\r\n    Security.addProvider(BouncyCastleProvider())\r\n    var keyBytes: ByteArray\r\n\r\n    try {\r\n        keyBytes = key.toByteArray(charset(\"UTF8\"))\r\n        val skey = SecretKeySpec(keyBytes, \"AES\")\r\n        val input = org.bouncycastle.util.encoders.Base64\r\n            .decode(strToDecrypt?.trim { it <= ' ' }?.toByteArray(charset(\"UTF8\")))\r\n\r\n        synchronized(Cipher::class.java) {\r\n            val cipher = Cipher.getInstance(\"AES/ECB/PKCS7Padding\")\r\n            cipher.init(Cipher.DECRYPT_MODE, skey)\r\n\r\n            val plainText = ByteArray(cipher.getOutputSize(input.size))\r\n            var ptLength = cipher.update(input, 0, input.size, plainText, 0)\r\n            ptLength += cipher.doFinal(plainText, ptLength)\r\n            val decryptedString = String(plainText)\r\n            return decryptedString.trim { it <= ' ' }\r\n        }\r\n    } catch (uee: UnsupportedEncodingException) {\r\n        uee.printStackTrace()\r\n    } catch (ibse: IllegalBlockSizeException) {\r\n        ibse.printStackTrace()\r\n    } catch (bpe: BadPaddingException) {\r\n        bpe.printStackTrace()\r\n    } catch (ike: InvalidKeyException) {\r\n        ike.printStackTrace()\r\n    } catch (nspe: NoSuchPaddingException) {\r\n        nspe.printStackTrace()\r\n    } catch (nsae: NoSuchAlgorithmException) {\r\n        nsae.printStackTrace()\r\n    } catch (e: ShortBufferException) {\r\n        e.printStackTrace()\r\n    }\r\n\r\n    return null\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/app/src/main/java/com/singularity/ipcaplus/cryptography/metaData.kt b/app/src/main/java/com/singularity/ipcaplus/cryptography/metaData.kt
------ a/app/src/main/java/com/singularity/ipcaplus/cryptography/metaData.kt	(revision 68db8e92ec156616c8dd39c656747d5b2c7a2133)
---+++ b/app/src/main/java/com/singularity/ipcaplus/cryptography/metaData.kt	(date 1640260278648)
---@@ -6,14 +6,17 @@
--- import org.bouncycastle.util.encoders.Base64
--- import java.io.*
--- import java.security.InvalidKeyException
---+import java.security.MessageDigest
--- import java.security.NoSuchAlgorithmException
--- import java.security.Security
---+import java.util.Objects.hash
--- import javax.crypto.*
--- import javax.crypto.spec.SecretKeySpec
--- 
--- 
--- fun encryptMeta(strToEncrypt: String, secret_key: String): String? {
---     Security.addProvider(BouncyCastleProvider())
---+    hash(strToEncrypt)
---     var keyBytes: ByteArray
--- 
---     try {
---@@ -54,7 +57,6 @@
---     return null
--- }
--- 
----
--- fun decryptWithAESmeta(key: String, strToDecrypt: String?): String? {
---     Security.addProvider(BouncyCastleProvider())
---     var keyBytes: ByteArray
---Index: app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.singularity.ipcaplus\r\n\r\nimport android.content.ContentValues\r\nimport android.content.Intent\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport android.util.Log\r\nimport android.view.Menu\r\nimport android.view.WindowManager\r\nimport android.widget.ImageView\r\nimport androidx.drawerlayout.widget.DrawerLayout\r\nimport androidx.navigation.findNavController\r\nimport androidx.navigation.ui.AppBarConfiguration\r\nimport androidx.navigation.ui.navigateUp\r\nimport androidx.navigation.ui.setupActionBarWithNavController\r\nimport androidx.navigation.ui.setupWithNavController\r\nimport com.google.android.material.navigation.NavigationView\r\nimport com.google.android.material.snackbar.Snackbar\r\nimport com.google.firebase.Timestamp\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.firestore.ktx.firestore\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.singularity.ipcaplus.calendar.AddEventActivity\r\nimport com.singularity.ipcaplus.databinding.ActivityDrawerActivtyBinding\r\nimport com.singularity.ipcaplus.models.Chat\r\nimport com.singularity.ipcaplus.models.Message\r\nimport com.singularity.ipcaplus.profile.ProfileActivity\r\nimport java.util.concurrent.TimeUnit\r\nimport kotlin.random.Random\r\n\r\n\r\nclass DrawerActivty : AppCompatActivity() {\r\n\r\n    private lateinit var appBarConfiguration: AppBarConfiguration\r\n    private lateinit var binding: ActivityDrawerActivtyBinding\r\n\r\n    val db = Firebase.firestore\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n\r\n        binding = ActivityDrawerActivtyBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        binding.navView.getHeaderView(0).findViewById<ImageView>(R.id.imageView_profile).setOnClickListener {\r\n\r\n            val intent = Intent(this, ProfileActivity::class.java)\r\n            startActivity(intent)\r\n\r\n        }\r\n\r\n        setSupportActionBar(binding.appBarMain.toolbar)\r\n        window.setFlags(\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN,\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN);\r\n\r\n\r\n        binding.appBarMain.fabAddChat.setOnClickListener { view ->\r\n            Snackbar.make(view, \"Replace with your own action\", Snackbar.LENGTH_LONG)\r\n                .setAction(\"Action\", null).show()\r\n        }\r\n        val drawerLayout: DrawerLayout = binding.drawerLayout\r\n        val navView: NavigationView = binding.navView\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        val stampCurrent = System.currentTimeMillis()\r\n        val stampSec = TimeUnit.MILLISECONDS.toSeconds(stampCurrent)\r\n        val stampNano = TimeUnit.MILLISECONDS.toNanos(stampCurrent).toInt()\r\n        // Passing each menu ID as a set of Ids because each\r\n        // menu should be considered as top level destinations.\r\n        appBarConfiguration = AppBarConfiguration(\r\n            setOf(\r\n                R.id.nav_home\r\n            ), drawerLayout\r\n        )\r\n\r\n        // Criação de Chat\r\n        binding.appBarMain.fabAddChat.setOnClickListener {\r\n            val chat = Chat(\r\n                \"Chat Teste \" + Random.nextInt(256),\r\n                \"chat\"\r\n\r\n            )\r\n            val message = Message(\r\n                \"system\",\r\n                \"This is an Alpha Chat, bugs are expected, please report them if you found some. Welcome to Singularity!\",\r\n                \"2021-12-22\",\r\n                Timestamp.now(),\r\n                \"\"\r\n\r\n            )\r\n            db.collection(\"chat\")\r\n                .add(chat.toHash())\r\n                .addOnSuccessListener { documentReference ->\r\n                    db.collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .collection(\"message\")\r\n                        .add(message.toHash())\r\n                    db.collection(\"profile\")\r\n                        .document(\"${Firebase.auth.currentUser!!.uid}\")\r\n                        .collection(\"chat\")\r\n                        .document(\"${documentReference.id}\")\r\n                        .set(chat)\r\n\r\n                }\r\n                .addOnFailureListener { e ->\r\n                    Log.w(ContentValues.TAG, \"Error adding document\", e)\r\n                }\r\n\r\n        }\r\n        // Passing each fragment ID as a set of Ids\r\n        setupActionBarWithNavController(navController, appBarConfiguration)\r\n        navView.setupWithNavController(navController)\r\n\r\n    }\r\n\r\n    override fun onCreateOptionsMenu(menu: Menu): Boolean {\r\n        // Inflate the menu; this adds items to the action bar if it is present.\r\n        menuInflater.inflate(R.menu.drawer, menu)\r\n        return true\r\n    }\r\n\r\n    override fun onSupportNavigateUp(): Boolean {\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        return navController.navigateUp(appBarConfiguration) || super.onSupportNavigateUp()\r\n    }\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt b/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt
------ a/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt	(revision 68db8e92ec156616c8dd39c656747d5b2c7a2133)
---+++ b/app/src/main/java/com/singularity/ipcaplus/DrawerActivty.kt	(date 1640260544587)
---@@ -21,11 +21,14 @@
--- import com.google.firebase.firestore.ktx.firestore
--- import com.google.firebase.ktx.Firebase
--- import com.singularity.ipcaplus.calendar.AddEventActivity
---+import com.singularity.ipcaplus.cryptography.decryptWithAESmeta
---+import com.singularity.ipcaplus.cryptography.encryptMeta
--- import com.singularity.ipcaplus.databinding.ActivityDrawerActivtyBinding
--- import com.singularity.ipcaplus.models.Chat
--- import com.singularity.ipcaplus.models.Message
--- import com.singularity.ipcaplus.profile.ProfileActivity
--- import java.util.concurrent.TimeUnit
---+import javax.crypto.KeyGenerator
--- import kotlin.random.Random
--- 
--- 
---@@ -49,6 +52,18 @@
--- 
---         }
--- 
---+        val keygen = KeyGenerator.getInstance("AES")
---+        keygen.init(256)
---+
---+        val secret_key= keygen.init(256).toString()
---+        println(secret_key)
---+
---+        val message = "Hello Welcome to Solanium Dr.Diogo"
---+        var meta = encryptMeta(secret_key, message)
---+
---+        val message_decripted = decryptWithAESmeta(secret_key, meta)
---+        println(message_decripted)
---+
---         setSupportActionBar(binding.appBarMain.toolbar)
---         window.setFlags(
---             WindowManager.LayoutParams.FLAG_FULLSCREEN,
---Index: .idea/misc.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"DesignSurface\">\r\n    <option name=\"filePathToZoomLevelMap\">\r\n      <map>\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/breaktime.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/breaktime_form.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/button_filtro.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/button_green.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/button_register.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/button_week_day.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/circle.xml\" value=\"0.23802083333333332\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/custom_black_border.xml\" value=\"0.23802083333333332\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/datetime_selected_item.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/event_shape.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_arrow_back_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_baseline_arrow_back_ios_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_baseline_arrow_forward_ios_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_contact_icon.xml\" value=\"0.2520833333333333\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_documentdrawer_icons.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_folderdrawer_icons.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_foto_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_homedrawer_icons.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_lg_ipca.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_logo_branco_ipca.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_logout.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_menu_camera.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_menu_gallery.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_menu_slideshow.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_paper_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_search_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_swap_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/side_nav_bar.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_add_event.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_calendar.xml\" value=\"0.36277173913043476\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_chat.xml\" value=\"0.2359375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_contacts.xml\" value=\"0.2359375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_drawer_activty.xml\" value=\"0.2359375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_login.xml\" value=\"0.2359375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_profile.xml\" value=\"0.36277173913043476\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_register.xml\" value=\"0.2359375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_schedule.xml\" value=\"0.3546195652173913\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_search.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_tab.xml\" value=\"0.2359375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_welcome.xml\" value=\"0.2359375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/app_bar_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/content_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/fragment_calendar.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/nav_header_main.xml\" value=\"0.358695652173913\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_event.xml\" value=\"0.7456647398843931\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_message_self.xml\" value=\"0.3546195652173913\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_subject.xml\" value=\"0.3546195652173913\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/sample_date_time_picker.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/menu/activity_drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/menu/drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/chat_message_shape.xml\" value=\"0.29074074074074074\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/chat_photo.xml\" value=\"0.2953703703703704\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/circle.xml\" value=\"0.3101851851851852\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/ic_camera.xml\" value=\"0.22135416666666666\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/ic_upload.xml\" value=\"0.22135416666666666\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/rounded_shape.xml\" value=\"0.3101851851851852\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/user_message_photo.xml\" value=\"0.2953703703703704\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_chat.xml\" value=\"0.25\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_login.xml\" value=\"0.2957427536231884\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_main.xml\" value=\"0.2957427536231884\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_register.xml\" value=\"0.28940217391304346\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_chat.xml\" value=\"0.67\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_message.xml\" value=\"0.28940217391304346\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_message_others.xml\" value=\"0.2694746376811594\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_message_self.xml\" value=\"0.17831813576494426\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_message_system.xml\" value=\"0.26268115942028986\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_pesquisa.xml\" value=\"0.26268115942028986\" />\r\n        <entry key=\"..\\:/Users/Asus/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_search.xml\" value=\"0.25\" />\r\n        <entry key=\"..\\:/Users/Asus/Documents/GitHub/ipca_plus/app/src/main/res/menu/drawer.xml\" value=\"0.128125\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/ic_menu_slideshow.xml\" value=\"0.22135416666666666\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/round_corner_drawer.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/rounded_shape.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_drawer_activty.xml\" value=\"0.28306159420289856\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/app_bar_main.xml\" value=\"0.28306159420289856\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/nav_header_main.xml\" value=\"0.28306159420289856\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/menu/activity_drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/menu/drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_chat.xml\" value=\"0.14010416666666667\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_drawer_activty.xml\" value=\"0.13020833333333334\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_tab.xml\" value=\"0.14010416666666667\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/app_bar_main.xml\" value=\"0.13020833333333334\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/content_main.xml\" value=\"0.13020833333333334\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/fragment_calendar.xml\" value=\"0.264\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/fragment_chats.xml\" value=\"0.14010416666666667\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/fragment_slideshow.xml\" value=\"0.14010416666666667\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/nav_header_main.xml\" value=\"0.13020833333333334\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/menu/activity_drawer.xml\" value=\"0.25416666666666665\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/menu/drawer.xml\" value=\"0.25416666666666665\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/drawable/chat_photo.xml\" value=\"0.3769230769230769\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/drawable/gradient_shadow.xml\" value=\"0.3769230769230769\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/drawable/ic_video.xml\" value=\"0.3769230769230769\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/drawable/shadow.xml\" value=\"0.3769230769230769\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_add_event.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_calendar.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_chat.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_contacts.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_drawer_activty.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_profile.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_register.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_schedule.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_search.xml\" value=\"0.5\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_tab.xml\" value=\"0.26766304347826086\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/app_bar_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/content_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/nav_header_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/row_chat.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/row_pesquisa.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/menu/activity_drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/menu/drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"app/src/main/res/drawable/button_register.xml\" value=\"0.3425925925925926\" />\r\n        <entry key=\"app/src/main/res/drawable/event_shape.xml\" value=\"0.31203703703703706\" />\r\n        <entry key=\"app/src/main/res/drawable/ic_baseline_add_24.xml\" value=\"0.3671875\" />\r\n        <entry key=\"app/src/main/res/drawable/ic_baseline_dehaze_24.xml\" value=\"0.3671875\" />\r\n        <entry key=\"app/src/main/res/drawable/ic_frame_4.xml\" value=\"0.3671875\" />\r\n        <entry key=\"app/src/main/res/drawable/ic_lg_ipca.xml\" value=\"0.36153846153846153\" />\r\n        <entry key=\"app/src/main/res/drawable/pop_up_round_corners.xml\" value=\"0.36153846153846153\" />\r\n        <entry key=\"app/src/main/res/drawable/round_corner_drawer.xml\" value=\"0.21354166666666666\" />\r\n        <entry key=\"app/src/main/res/drawable/rounded_shape.xml\" value=\"0.20208333333333334\" />\r\n        <entry key=\"app/src/main/res/layout/activity_drawer.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/layout/activity_drawer_activty.xml\" value=\"0.14402173913043478\" />\r\n        <entry key=\"app/src/main/res/layout/activity_login.xml\" value=\"0.19427083333333334\" />\r\n        <entry key=\"app/src/main/res/layout/activity_search.xml\" value=\"0.32563405797101447\" />\r\n        <entry key=\"app/src/main/res/layout/activity_tab.xml\" value=\"0.33\" />\r\n        <entry key=\"app/src/main/res/layout/activity_welcome.xml\" value=\"0.33\" />\r\n        <entry key=\"app/src/main/res/layout/app_bar_drawer.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/layout/app_bar_main.xml\" value=\"0.1707193515704154\" />\r\n        <entry key=\"app/src/main/res/layout/content_drawer.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/layout/content_main.xml\" value=\"0.32563405797101447\" />\r\n        <entry key=\"app/src/main/res/layout/fragment_gallery.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/layout/fragment_home.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/layout/fragment_official_chats.xml\" value=\"0.32563405797101447\" />\r\n        <entry key=\"app/src/main/res/layout/fragment_tab.xml\" value=\"0.3489583333333333\" />\r\n        <entry key=\"app/src/main/res/layout/nav_header_main.xml\" value=\"0.32563405797101447\" />\r\n        <entry key=\"app/src/main/res/layout/row_chat.xml\" value=\"0.32563405797101447\" />\r\n        <entry key=\"app/src/main/res/menu/activity_drawer.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/menu/drawer.xml\" value=\"0.325\" />\r\n      </map>\r\n    </option>\r\n  </component>\r\n  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_11\" default=\"true\" project-jdk-name=\"11\" project-jdk-type=\"JavaSDK\">\r\n    <output url=\"file://$PROJECT_DIR$/build/classes\" />\r\n  </component>\r\n  <component name=\"ProjectType\">\r\n    <option name=\"id\" value=\"Android\" />\r\n  </component>\r\n</project>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/.idea/misc.xml b/.idea/misc.xml
------ a/.idea/misc.xml	(revision 68db8e92ec156616c8dd39c656747d5b2c7a2133)
---+++ b/.idea/misc.xml	(date 1640260007432)
---@@ -77,6 +77,7 @@
---         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/round_corner_drawer.xml" value="0.33" />
---         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/rounded_shape.xml" value="0.3828125" />
---         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_drawer_activty.xml" value="0.28306159420289856" />
---+        <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_news_web.xml" value="0.2966485507246377" />
---         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/app_bar_main.xml" value="0.28306159420289856" />
---         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/nav_header_main.xml" value="0.28306159420289856" />
---         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/menu/activity_drawer.xml" value="0.36666666666666664" />
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_3_06_PM__Default_Changelist_.xml
--===================================================================
--diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_3_06_PM__Default_Changelist_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_3_06_PM__Default_Changelist_.xml
--deleted file mode 100644
----- a/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_3_06_PM__Default_Changelist_.xml	(revision 6357a5bbd27af02f311f8311dcf2ebf10c453e1f)
--+++ /dev/null	(revision 6357a5bbd27af02f311f8311dcf2ebf10c453e1f)
--@@ -1,4 +0,0 @@
---<changelist name="Uncommitted_changes_before_Update_at_12_27_2021_3_06_PM_[Default_Changelist]" date="1640617599712" recycled="true" deleted="true">
---  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_12_27_2021_3_06_PM_[Default_Changelist]/shelved.patch" />
---  <option name="DESCRIPTION" value="Uncommitted changes before Update at 12/27/2021 3:06 PM [Default Changelist]" />
---</changelist>
--\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_rebase__Default_Changelist_.xml
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_rebase__Default_Changelist_.xml b/.idea/shelf/Uncommitted_changes_before_rebase__Default_Changelist_.xml
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_rebase__Default_Changelist_.xml	(revision 61aecb98de8cc827aadb6472252112d5a0bddc54)
-+++ /dev/null	(revision 61aecb98de8cc827aadb6472252112d5a0bddc54)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_rebase_[Default_Changelist]" date="1641230754374" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_rebase_[Default_Changelist]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before rebase [Default Changelist]" />
--</changelist>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_03_01_2022_15_56__Default_Changelist_.xml
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_03_01_2022_15_56__Default_Changelist_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_03_01_2022_15_56__Default_Changelist_.xml
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_03_01_2022_15_56__Default_Changelist_.xml	(revision 61aecb98de8cc827aadb6472252112d5a0bddc54)
-+++ /dev/null	(revision 61aecb98de8cc827aadb6472252112d5a0bddc54)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Update_at_03_01_2022_15_56_[Default_Changelist]" date="1641225390584" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_03_01_2022_15_56_[Default_Changelist]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Update at 03/01/2022 15:56 [Default Changelist]" />
--</changelist>
-\ No newline at end of file
-Index: .idea/deploymentTargetDropDown.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"deploymentTargetDropDown\">\r\n    <targetSelectedWithDropDown>\r\n      <Target>\r\n        <type value=\"QUICK_BOOT_TARGET\" />\r\n        <deviceKey>\r\n          <Key>\r\n            <type value=\"VIRTUAL_DEVICE_PATH\" />\r\n            <value value=\"C:\\Users\\nunoi\\.android\\avd\\Pixel_5_API_30.avd\" />\r\n          </Key>\r\n        </deviceKey>\r\n      </Target>\r\n    </targetSelectedWithDropDown>\r\n    <timeTargetWasSelectedWithDropDown value=\"2022-01-01T23:53:04.443341100Z\" />\r\n  </component>\r\n</project>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/.idea/deploymentTargetDropDown.xml b/.idea/deploymentTargetDropDown.xml
---- a/.idea/deploymentTargetDropDown.xml	(revision 61aecb98de8cc827aadb6472252112d5a0bddc54)
-+++ b/.idea/deploymentTargetDropDown.xml	(date 1641766813339)
-@@ -7,11 +7,11 @@
-         <deviceKey>
-           <Key>
-             <type value="VIRTUAL_DEVICE_PATH" />
--            <value value="C:\Users\nunoi\.android\avd\Pixel_5_API_30.avd" />
-+            <value value="C:\Users\diogo\.android\avd\Pixel_5_R.avd" />
-           </Key>
-         </deviceKey>
-       </Target>
-     </targetSelectedWithDropDown>
--    <timeTargetWasSelectedWithDropDown value="2022-01-01T23:53:04.443341100Z" />
-+    <timeTargetWasSelectedWithDropDown value="2022-01-09T22:20:07.031329200Z" />
-   </component>
- </project>
-\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_10_01_22__15_32__Default_Changelist_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_10_01_22__15_32__Default_Changelist_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_10_01_22__15_32__Default_Changelist_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_10_01_22__15_32__Default_Changelist_.xml	(revision 8e96e253b18fde6ba59a95a8201590b51e0a7e05)
+++ /dev/null	(revision 8e96e253b18fde6ba59a95a8201590b51e0a7e05)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_10_01_22,_15_32_[Default_Changelist]" date="1641828750923" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_10_01_22,_15_32_[Default_Changelist]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 10/01/22, 15:32 [Default Changelist]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_10_01_22,_15_32_[Default_Changelist]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_10_01_22,_15_32_[Default_Changelist]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_10_01_22,_15_32_[Default_Changelist]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_10_01_22,_15_32_[Default_Changelist]/shelved.patch	(revision 8e96e253b18fde6ba59a95a8201590b51e0a7e05)
+++ /dev/null	(revision 8e96e253b18fde6ba59a95a8201590b51e0a7e05)
@@ -1,531 +0,0 @@
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_01_01_2022_19_50_[Default_Changelist]/shelved.patch
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_01_01_2022_19_50_[Default_Changelist]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_01_01_2022_19_50_[Default_Changelist]/shelved.patch
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_01_01_2022_19_50_[Default_Changelist]/shelved.patch	(revision bd406f0e48e5983b96333cea78f270847a2fc570)
-+++ /dev/null	(revision bd406f0e48e5983b96333cea78f270847a2fc570)
-@@ -1,512 +0,0 @@
--Index: app/src/main/res/layout/row_user.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"wrap_content\"\r\n    android:layout_marginTop=\"20dp\">\r\n\r\n    <androidx.cardview.widget.CardView\r\n        android:id=\"@+id/viewImageProfile\"\r\n        android:layout_width=\"40dp\"\r\n        android:layout_height=\"40dp\"\r\n        android:layout_centerHorizontal=\"true\"\r\n        android:layout_marginStart=\"10dp\"\r\n        android:elevation=\"12dp\"\r\n        android:innerRadius=\"0dp\"\r\n        android:shape=\"ring\"\r\n        android:thicknessRatio=\"1.9\"\r\n        app:cardCornerRadius=\"40dp\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\">\r\n\r\n        <ImageView\r\n            android:id=\"@+id/imageViewProfile\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"40dp\"\r\n            android:layout_alignParentTop=\"true\"\r\n            android:layout_centerHorizontal=\"true\"\r\n            android:transitionName=\"simple_activity_transition\"\r\n            app:srcCompat=\"@mipmap/ic_launcher_round\" />\r\n\r\n    </androidx.cardview.widget.CardView>\r\n\r\n    <TextView\r\n        android:id=\"@+id/textViewProfileName\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"10dp\"\r\n        android:fontFamily=\"@font/poppins_semibold\"\r\n        android:text=\"Chat Name\"\r\n        android:textSize=\"14sp\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintStart_toEndOf=\"@+id/viewImageProfile\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/layout/row_user.xml b/app/src/main/res/layout/row_user.xml
----- a/app/src/main/res/layout/row_user.xml	(revision 29912b70d5af635f1f6124719f9462f5f267ee78)
--+++ b/app/src/main/res/layout/row_user.xml	(date 1640907899884)
--@@ -4,12 +4,13 @@
--     xmlns:tools="http://schemas.android.com/tools"
--     android:layout_width="match_parent"
--     android:layout_height="wrap_content"
---    android:layout_marginTop="20dp">
--+    android:layout_marginTop="20dp"
--+    android:layout_marginLeft="10dp">
-- 
--     <androidx.cardview.widget.CardView
--         android:id="@+id/viewImageProfile"
---        android:layout_width="40dp"
---        android:layout_height="40dp"
--+        android:layout_width="50dp"
--+        android:layout_height="50dp"
--         android:layout_centerHorizontal="true"
--         android:layout_marginStart="10dp"
--         android:elevation="12dp"
--@@ -23,7 +24,7 @@
--         <ImageView
--             android:id="@+id/imageViewProfile"
--             android:layout_width="match_parent"
---            android:layout_height="40dp"
--+            android:layout_height="50dp"
--             android:layout_alignParentTop="true"
--             android:layout_centerHorizontal="true"
--             android:transitionName="simple_activity_transition"
--Index: app/src/main/res/layout/activity_add_button.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\">\r\n\r\n\r\n    <SearchView\r\n        android:id=\"@+id/searchView\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"?attr/actionBarSize\"\r\n        android:background=\"@color/green_200\"\r\n\r\n        android:closeIcon=\"@drawable/ic_close_white_24\"\r\n\r\n\r\n        android:iconifiedByDefault=\"false\"\r\n        android:queryHint=\"Pesquisar...\"\r\n        android:searchIcon=\"@null\"\r\n\r\n        android:theme=\"@style/MyActionBar\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toEndOf=\"@+id/constraintLayout9\"\r\n        app:layout_constraintTop_toTopOf=\"parent\">\r\n\r\n    </SearchView>\r\n\r\n    <androidx.constraintlayout.widget.ConstraintLayout\r\n        android:id=\"@+id/constraintLayout9\"\r\n        android:layout_width=\"92dp\"\r\n        android:layout_height=\"?attr/actionBarSize\"\r\n        android:background=\"@color/green_100\"\r\n        app:layout_constraintEnd_toStartOf=\"@+id/searchView\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\">\r\n\r\n\r\n        <ImageView\r\n            android:id=\"@+id/back_btn\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"match_parent\"\r\n\r\n\r\n            android:scaleX=\"0.5\"\r\n            android:scaleY=\"0.5\"\r\n            app:layout_constraintBottom_toBottomOf=\"parent\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toTopOf=\"parent\"\r\n            app:srcCompat=\"@drawable/ic_arrow_back_24\" />\r\n\r\n    </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n    <View\r\n        android:id=\"@+id/view2\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"15dp\"\r\n        android:layout_marginTop=\"12dp\"\r\n        android:background=\"@drawable/gradient_shadow\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/constraintLayoutNewGroup\" />\r\n\r\n\r\n    <androidx.constraintlayout.widget.ConstraintLayout\r\n        android:id=\"@+id/constraintLayoutNewGroup\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"1dp\"\r\n        android:layout_marginEnd=\"1dp\"\r\n        app:layout_constraintBottom_toTopOf=\"@+id/view2\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/searchView\">\r\n\r\n        <androidx.constraintlayout.widget.ConstraintLayout\r\n            android:id=\"@+id/constraintLayout\"\r\n            android:layout_width=\"40dp\"\r\n            android:layout_height=\"40dp\"\r\n            android:layout_marginStart=\"16dp\"\r\n            android:layout_marginTop=\"10dp\"\r\n            android:background=\"@drawable/chat_photo\"\r\n            app:layout_constraintBottom_toBottomOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toTopOf=\"parent\">\r\n\r\n            <ImageView\r\n                android:id=\"@+id/imageView\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"20dp\"\r\n\r\n                app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"parent\"\r\n                app:srcCompat=\"@drawable/ic_add_user\" />\r\n\r\n        </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n        <TextView\r\n            android:id=\"@+id/textViewAddPeople\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"10dp\"\r\n            android:layout_marginTop=\"33dp\"\r\n            android:layout_marginBottom=\"24dp\"\r\n            android:fontFamily=\"@font/poppins\"\r\n\r\n            android:text=\"Novo Grupo\"\r\n            android:textColor=\"@color/black\"\r\n            android:textSize=\"16sp\"\r\n            app:layout_constraintBottom_toBottomOf=\"parent\"\r\n            app:layout_constraintStart_toEndOf=\"@+id/constraintLayout\"\r\n            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n    </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n    <androidx.recyclerview.widget.RecyclerView\r\n        android:id=\"@+id/recyclerViewProfile\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"1dp\"\r\n        android:layout_marginEnd=\"1dp\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/view2\" />\r\n\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/layout/activity_add_button.xml b/app/src/main/res/layout/activity_add_button.xml
----- a/app/src/main/res/layout/activity_add_button.xml	(revision 29912b70d5af635f1f6124719f9462f5f267ee78)
--+++ b/app/src/main/res/layout/activity_add_button.xml	(date 1640908200932)
--@@ -76,9 +76,9 @@
-- 
--         <androidx.constraintlayout.widget.ConstraintLayout
--             android:id="@+id/constraintLayout"
---            android:layout_width="40dp"
---            android:layout_height="40dp"
---            android:layout_marginStart="16dp"
--+            android:layout_width="50dp"
--+            android:layout_height="50dp"
--+            android:layout_marginStart="18dp"
--             android:layout_marginTop="10dp"
--             android:background="@drawable/chat_photo"
--             app:layout_constraintBottom_toBottomOf="parent"
--@@ -88,11 +88,12 @@
--             <ImageView
--                 android:id="@+id/imageView"
--                 android:layout_width="match_parent"
---                android:layout_height="20dp"
--+                android:layout_height="25dp"
-- 
--                 app:layout_constraintBottom_toBottomOf="parent"
--                 app:layout_constraintStart_toStartOf="parent"
--                 app:layout_constraintTop_toTopOf="parent"
--+                app:layout_constraintVertical_bias="0.52"
--                 app:srcCompat="@drawable/ic_add_user" />
-- 
--         </androidx.constraintlayout.widget.ConstraintLayout>
--Index: app/src/main/res/layout/activity_search.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\">\r\n\r\n\r\n    <SearchView\r\n        android:id=\"@+id/searchView\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"?attr/actionBarSize\"\r\n        android:background=\"@color/green_200\"\r\n\r\n        android:closeIcon=\"@drawable/ic_close_white_24\"\r\n\r\n\r\n        android:iconifiedByDefault=\"false\"\r\n        android:queryHint=\"Pesquisar...\"\r\n        android:searchIcon=\"@null\"\r\n\r\n        android:theme=\"@style/MyActionBar\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\">\r\n\r\n    </SearchView>\r\n\r\n    <androidx.constraintlayout.widget.ConstraintLayout\r\n        android:layout_width=\"92dp\"\r\n        android:layout_height=\"?attr/actionBarSize\"\r\n        app:layout_constraintEnd_toStartOf=\"@+id/searchView\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\"\r\n        android:background=\"@color/green_100\"\r\n        >\r\n\r\n\r\n        <ImageView\r\n            android:id=\"@+id/back_btn\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"match_parent\"\r\n\r\n\r\n            android:scaleX=\"0.5\"\r\n            android:scaleY=\"0.5\"\r\n            app:layout_constraintBottom_toBottomOf=\"parent\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toTopOf=\"parent\"\r\n            app:srcCompat=\"@drawable/ic_arrow_back_24\" />\r\n\r\n    </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n    <Button\r\n        android:id=\"@+id/btn_documentos\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n\r\n        android:layout_marginTop=\"12dp\"\r\n\r\n        android:background=\"@drawable/button_filtro\"\r\n        android:drawableLeft=\"@drawable/ic_paper_24\"\r\n        android:fontFamily=\"@font/roboto_regular\"\r\n        android:text=\"Documentos\"\r\n\r\n        android:textAllCaps=\"false\"\r\n        android:textColor=\"#7C7C7C\"\r\n        app:backgroundTint=\"@null\"\r\n        app:layout_constraintEnd_toStartOf=\"@+id/btn_ligacoes\"\r\n        app:layout_constraintStart_toEndOf=\"@+id/btn_gifs\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/btn_foto\" />\r\n\r\n    <View\r\n        android:id=\"@+id/view2\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"15dp\"\r\n        android:layout_marginTop=\"16dp\"\r\n        android:background=\"@drawable/gradient_shadow\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/btn_gifs\" />\r\n\r\n    <Button\r\n        android:id=\"@+id/btn_foto\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n\r\n        android:layout_marginStart=\"5dp\"\r\n        android:layout_marginTop=\"18dp\"\r\n\r\n        android:background=\"@drawable/button_filtro\"\r\n        android:drawableLeft=\"@drawable/ic_foto_24\"\r\n        android:fontFamily=\"@font/roboto_regular\"\r\n        android:text=\"Fotografias\"\r\n\r\n        android:textAllCaps=\"false\"\r\n        android:textColor=\"#7C7C7C\"\r\n        app:backgroundTint=\"@null\"\r\n        app:layout_constraintEnd_toStartOf=\"@+id/btn_vid\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/searchView\" />\r\n\r\n    <Button\r\n        android:id=\"@+id/btn_audio\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n\r\n        android:layout_marginTop=\"18dp\"\r\n\r\n        android:layout_marginEnd=\"5dp\"\r\n\r\n        android:background=\"@drawable/button_filtro\"\r\n        android:drawableLeft=\"@drawable/ic_audio\"\r\n        android:fontFamily=\"@font/roboto_regular\"\r\n        android:text=\"Áudios\"\r\n\r\n        android:textAllCaps=\"false\"\r\n        android:textColor=\"#7C7C7C\"\r\n        app:backgroundTint=\"@null\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toEndOf=\"@+id/btn_vid\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/searchView\" />\r\n\r\n    <Button\r\n        android:id=\"@+id/btn_gifs\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n\r\n        android:layout_marginStart=\"5dp\"\r\n\r\n        android:layout_marginTop=\"12dp\"\r\n\r\n        android:background=\"@drawable/button_filtro\"\r\n        android:drawableLeft=\"@drawable/ic_gif_24\"\r\n        android:fontFamily=\"@font/roboto_regular\"\r\n        android:text=\"GIFs\"\r\n\r\n        android:textAllCaps=\"false\"\r\n        android:textColor=\"#7C7C7C\"\r\n        app:backgroundTint=\"@null\"\r\n        app:layout_constraintEnd_toStartOf=\"@+id/btn_documentos\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/btn_foto\" />\r\n\r\n    <Button\r\n        android:id=\"@+id/btn_ligacoes\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n\r\n        android:layout_marginTop=\"12dp\"\r\n\r\n        android:layout_marginEnd=\"5dp\"\r\n\r\n        android:background=\"@drawable/button_filtro\"\r\n        android:drawableLeft=\"@drawable/ic_swap_24\"\r\n        android:fontFamily=\"@font/roboto_regular\"\r\n        android:text=\"Ligações\"\r\n\r\n        android:textAllCaps=\"false\"\r\n        android:textColor=\"#7C7C7C\"\r\n        app:backgroundTint=\"@null\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toEndOf=\"@+id/btn_documentos\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/btn_vid\" />\r\n\r\n    <Button\r\n        android:id=\"@+id/btn_vid\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n\r\n        android:layout_marginTop=\"18dp\"\r\n\r\n        android:background=\"@drawable/button_filtro\"\r\n        android:drawableLeft=\"@drawable/ic_video\"\r\n        android:fontFamily=\"@font/roboto_regular\"\r\n        android:text=\"Vídeos\"\r\n\r\n        android:textAllCaps=\"false\"\r\n        android:textColor=\"#7C7C7C\"\r\n        app:backgroundTint=\"@null\"\r\n        app:layout_constraintEnd_toStartOf=\"@+id/btn_audio\"\r\n        app:layout_constraintStart_toEndOf=\"@+id/btn_foto\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/searchView\" />\r\n\r\n\r\n    <androidx.recyclerview.widget.RecyclerView\r\n        android:id=\"@+id/recyclerViewProfile\"\r\n        android:layout_width=\"409dp\"\r\n        android:layout_height=\"625dp\"\r\n        android:layout_marginStart=\"1dp\"\r\n        android:layout_marginEnd=\"1dp\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/view2\" />\r\n\r\n\r\n\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/layout/activity_search.xml b/app/src/main/res/layout/activity_search.xml
----- a/app/src/main/res/layout/activity_search.xml	(revision 29912b70d5af635f1f6124719f9462f5f267ee78)
--+++ b/app/src/main/res/layout/activity_search.xml	(date 1640907021225)
--@@ -12,13 +12,15 @@
--         android:layout_height="?attr/actionBarSize"
--         android:background="@color/green_200"
-- 
--+
--         android:closeIcon="@drawable/ic_close_white_24"
-- 
-- 
--         android:iconifiedByDefault="false"
---        android:queryHint="Pesquisar..."
--+        android:queryHint="Pesquisar  "
--         android:searchIcon="@null"
-- 
--+
--         android:theme="@style/MyActionBar"
--         app:layout_constraintEnd_toEndOf="parent"
--         app:layout_constraintTop_toTopOf="parent">
--@@ -54,7 +56,7 @@
--     <Button
--         android:id="@+id/btn_documentos"
--         android:layout_width="wrap_content"
---        android:layout_height="wrap_content"
--+        android:layout_height="35dp"
-- 
--         android:layout_marginTop="12dp"
-- 
--@@ -62,6 +64,7 @@
--         android:drawableLeft="@drawable/ic_paper_24"
--         android:fontFamily="@font/roboto_regular"
--         android:text="Documentos"
--+        android:textSize="12sp"
-- 
--         android:textAllCaps="false"
--         android:textColor="#7C7C7C"
--@@ -83,7 +86,7 @@
--     <Button
--         android:id="@+id/btn_foto"
--         android:layout_width="wrap_content"
---        android:layout_height="wrap_content"
--+        android:layout_height="35dp"
-- 
--         android:layout_marginStart="5dp"
--         android:layout_marginTop="18dp"
--@@ -92,6 +95,7 @@
--         android:drawableLeft="@drawable/ic_foto_24"
--         android:fontFamily="@font/roboto_regular"
--         android:text="Fotografias"
--+        android:textSize="12sp"
-- 
--         android:textAllCaps="false"
--         android:textColor="#7C7C7C"
--@@ -103,7 +107,7 @@
--     <Button
--         android:id="@+id/btn_audio"
--         android:layout_width="wrap_content"
---        android:layout_height="wrap_content"
--+        android:layout_height="35dp"
-- 
--         android:layout_marginTop="18dp"
-- 
--@@ -113,6 +117,7 @@
--         android:drawableLeft="@drawable/ic_audio"
--         android:fontFamily="@font/roboto_regular"
--         android:text="Áudios"
--+        android:textSize="12sp"
-- 
--         android:textAllCaps="false"
--         android:textColor="#7C7C7C"
--@@ -124,16 +129,16 @@
--     <Button
--         android:id="@+id/btn_gifs"
--         android:layout_width="wrap_content"
---        android:layout_height="wrap_content"
--+        android:layout_height="35dp"
-- 
--         android:layout_marginStart="5dp"
---
--         android:layout_marginTop="12dp"
-- 
--         android:background="@drawable/button_filtro"
--         android:drawableLeft="@drawable/ic_gif_24"
--         android:fontFamily="@font/roboto_regular"
--         android:text="GIFs"
--+        android:textSize="12sp"
-- 
--         android:textAllCaps="false"
--         android:textColor="#7C7C7C"
--@@ -145,16 +150,16 @@
--     <Button
--         android:id="@+id/btn_ligacoes"
--         android:layout_width="wrap_content"
---        android:layout_height="wrap_content"
--+        android:layout_height="35dp"
-- 
--         android:layout_marginTop="12dp"
---
--         android:layout_marginEnd="5dp"
-- 
--         android:background="@drawable/button_filtro"
--         android:drawableLeft="@drawable/ic_swap_24"
--         android:fontFamily="@font/roboto_regular"
--         android:text="Ligações"
--+        android:textSize="12sp"
-- 
--         android:textAllCaps="false"
--         android:textColor="#7C7C7C"
--@@ -166,7 +171,7 @@
--     <Button
--         android:id="@+id/btn_vid"
--         android:layout_width="wrap_content"
---        android:layout_height="wrap_content"
--+        android:layout_height="35dp"
-- 
--         android:layout_marginTop="18dp"
-- 
--@@ -174,6 +179,7 @@
--         android:drawableLeft="@drawable/ic_video"
--         android:fontFamily="@font/roboto_regular"
--         android:text="Vídeos"
--+        android:textSize="12sp"
-- 
--         android:textAllCaps="false"
--         android:textColor="#7C7C7C"
--@@ -185,15 +191,14 @@
-- 
--     <androidx.recyclerview.widget.RecyclerView
--         android:id="@+id/recyclerViewProfile"
---        android:layout_width="409dp"
---        android:layout_height="625dp"
--+        android:layout_width="match_parent"
--+        android:layout_height="wrap_content"
--         android:layout_marginStart="1dp"
--         android:layout_marginEnd="1dp"
--         app:layout_constraintEnd_toEndOf="parent"
--+        app:layout_constraintHorizontal_bias="0.0"
--         app:layout_constraintStart_toStartOf="parent"
--         app:layout_constraintTop_toBottomOf="@+id/view2" />
-- 
-- 
---
---
-- </androidx.constraintlayout.widget.ConstraintLayout>
--\ No newline at end of file
--Index: app/src/main/res/values/themes.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><resources xmlns:tools=\"http://schemas.android.com/tools\">\r\n    <!-- Base application theme. -->\r\n    <style name=\"Theme.IPCA\" parent=\"Theme.MaterialComponents.DayNight.DarkActionBar\">\r\n        <!-- Primary brand color. -->\r\n        <item name=\"colorPrimary\">@color/green_200</item>\r\n        <item name=\"colorPrimaryVariant\">@color/green_200</item>\r\n        <item name=\"colorOnPrimary\">@color/white_2</item>\r\n        <!-- Secondary brand color. -->\r\n        <item name=\"colorSecondary\">@color/teal_200</item>\r\n        <item name=\"colorSecondaryVariant\">@color/teal_700</item>\r\n        <item name=\"colorOnSecondary\">@color/black</item>\r\n        <!-- Status bar color. -->\r\n        <item name=\"android:statusBarColor\" tools:targetApi=\"l\">?attr/colorPrimaryVariant</item>\r\n        <!-- Customize your theme here. -->\r\n    </style>\r\n\r\n    <style name=\"MyActionBar\" parent=\"@style/Widget.AppCompat.Light.ActionBar.Solid\">\r\n        <item name=\"android:background\" tools:ignore=\"NewApi\">@android:color/transparent</item>\r\n        <item name=\"background\">@android:color/transparent</item>\r\n        <item name=\"android:textColorHint\">@android:color/white</item>\r\n        <item name=\"android:textColor\">@android:color/white</item>\r\n        <item name=\"android:editTextColor\">@android:color/white</item>\r\n\r\n    </style>\r\n\r\n    <style name=\"Theme.IPCA.NoActionBar\">\r\n        <item name=\"windowActionBar\">false</item>\r\n        <item name=\"windowNoTitle\">true</item>\r\n    </style>\r\n\r\n    <style name=\"Theme.IPCA.AppBarOverlay\" parent=\"ThemeOverlay.AppCompat.Dark.ActionBar\" />\r\n\r\n    <style name=\"Theme.IPCA.PopupOverlay\" parent=\"ThemeOverlay.AppCompat.Light\" />\r\n\r\n    <style name=\"NewFontStyle\" parent=\"android:Widget.TextView\">\r\n        <item name=\"android:fontFamily\">@font/poppins</item>\r\n    </style>\r\n\r\n</resources>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/values/themes.xml b/app/src/main/res/values/themes.xml
----- a/app/src/main/res/values/themes.xml	(revision 29912b70d5af635f1f6124719f9462f5f267ee78)
--+++ b/app/src/main/res/values/themes.xml	(date 1640906314725)
--@@ -18,8 +18,11 @@
--         <item name="android:background" tools:ignore="NewApi">@android:color/transparent</item>
--         <item name="background">@android:color/transparent</item>
--         <item name="android:textColorHint">@android:color/white</item>
--+        <item name="android:textSize">14sp</item>
--         <item name="android:textColor">@android:color/white</item>
--         <item name="android:editTextColor">@android:color/white</item>
--+        <item name="android:drawableRight">@drawable/ic_search_24</item>
--+        <item name="android:textAlignment">textEnd</item>
-- 
--     </style>
-- 
--Index: app/src/main/res/layout/row_search.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"wrap_content\"\r\n    android:layout_marginTop=\"20dp\">\r\n\r\n    <ImageView\r\n        android:id=\"@+id/imageViewProfileGroup\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"16dp\"\r\n        android:background=\"@drawable/chat_photo\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\"\r\n        tools:srcCompat=\"@tools:sample/avatars\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/textViewProfileName\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"14dp\"\r\n        android:layout_marginTop=\"30dp\"\r\n        android:layout_marginBottom=\"3dp\"\r\n        android:fontFamily=\"@font/poppins_semibold\"\r\n        android:text=\"Chat Name\"\r\n        android:textSize=\"20sp\"\r\n        app:layout_constraintBottom_toTopOf=\"@+id/textViewLastMessage\"\r\n        app:layout_constraintStart_toEndOf=\"@+id/imageViewProfileGroup\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/textViewLastMessage\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"wrap_content\"\r\n\r\n        android:layout_marginStart=\"14dp\"\r\n        android:layout_marginTop=\"3dp\"\r\n        android:layout_marginBottom=\"30dp\"\r\n        android:fontFamily=\"@font/poppins\"\r\n\r\n        android:text=\"Last Message\"\r\n        android:textColor=\"#A3A3A3\"\r\n        android:textSize=\"16sp\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintStart_toEndOf=\"@+id/imageViewProfileGroup\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/textViewProfileName\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/lastMessageTime\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n\r\n        android:layout_marginStart=\"70dp\"\r\n        android:layout_marginTop=\"34dp\"\r\n        android:layout_marginEnd=\"16dp\"\r\n        android:fontFamily=\"@font/poppins\"\r\n\r\n        android:text=\"22:00\"\r\n        android:textColor=\"#848484\"\r\n        android:textSize=\"17sp\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toEndOf=\"@+id/textViewProfileName\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n    <ImageView\r\n        android:id=\"@+id/messageStatus\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n\r\n        android:layout_marginTop=\"20dp\"\r\n        android:layout_marginEnd=\"16dp\"\r\n        android:layout_marginBottom=\"37dp\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/lastMessageTime\"\r\n        app:srcCompat=\"@drawable/ic_unread_22\"\r\n        app:tint=\"#A3A3A3\" />\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/layout/row_search.xml b/app/src/main/res/layout/row_search.xml
----- a/app/src/main/res/layout/row_search.xml	(revision 29912b70d5af635f1f6124719f9462f5f267ee78)
--+++ b/app/src/main/res/layout/row_search.xml	(date 1640905041816)
--@@ -4,29 +4,28 @@
--     xmlns:tools="http://schemas.android.com/tools"
--     android:layout_width="match_parent"
--     android:layout_height="wrap_content"
---    android:layout_marginTop="20dp">
--+    android:layout_marginTop="15dp">
-- 
--     <ImageView
--         android:id="@+id/imageViewProfileGroup"
---        android:layout_width="wrap_content"
---        android:layout_height="wrap_content"
--+        android:layout_width="50dp"
--+        android:layout_height="50dp"
--         android:layout_marginStart="16dp"
--         android:background="@drawable/chat_photo"
--         app:layout_constraintBottom_toBottomOf="parent"
--         app:layout_constraintStart_toStartOf="parent"
--         app:layout_constraintTop_toTopOf="parent"
--+        app:layout_constraintVertical_bias="0.461"
--         tools:srcCompat="@tools:sample/avatars" />
-- 
--     <TextView
--         android:id="@+id/textViewProfileName"
--         android:layout_width="0dp"
--         android:layout_height="wrap_content"
---        android:layout_marginStart="14dp"
---        android:layout_marginTop="30dp"
---        android:layout_marginBottom="3dp"
--+        android:layout_marginStart="12dp"
--         android:fontFamily="@font/poppins_semibold"
--         android:text="Chat Name"
---        android:textSize="20sp"
--+        android:textSize="14sp"
--         app:layout_constraintBottom_toTopOf="@+id/textViewLastMessage"
--         app:layout_constraintStart_toEndOf="@+id/imageViewProfileGroup"
--         app:layout_constraintTop_toTopOf="parent" />
--@@ -36,47 +35,13 @@
--         android:layout_width="0dp"
--         android:layout_height="wrap_content"
-- 
---        android:layout_marginStart="14dp"
---        android:layout_marginTop="3dp"
---        android:layout_marginBottom="30dp"
--+        android:layout_marginStart="12dp"
--         android:fontFamily="@font/poppins"
---
--         android:text="Last Message"
--         android:textColor="#A3A3A3"
---        android:textSize="16sp"
--+        android:textSize="12sp"
--         app:layout_constraintBottom_toBottomOf="parent"
--         app:layout_constraintStart_toEndOf="@+id/imageViewProfileGroup"
--         app:layout_constraintTop_toBottomOf="@+id/textViewProfileName" />
-- 
---    <TextView
---        android:id="@+id/lastMessageTime"
---        android:layout_width="wrap_content"
---        android:layout_height="wrap_content"
---
---        android:layout_marginStart="70dp"
---        android:layout_marginTop="34dp"
---        android:layout_marginEnd="16dp"
---        android:fontFamily="@font/poppins"
---
---        android:text="22:00"
---        android:textColor="#848484"
---        android:textSize="17sp"
---        app:layout_constraintEnd_toEndOf="parent"
---        app:layout_constraintStart_toEndOf="@+id/textViewProfileName"
---        app:layout_constraintTop_toTopOf="parent" />
---
---    <ImageView
---        android:id="@+id/messageStatus"
---        android:layout_width="wrap_content"
---        android:layout_height="wrap_content"
---
---        android:layout_marginTop="20dp"
---        android:layout_marginEnd="16dp"
---        android:layout_marginBottom="37dp"
---        app:layout_constraintBottom_toBottomOf="parent"
---        app:layout_constraintEnd_toEndOf="parent"
---        app:layout_constraintTop_toBottomOf="@+id/lastMessageTime"
---        app:srcCompat="@drawable/ic_unread_22"
---        app:tint="#A3A3A3" />
---
-- </androidx.constraintlayout.widget.ConstraintLayout>
--\ No newline at end of file
--Index: app/src/main/res/layout/row_chat.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"wrap_content\">\r\n\r\n    <androidx.cardview.widget.CardView\r\n        android:id=\"@+id/viewImageGroup\"\r\n        android:layout_width=\"80dp\"\r\n        android:layout_height=\"80dp\"\r\n        android:layout_centerHorizontal=\"true\"\r\n        android:layout_marginStart=\"10dp\"\r\n        android:layout_marginTop=\"20dp\"\r\n        android:elevation=\"12dp\"\r\n        android:innerRadius=\"0dp\"\r\n        android:shape=\"ring\"\r\n        android:thicknessRatio=\"1.9\"\r\n        app:cardCornerRadius=\"40dp\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\">\r\n\r\n        <ImageView\r\n            android:id=\"@+id/imageViewChatGroup\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"80dp\"\r\n            android:layout_alignParentTop=\"true\"\r\n            android:layout_centerHorizontal=\"true\"\r\n            app:srcCompat=\"@mipmap/ic_launcher_round\" />\r\n\r\n    </androidx.cardview.widget.CardView>\r\n\r\n\r\n    <TextView\r\n        android:id=\"@+id/textViewChatName\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"14dp\"\r\n        android:layout_marginTop=\"30dp\"\r\n        android:layout_marginBottom=\"3dp\"\r\n        android:fontFamily=\"@font/poppins_semibold\"\r\n        android:maxHeight=\"22sp\"\r\n        android:maxLength=\"30\"\r\n        android:text=\"Chat Name\"\r\n        android:textSize=\"16sp\"\r\n        app:layout_constraintBottom_toTopOf=\"@+id/textViewLastMessage\"\r\n        app:layout_constraintStart_toEndOf=\"@+id/viewImageGroup\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/textViewLastMessage\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"wrap_content\"\r\n\r\n        android:layout_marginStart=\"14dp\"\r\n        android:layout_marginTop=\"3dp\"\r\n        android:layout_marginBottom=\"30dp\"\r\n        android:fontFamily=\"@font/poppins\"\r\n        android:maxHeight=\"22sp\"\r\n        android:maxLength=\"32\"\r\n        android:text=\"Last Message\"\r\n        android:textColor=\"#A3A3A3\"\r\n        android:textSize=\"14sp\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintStart_toEndOf=\"@+id/viewImageGroup\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/textViewChatName\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/lastMessageTime\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n\r\n        android:layout_marginTop=\"34dp\"\r\n        android:layout_marginEnd=\"16dp\"\r\n        android:fontFamily=\"@font/poppins\"\r\n\r\n        android:text=\"22:00\"\r\n        android:textColor=\"#848484\"\r\n        android:textSize=\"16sp\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n    <ImageView\r\n        android:id=\"@+id/messageStatus\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n\r\n        android:layout_marginTop=\"20dp\"\r\n        android:layout_marginEnd=\"16dp\"\r\n        android:layout_marginBottom=\"37dp\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/lastMessageTime\"\r\n        app:srcCompat=\"@drawable/ic_unread_22\"\r\n        app:tint=\"#A3A3A3\" />\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/layout/row_chat.xml b/app/src/main/res/layout/row_chat.xml
----- a/app/src/main/res/layout/row_chat.xml	(revision 29912b70d5af635f1f6124719f9462f5f267ee78)
--+++ b/app/src/main/res/layout/row_chat.xml	(date 1640907462741)
--@@ -3,27 +3,29 @@
--     xmlns:app="http://schemas.android.com/apk/res-auto"
--     xmlns:tools="http://schemas.android.com/tools"
--     android:layout_width="match_parent"
---    android:layout_height="wrap_content">
--+    android:layout_height="wrap_content"
--+    android:layout_marginTop="20dp">
--+
-- 
--     <androidx.cardview.widget.CardView
--         android:id="@+id/viewImageGroup"
---        android:layout_width="80dp"
---        android:layout_height="80dp"
--+        android:layout_width="50dp"
--+        android:layout_height="50dp"
--         android:layout_centerHorizontal="true"
--         android:layout_marginStart="10dp"
---        android:layout_marginTop="20dp"
--         android:elevation="12dp"
--         android:innerRadius="0dp"
--         android:shape="ring"
--         android:thicknessRatio="1.9"
--         app:cardCornerRadius="40dp"
--+        app:layout_constraintBottom_toBottomOf="parent"
--         app:layout_constraintStart_toStartOf="parent"
--         app:layout_constraintTop_toTopOf="parent">
-- 
--         <ImageView
--             android:id="@+id/imageViewChatGroup"
---            android:layout_width="match_parent"
---            android:layout_height="80dp"
--+            android:layout_width="50dp"
--+            android:layout_height="50dp"
--             android:layout_alignParentTop="true"
--             android:layout_centerHorizontal="true"
--             app:srcCompat="@mipmap/ic_launcher_round" />
--@@ -34,10 +36,10 @@
--     <TextView
--         android:id="@+id/textViewChatName"
--         android:layout_width="0dp"
---        android:layout_height="wrap_content"
---        android:layout_marginStart="14dp"
---        android:layout_marginTop="30dp"
---        android:layout_marginBottom="3dp"
--+        android:layout_height="match_parent"
--+        android:layout_marginStart="12dp"
--+        android:layout_marginTop="5dp"
--+        android:layout_marginBottom="6dp"
--         android:fontFamily="@font/poppins_semibold"
--         android:maxHeight="22sp"
--         android:maxLength="30"
--@@ -52,9 +54,7 @@
--         android:layout_width="0dp"
--         android:layout_height="wrap_content"
-- 
---        android:layout_marginStart="14dp"
---        android:layout_marginTop="3dp"
---        android:layout_marginBottom="30dp"
--+        android:layout_marginStart="12dp"
--         android:fontFamily="@font/poppins"
--         android:maxHeight="22sp"
--         android:maxLength="32"
--@@ -70,13 +70,16 @@
--         android:layout_width="wrap_content"
--         android:layout_height="wrap_content"
-- 
---        android:layout_marginTop="34dp"
--+        android:layout_marginTop="5dp"
--+
--         android:layout_marginEnd="16dp"
--+        android:layout_marginBottom="12dp"
--         android:fontFamily="@font/poppins"
-- 
--         android:text="22:00"
--         android:textColor="#848484"
---        android:textSize="16sp"
--+        android:textSize="14sp"
--+        app:layout_constraintBottom_toTopOf="@+id/messageStatus"
--         app:layout_constraintEnd_toEndOf="parent"
--         app:layout_constraintTop_toTopOf="parent" />
-- 
--@@ -85,9 +88,8 @@
--         android:layout_width="wrap_content"
--         android:layout_height="wrap_content"
-- 
---        android:layout_marginTop="20dp"
--         android:layout_marginEnd="16dp"
---        android:layout_marginBottom="37dp"
--+        android:layout_marginBottom="4dp"
--         app:layout_constraintBottom_toBottomOf="parent"
--         app:layout_constraintEnd_toEndOf="parent"
--         app:layout_constraintTop_toBottomOf="@+id/lastMessageTime"
--Index: .idea/misc.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"DesignSurface\">\r\n    <option name=\"filePathToZoomLevelMap\">\r\n      <map>\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/breaktime.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/breaktime_form.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/button_filtro.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/button_green.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/button_register.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/button_week_day.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/chat_photo.xml\" value=\"0.25364583333333335\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/circle.xml\" value=\"0.23802083333333332\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/custom_black_border.xml\" value=\"0.23802083333333332\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/custom_gray_background_outline.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/datetime_selected_item.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/event_shape.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_add_folder.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_add_userdrawer_icons.xml\" value=\"0.25364583333333335\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_arrow_back_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_baseline_arrow_back_ios_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_baseline_arrow_forward_ios_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_contact_icon.xml\" value=\"0.2520833333333333\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_delete.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_documentdrawer_icons.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_file.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_folderdrawer_icons.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_foto_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_homedrawer_icons.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_lg_ipca.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_logo_branco_ipca.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_logout.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_menu_camera.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_menu_gallery.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_menu_slideshow.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_paper_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_plus.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_search_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_swap_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/rounded_dialog.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/side_nav_bar.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_add_event.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_add_people.xml\" value=\"0.24375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_calendar.xml\" value=\"0.36277173913043476\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_chat.xml\" value=\"0.2359375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_chat_files.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_chat_members.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_chat_more.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_contacts.xml\" value=\"0.2359375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_drawer_activty.xml\" value=\"0.2359375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_login.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_news_web.xml\" value=\"0.24375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_profile.xml\" value=\"0.36277173913043476\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_register.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_schedule.xml\" value=\"0.3546195652173913\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_search.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_tab.xml\" value=\"0.2359375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_terms_and_condictions.xml\" value=\"0.21642145230185098\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_welcome.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/app_bar_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/content_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/dialog_add_file.xml\" value=\"0.358695652173913\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/dialog_select_image.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/dialog_select_name.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/fragment_calendar.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/fragment_chats.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/nav_header_main.xml\" value=\"0.358695652173913\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_add_pp.xml\" value=\"0.5\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_chat.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_event.xml\" value=\"0.7456647398843931\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_file.xml\" value=\"0.5\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_message_others.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_message_self.xml\" value=\"0.3546195652173913\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_search.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_subject.xml\" value=\"0.3546195652173913\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_user.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_user_in_chat.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/sample_date_time_picker.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/menu/activity_drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/menu/drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/menu/menu_add.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/menu/menu_chat.xml\" value=\"0.20520833333333333\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/mipmap-anydpi-v26/ic_launcher_round.xml\" value=\"0.25364583333333335\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/chat_message_shape.xml\" value=\"0.29074074074074074\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/chat_photo.xml\" value=\"0.2953703703703704\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/circle.xml\" value=\"0.3101851851851852\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/ic_camera.xml\" value=\"0.22135416666666666\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/ic_upload.xml\" value=\"0.22135416666666666\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/rounded_shape.xml\" value=\"0.3101851851851852\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/user_message_photo.xml\" value=\"0.2953703703703704\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_chat.xml\" value=\"0.25\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_login.xml\" value=\"0.2957427536231884\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_main.xml\" value=\"0.2957427536231884\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_register.xml\" value=\"0.28940217391304346\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_chat.xml\" value=\"0.67\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_message.xml\" value=\"0.28940217391304346\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_message_others.xml\" value=\"0.2694746376811594\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_message_self.xml\" value=\"0.17831813576494426\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_message_system.xml\" value=\"0.26268115942028986\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_pesquisa.xml\" value=\"0.26268115942028986\" />\r\n        <entry key=\"..\\:/Users/Asus/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_search.xml\" value=\"0.25\" />\r\n        <entry key=\"..\\:/Users/Asus/Documents/GitHub/ipca_plus/app/src/main/res/menu/drawer.xml\" value=\"0.128125\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/ic_menu_slideshow.xml\" value=\"0.22135416666666666\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/round_corner_drawer.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/rounded_shape.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_drawer_activty.xml\" value=\"0.28306159420289856\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/app_bar_main.xml\" value=\"0.28306159420289856\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/nav_header_main.xml\" value=\"0.28306159420289856\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/menu/activity_drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/menu/drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_chat.xml\" value=\"0.14010416666666667\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_drawer_activty.xml\" value=\"0.13020833333333334\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_tab.xml\" value=\"0.14010416666666667\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/app_bar_main.xml\" value=\"0.13020833333333334\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/content_main.xml\" value=\"0.13020833333333334\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/fragment_calendar.xml\" value=\"0.264\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/fragment_chats.xml\" value=\"0.14010416666666667\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/fragment_slideshow.xml\" value=\"0.14010416666666667\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/nav_header_main.xml\" value=\"0.13020833333333334\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/menu/activity_drawer.xml\" value=\"0.25416666666666665\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/menu/drawer.xml\" value=\"0.25416666666666665\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/drawable/chat_photo.xml\" value=\"0.3769230769230769\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/drawable/gradient_shadow.xml\" value=\"0.3769230769230769\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/drawable/ic_video.xml\" value=\"0.3769230769230769\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/drawable/shadow.xml\" value=\"0.3769230769230769\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_add_event.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_calendar.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_chat.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_contacts.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_drawer_activty.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_profile.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_register.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_schedule.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_search.xml\" value=\"0.5\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_tab.xml\" value=\"0.26766304347826086\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/app_bar_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/content_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/nav_header_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/row_chat.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/row_pesquisa.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/menu/activity_drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/menu/drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"app/src/main/res/drawable/button_register.xml\" value=\"0.3425925925925926\" />\r\n        <entry key=\"app/src/main/res/drawable/event_shape.xml\" value=\"0.31203703703703706\" />\r\n        <entry key=\"app/src/main/res/drawable/ic_baseline_add_24.xml\" value=\"0.3671875\" />\r\n        <entry key=\"app/src/main/res/drawable/ic_baseline_dehaze_24.xml\" value=\"0.3671875\" />\r\n        <entry key=\"app/src/main/res/drawable/ic_frame_4.xml\" value=\"0.3671875\" />\r\n        <entry key=\"app/src/main/res/drawable/ic_lg_ipca.xml\" value=\"0.36153846153846153\" />\r\n        <entry key=\"app/src/main/res/drawable/pop_up_round_corners.xml\" value=\"0.36153846153846153\" />\r\n        <entry key=\"app/src/main/res/drawable/round_corner_drawer.xml\" value=\"0.21354166666666666\" />\r\n        <entry key=\"app/src/main/res/drawable/rounded_shape.xml\" value=\"0.20208333333333334\" />\r\n        <entry key=\"app/src/main/res/layout/activity_drawer.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/layout/activity_drawer_activty.xml\" value=\"0.14402173913043478\" />\r\n        <entry key=\"app/src/main/res/layout/activity_login.xml\" value=\"0.19427083333333334\" />\r\n        <entry key=\"app/src/main/res/layout/activity_search.xml\" value=\"0.32563405797101447\" />\r\n        <entry key=\"app/src/main/res/layout/activity_tab.xml\" value=\"0.33\" />\r\n        <entry key=\"app/src/main/res/layout/activity_welcome.xml\" value=\"0.33\" />\r\n        <entry key=\"app/src/main/res/layout/app_bar_drawer.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/layout/app_bar_main.xml\" value=\"0.1707193515704154\" />\r\n        <entry key=\"app/src/main/res/layout/content_drawer.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/layout/content_main.xml\" value=\"0.32563405797101447\" />\r\n        <entry key=\"app/src/main/res/layout/fragment_gallery.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/layout/fragment_home.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/layout/fragment_official_chats.xml\" value=\"0.32563405797101447\" />\r\n        <entry key=\"app/src/main/res/layout/fragment_tab.xml\" value=\"0.3489583333333333\" />\r\n        <entry key=\"app/src/main/res/layout/nav_header_main.xml\" value=\"0.32563405797101447\" />\r\n        <entry key=\"app/src/main/res/layout/row_chat.xml\" value=\"0.32563405797101447\" />\r\n        <entry key=\"app/src/main/res/menu/activity_drawer.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/menu/drawer.xml\" value=\"0.325\" />\r\n      </map>\r\n    </option>\r\n  </component>\r\n  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_11\" default=\"true\" project-jdk-name=\"11\" project-jdk-type=\"JavaSDK\">\r\n    <output url=\"file://$PROJECT_DIR$/build/classes\" />\r\n  </component>\r\n  <component name=\"ProjectType\">\r\n    <option name=\"id\" value=\"Android\" />\r\n  </component>\r\n</project>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/.idea/misc.xml b/.idea/misc.xml
----- a/.idea/misc.xml	(revision 29912b70d5af635f1f6124719f9462f5f267ee78)
--+++ b/.idea/misc.xml	(date 1640907835703)
--@@ -124,7 +124,9 @@
--         <entry key="..\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/drawable/gradient_shadow.xml" value="0.3769230769230769" />
--         <entry key="..\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/drawable/ic_video.xml" value="0.3769230769230769" />
--         <entry key="..\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/drawable/shadow.xml" value="0.3769230769230769" />
--+        <entry key="..\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_add_button.xml" value="0.33" />
--         <entry key="..\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_add_event.xml" value="0.36666666666666664" />
--+        <entry key="..\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_add_people.xml" value="0.17806484295845998" />
--         <entry key="..\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_calendar.xml" value="0.36666666666666664" />
--         <entry key="..\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_chat.xml" value="0.36666666666666664" />
--         <entry key="..\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_contacts.xml" value="0.36666666666666664" />
--@@ -132,13 +134,15 @@
--         <entry key="..\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_profile.xml" value="0.36666666666666664" />
--         <entry key="..\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_register.xml" value="0.36666666666666664" />
--         <entry key="..\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_schedule.xml" value="0.36666666666666664" />
---        <entry key="..\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_search.xml" value="0.5" />
--+        <entry key="..\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_search.xml" value="0.25" />
--         <entry key="..\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_tab.xml" value="0.26766304347826086" />
--         <entry key="..\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/app_bar_main.xml" value="0.36666666666666664" />
--         <entry key="..\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/content_main.xml" value="0.36666666666666664" />
--         <entry key="..\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/nav_header_main.xml" value="0.36666666666666664" />
---        <entry key="..\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/row_chat.xml" value="0.36666666666666664" />
--+        <entry key="..\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/row_chat.xml" value="0.33" />
--         <entry key="..\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/row_pesquisa.xml" value="0.33" />
--+        <entry key="..\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/row_search.xml" value="0.5" />
--+        <entry key="..\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/row_user.xml" value="0.5" />
--         <entry key="..\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/menu/activity_drawer.xml" value="0.36666666666666664" />
--         <entry key="..\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/menu/drawer.xml" value="0.36666666666666664" />
--         <entry key="app/src/main/res/drawable/button_register.xml" value="0.3425925925925926" />
--Index: app/src/main/java/com/singularity/ipcaplus/chat/SearchActivity.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.singularity.ipcaplus.chat\r\n\r\nimport android.content.Intent\r\nimport android.os.Bundle\r\nimport android.view.LayoutInflater\r\nimport android.view.View\r\nimport android.view.ViewGroup\r\nimport android.widget.ImageView\r\nimport android.widget.TextView\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport androidx.recyclerview.widget.DefaultItemAnimator\r\nimport androidx.recyclerview.widget.LinearLayoutManager\r\nimport androidx.recyclerview.widget.RecyclerView\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.firestore.ktx.firestore\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.singularity.ipcaplus.utils.Backend\r\nimport com.singularity.ipcaplus.R\r\nimport com.singularity.ipcaplus.utils.Utilis\r\nimport com.singularity.ipcaplus.databinding.ActivitySearchBinding\r\nimport com.singularity.ipcaplus.models.Chat\r\n\r\nclass SearchActivity: AppCompatActivity() {\r\n\r\n    var chats = arrayListOf<Chat>()\r\n    var chatIds = arrayListOf<String>()\r\n\r\n    private lateinit var binding: ActivitySearchBinding\r\n\r\n    private var mAdapter: RecyclerView.Adapter<*>? = null\r\n    private var mLayoutManager: LinearLayoutManager? = null\r\n\r\n\r\n    val db = Firebase.firestore\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_search)\r\n        binding = ActivitySearchBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        val back = findViewById<ImageView>(R.id.back_btn)\r\n\r\n        back.setOnClickListener(){\r\n            finish()\r\n        }\r\n\r\n        // Get All Chats\r\n        db.collection(\"profile\").document(\"${Firebase.auth.currentUser!!.uid}\").collection(\"chat\")\r\n            .addSnapshotListener { documents, e ->\r\n                documents?.let {\r\n                    chats.clear()\r\n                    chatIds.clear()\r\n                    for (document in it) {\r\n                        val chat = Chat.fromHash(document)\r\n                        if (chat.type == \"chat\") {\r\n                            chats.add(chat)\r\n                            chatIds.add(document.id)\r\n                        }\r\n                    }\r\n                    mAdapter?.notifyDataSetChanged()\r\n                }\r\n            }\r\n\r\n        // RecyclerView Chats\r\n        mLayoutManager = LinearLayoutManager(this, LinearLayoutManager.VERTICAL, false)\r\n        binding.recyclerViewProfile.layoutManager = mLayoutManager\r\n        mAdapter = SearchAdapter()\r\n        binding.recyclerViewProfile.itemAnimator = DefaultItemAnimator()\r\n        binding.recyclerViewProfile.adapter = mAdapter\r\n       \r\n    }\r\n\r\n\r\n    inner class SearchAdapter : RecyclerView.Adapter<SearchAdapter.ViewHolder>() {\r\n\r\n        inner class ViewHolder(val v: View) : RecyclerView.ViewHolder(v)\r\n\r\n        override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {\r\n            return ViewHolder(\r\n                LayoutInflater.from(parent.context).inflate(R.layout.row_search, parent, false)\r\n            )\r\n        }\r\n\r\n        override fun onBindViewHolder(holder: ViewHolder, position: Int) {\r\n\r\n\r\n\r\n\r\n            holder.v.apply {\r\n\r\n\r\n                // Variables\r\n                val textViewMessage = findViewById<TextView>(R.id.textViewProfileName)\r\n                val imageViewChatGroup = findViewById<ImageView>(R.id.imageViewProfileGroup)\r\n                val lastMessageTime = findViewById<TextView>(R.id.lastMessageTime)\r\n                val lastMessageText = findViewById<TextView>(R.id.textViewLastMessage)\r\n\r\n                textViewMessage.text = chats[position].name\r\n                // Set Last Chat Message\r\n                Backend.getLastMessageByChatID(chatIds[position]) {\r\n                    val data = Utilis.getDate(it!!.time.seconds * 1000, \"yyyy-MM-dd'T'HH:mm:ss.SSS\")\r\n                    lastMessageTime.text = Utilis.getHours(data) + \":\" + Utilis.getMinutes(data)\r\n                    lastMessageText.text = it.message\r\n                }\r\n                imageViewChatGroup.setImageResource(R.drawable.common_full_open_on_phone)\r\n\r\n                textViewMessage.text = chats[position].name\r\n            }\r\n            holder.v.setOnClickListener {\r\n                val intent = Intent(this@SearchActivity, ChatActivity::class.java)\r\n                intent.putExtra(\"chat_id\", chatIds[position])\r\n                startActivity(intent)\r\n            }\r\n\r\n        }\r\n\r\n        override fun getItemCount(): Int {\r\n            return chats.size\r\n        }\r\n    }\r\n\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/singularity/ipcaplus/chat/SearchActivity.kt b/app/src/main/java/com/singularity/ipcaplus/chat/SearchActivity.kt
----- a/app/src/main/java/com/singularity/ipcaplus/chat/SearchActivity.kt	(revision 29912b70d5af635f1f6124719f9462f5f267ee78)
--+++ b/app/src/main/java/com/singularity/ipcaplus/chat/SearchActivity.kt	(date 1640905300571)
--@@ -93,15 +93,12 @@
--                 // Variables
--                 val textViewMessage = findViewById<TextView>(R.id.textViewProfileName)
--                 val imageViewChatGroup = findViewById<ImageView>(R.id.imageViewProfileGroup)
---                val lastMessageTime = findViewById<TextView>(R.id.lastMessageTime)
--                 val lastMessageText = findViewById<TextView>(R.id.textViewLastMessage)
-- 
--                 textViewMessage.text = chats[position].name
--                 // Set Last Chat Message
--                 Backend.getLastMessageByChatID(chatIds[position]) {
---                    val data = Utilis.getDate(it!!.time.seconds * 1000, "yyyy-MM-dd'T'HH:mm:ss.SSS")
---                    lastMessageTime.text = Utilis.getHours(data) + ":" + Utilis.getMinutes(data)
---                    lastMessageText.text = it.message
--+                    lastMessageText.text = it?.message
--                 }
--                 imageViewChatGroup.setImageResource(R.drawable.common_full_open_on_phone)
-- 
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_01_01_2022_19_50__Default_Changelist_.xml
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_01_01_2022_19_50__Default_Changelist_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_01_01_2022_19_50__Default_Changelist_.xml
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_01_01_2022_19_50__Default_Changelist_.xml	(revision bd406f0e48e5983b96333cea78f270847a2fc570)
-+++ /dev/null	(revision bd406f0e48e5983b96333cea78f270847a2fc570)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Update_at_01_01_2022_19_50_[Default_Changelist]" date="1641066648065" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_01_01_2022_19_50_[Default_Changelist]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Update at 01/01/2022 19:50 [Default Changelist]" />
--</changelist>
-\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_1_12_2022_7_14_PM_[Default_Changelist]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_1_12_2022_7_14_PM_[Default_Changelist]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_1_12_2022_7_14_PM_[Default_Changelist]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_1_12_2022_7_14_PM_[Default_Changelist]/shelved.patch	(revision 8e96e253b18fde6ba59a95a8201590b51e0a7e05)
+++ /dev/null	(revision 8e96e253b18fde6ba59a95a8201590b51e0a7e05)
@@ -1,289 +0,0 @@
-Index: app/src/main/java/com/singularity/ipcaplus/chat/ChatMoreActivity.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.singularity.ipcaplus.chat\r\n\r\nimport android.content.Intent\r\nimport android.graphics.Bitmap\r\nimport android.graphics.BitmapFactory\r\nimport android.graphics.Color\r\nimport android.graphics.drawable.ColorDrawable\r\nimport android.os.Bundle\r\nimport android.provider.MediaStore\r\nimport android.util.Log\r\nimport android.view.View\r\nimport android.widget.Button\r\nimport android.widget.EditText\r\nimport android.widget.ImageView\r\nimport androidx.appcompat.app.AlertDialog\r\nimport com.google.android.material.bottomsheet.BottomSheetDialog\r\nimport com.google.firebase.auth.FirebaseAuth\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.google.firebase.storage.FirebaseStorage\r\nimport com.singularity.ipcaplus.LoginActivity\r\nimport com.singularity.ipcaplus.R\r\nimport com.singularity.ipcaplus.databinding.ActivityChatMoreBinding\r\nimport com.singularity.ipcaplus.drawer.DrawerActivty\r\nimport com.singularity.ipcaplus.utils.ActivityImageHelper\r\nimport com.singularity.ipcaplus.utils.Backend\r\nimport com.singularity.ipcaplus.utils.Utilis\r\nimport com.singularity.ipcaplus.utils.Utilis.calculateInSampleSize\r\nimport com.theartofdev.edmodo.cropper.CropImage\r\nimport com.theartofdev.edmodo.cropper.CropImageView\r\nimport java.io.ByteArrayOutputStream\r\n\r\nclass ChatMoreActivity : ActivityImageHelper() {\r\n\r\n    lateinit var imageViewGroup: ImageView\r\n    lateinit var imageViewDialog: ImageView\r\n    lateinit var chat_id: String\r\n    var is_admin: Boolean = false\r\n    private lateinit var binding: ActivityChatMoreBinding\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_chat_more)\r\n\r\n        overridePendingTransition(R.anim.slide_in_up, R.anim.slide_stay)\r\n\r\n        // Create the layout for this fragment\r\n        binding = ActivityChatMoreBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        // Create Action Bar\r\n        supportActionBar?.setDisplayHomeAsUpEnabled(true)\r\n        supportActionBar?.setHomeAsUpIndicator(R.drawable.ic_arrow_back_24)\r\n        supportActionBar?.title = \"Definições do grupo\"\r\n\r\n        // Get previous data\r\n        chat_id = intent.getStringExtra(\"chat_id\").toString()\r\n        val chat_name = intent.getStringExtra(\"chat_name\").toString()\r\n        is_admin = intent.getBooleanExtra(\"is_admin\", false)\r\n        binding.textViewGroupName.text = chat_name\r\n\r\n        // Get Group Image\r\n        imageViewGroup = binding.imageViewGroup\r\n        Utilis.getFile(this, \"chats/$chat_id/icon.png\", \"png\") { bitmap ->\r\n            imageViewGroup.setImageBitmap(bitmap)\r\n        }\r\n\r\n        binding.seeGroupMembers.setOnClickListener {\r\n            val intent = Intent(this, ChatMembersActivity::class.java)\r\n            intent.putExtra(\"chat_id\", chat_id)\r\n            intent.putExtra(\"is_admin\", is_admin)\r\n            startActivity(intent)\r\n        }\r\n\r\n        if (is_admin) {\r\n            binding.changeGroupName.setOnClickListener {\r\n                openSelectNameDialog()\r\n            }\r\n\r\n            binding.changeGroupImage.setOnClickListener {\r\n                openSelectImageDialog()\r\n            }\r\n            binding.deleteChat.setOnClickListener {\r\n                Backend.deleteChat(chat_id) {\r\n                    val intent = Intent(this, LoginActivity::class.java)\r\n                    startActivity(intent)\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            binding.changeGroupName.visibility = View.GONE\r\n            binding.changeGroupImage.visibility = View.GONE\r\n            binding.deleteChat.visibility = View.GONE\r\n        }\r\n\r\n        binding.groupFiles.setOnClickListener {\r\n            val intent = Intent(this, ChatFilesActivity::class.java)\r\n            intent.putExtra(\"chat_id\", chat_id)\r\n            startActivity(intent)\r\n        }\r\n\r\n        binding.notifications.setOnClickListener {\r\n            println(\"-------------> 5\")\r\n        }\r\n\r\n        binding.securityNumberVerification.setOnClickListener {\r\n            val intent = Intent(this, VerifySecurityNumberActivity::class.java )\r\n            intent.putExtra(\"chat_id\", chat_id)\r\n            startActivity(intent)\r\n        }\r\n\r\n        binding.leaveGroup.setOnClickListener {\r\n\r\n            Backend.removeUserFromChat(chat_id, Firebase.auth.currentUser!!.uid)\r\n\r\n            val intent = Intent(this, LoginActivity::class.java)\r\n            startActivity(intent)\r\n        }\r\n\r\n    }\r\n\r\n    // When the support action bar back button is pressed, the app will go back to the previous activity\r\n    override fun onSupportNavigateUp(): Boolean {\r\n        onBackPressed()\r\n        return true\r\n    }\r\n\r\n\r\n    /*\r\n        This function display a dialog window with a text box to edit chat name\r\n     */\r\n    private fun openSelectImageDialog() {\r\n\r\n        // Variables\r\n        val dialog = BottomSheetDialog(this, R.style.AppBottomSheetDialogTheme)\r\n        val view = layoutInflater.inflate(R.layout.dialog_select_image, null)\r\n        dialog.setContentView(view)\r\n        dialog.show()\r\n        imageViewDialog = view.findViewById(R.id.imageViewChatPhoto)\r\n\r\n\r\n        Utilis.getFile(this,\"chats/$chat_id/icon.png\", \"png\") { bitmap ->\r\n\r\n            view.findViewById<ImageView>(R.id.imageViewChatPhoto).setImageBitmap(bitmap)\r\n        }\r\n\r\n        imageViewDialog.setOnClickListener {\r\n            checkPermission(android.Manifest.permission.READ_EXTERNAL_STORAGE, STORAGE_PERMISSION_CODE)\r\n            dialog.dismiss()\r\n        }\r\n\r\n    }\r\n\r\n\r\n    /*\r\n        This function display a dialog window with a text box to edit chat name\r\n     */\r\n    private fun openSelectNameDialog() {\r\n\r\n        // Variables\r\n        val dialog = BottomSheetDialog(this, R.style.AppBottomSheetDialogTheme)\r\n        val row = layoutInflater.inflate(R.layout.dialog_select_name, null)\r\n        dialog.setContentView(row)\r\n        dialog.show()\r\n\r\n\r\n        row.findViewById<EditText>(R.id.editTextName).setText(binding.textViewGroupName.text.toString())\r\n\r\n        row.findViewById<Button>(R.id.buttonSave).setOnClickListener {\r\n            val newName = row.findViewById<EditText>(R.id.editTextName).text.toString()\r\n            Backend.changeChatName(chat_id, newName)\r\n            dialog.dismiss()\r\n            binding.textViewGroupName.text = newName\r\n        }\r\n\r\n    }\r\n\r\n\r\n    /*\r\n       This function happen after picking photo, and make changes in the activity\r\n    */\r\n    override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\r\n        super.onActivityResult(requestCode, resultCode, data)\r\n\r\n        if(requestCode == IMAGE_REQUEST_CODE && resultCode == RESULT_OK){\r\n            CropImage.activity(data?.data)\r\n                .setGuidelines(CropImageView.Guidelines.ON)\r\n                .setAspectRatio(1,1)\r\n                .start(this)\r\n        }\r\n\r\n        if (requestCode == CropImage.CROP_IMAGE_ACTIVITY_REQUEST_CODE) {\r\n            val result = CropImage.getActivityResult(data)\r\n            if (resultCode == RESULT_OK) {\r\n                imageViewGroup.setImageURI(result.uri)\r\n\r\n                val userId = FirebaseAuth.getInstance().currentUser!!.uid\r\n                val storageRef = FirebaseStorage.getInstance().getReference(\"chats/$chat_id/icon.png\")\r\n\r\n                // compressing image\r\n                val bitmap = MediaStore.Images.Media.getBitmap(contentResolver, result.uri)\r\n                val byteArrayOutputStream = ByteArrayOutputStream()\r\n                bitmap.compress(Bitmap.CompressFormat.JPEG, 6, byteArrayOutputStream)\r\n                val reducedImage: ByteArray = byteArrayOutputStream.toByteArray()\r\n\r\n                storageRef.putBytes(reducedImage)\r\n                    .addOnSuccessListener {\r\n\r\n                        Log.i(\"xxx\", \"Success uploading Image to Firebase!!!\")\r\n\r\n                        storageRef.downloadUrl.addOnSuccessListener {\r\n\r\n                            //getting image url\r\n                            Log.i(\"xxx\",it.toString())\r\n                            Utilis.uploadFile(it, \"chats/$chat_id/icon.png\")\r\n\r\n                        }.addOnFailureListener {\r\n\r\n                            Log.i(\"xxx\", \"Error getting image download url\")\r\n                        }\r\n\r\n                    }.addOnFailureListener {\r\n\r\n                        Log.i(\"xxx\", \"Failed uploading image to server\")\r\n\r\n                    }\r\n            }\r\n        }\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/singularity/ipcaplus/chat/ChatMoreActivity.kt b/app/src/main/java/com/singularity/ipcaplus/chat/ChatMoreActivity.kt
---- a/app/src/main/java/com/singularity/ipcaplus/chat/ChatMoreActivity.kt	(revision 0c2a68c42b50b4b3ea948154925251e9c79e8962)
-+++ b/app/src/main/java/com/singularity/ipcaplus/chat/ChatMoreActivity.kt	(date 1641995038629)
-@@ -100,7 +100,10 @@
-         }
- 
-         binding.notifications.setOnClickListener {
--            println("-------------> 5")
-+            val dialog = BottomSheetDialog(this, R.style.AppBottomSheetDialogTheme)
-+            val view = layoutInflater.inflate(R.layout.dialog_notifications_manager, null)
-+            dialog.setContentView(view)
-+            dialog.show()
-         }
- 
-         binding.securityNumberVerification.setOnClickListener {
-Index: app/src/main/java/com/singularity/ipcaplus/chat/ChatActivity.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.singularity.ipcaplus.chat\r\n\r\nimport android.content.ContentValues.TAG\r\nimport android.content.Intent\r\nimport android.os.Build\r\nimport android.os.Bundle\r\nimport android.util.Log\r\nimport android.view.*\r\nimport android.widget.ImageView\r\nimport android.widget.TextView\r\nimport androidx.annotation.RequiresApi\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport androidx.core.view.isVisible\r\nimport androidx.recyclerview.widget.DefaultItemAnimator\r\nimport androidx.recyclerview.widget.LinearLayoutManager\r\nimport androidx.recyclerview.widget.RecyclerView\r\nimport com.google.firebase.Timestamp\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.firestore.Query\r\nimport com.google.firebase.firestore.ktx.firestore\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.singularity.ipcaplus.drawer.CalendarActivity\r\nimport com.singularity.ipcaplus.R\r\nimport com.singularity.ipcaplus.utils.Utilis\r\nimport com.singularity.ipcaplus.cryptography.decryptWithAESmeta\r\nimport com.singularity.ipcaplus.cryptography.encryptMeta\r\nimport com.singularity.ipcaplus.cryptography.getMetaOx\r\nimport com.singularity.ipcaplus.databinding.ActivityChatBinding\r\nimport com.singularity.ipcaplus.models.Chat\r\nimport com.singularity.ipcaplus.models.Message\r\nimport com.singularity.ipcaplus.utils.Backend\r\nimport com.singularity.ipcaplus.utils.Backend.createJsonArrayString\r\nimport kotlinx.coroutines.*\r\nimport org.json.JSONArray\r\nimport org.json.JSONObject\r\nimport java.io.BufferedOutputStream\r\nimport java.io.BufferedWriter\r\nimport java.io.OutputStream\r\nimport java.io.OutputStreamWriter\r\nimport java.net.URL\r\nimport java.time.LocalDateTime\r\nimport java.time.format.DateTimeFormatter\r\nimport javax.net.ssl.HttpsURLConnection\r\n\r\nclass ChatActivity : AppCompatActivity() {\r\n\r\n    var messages = arrayListOf<Message>()\r\n    var currentUserIsAdmin = false\r\n    private lateinit var binding: ActivityChatBinding\r\n    private lateinit var chat_id : String\r\n    var tokens_adress = arrayListOf<String>()\r\n    var chat_user_uids = arrayListOf<String>()\r\n    private var mAdapter: RecyclerView.Adapter<*>? = null\r\n    private var mLayoutManager: LinearLayoutManager? = null\r\n\r\n    val db = Firebase.firestore\r\n    @RequiresApi(Build.VERSION_CODES.O)\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_chat)\r\n\r\n        binding = ActivityChatBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        // Variables\r\n        chat_id = intent.getStringExtra(\"chat_id\").toString()\r\n        val current = LocalDateTime.now()\r\n\r\n        val formatter = DateTimeFormatter.BASIC_ISO_DATE\r\n        val formatted = current.format(formatter)\r\n\r\n        // Check if user is admin\r\n        Backend.getChatAdminIds(chat_id) {\r\n            val currentUser = Firebase.auth.currentUser!!.uid\r\n            for (admin in it) {\r\n                if (admin == currentUser)\r\n                    currentUserIsAdmin = true\r\n            }\r\n        }\r\n\r\n        // Get all members id of chat\r\n        Backend.getChatUsersUids(chat_id){\r\n            chat_user_uids.clear()\r\n            chat_user_uids.addAll(it)\r\n\r\n            for (userId in chat_user_uids){\r\n                // Getting all of tokens of  profile associated devices\r\n                Backend.getAllTokens(userId) {\r\n                    if (tokens_adress.isEmpty()){\r\n                        tokens_adress.clear()\r\n                    }\r\n                    tokens_adress.addAll(it)\r\n\r\n                    /*GlobalScope.launch {\r\n                        withContext(Dispatchers.IO){\r\n                            createNotificationGroup(\"grupotrablahotentativa\", createJsonArrayString(tokens_adress))\r\n                        }\r\n                    }*/\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        println(\"Current Date is: $formatted\")\r\n\r\n        // Send Message\r\n        binding.fabSend.setOnClickListener {\r\n            if(!binding.editTextMessage.text.isNullOrBlank()) {\r\n                // get data of ecripted shared preferences (\"chatuid\" -> \"key\")\r\n                val keygen = getMetaOx(this, chat_id)\r\n                // Build encryptation data of message send by the user\r\n                var meta = encryptMeta( binding.editTextMessage.text.toString(), keygen.toString())\r\n                val savedText = binding.editTextMessage.text.toString()\r\n\r\n                val message = Message(\r\n                    Firebase.auth.currentUser!!.uid,\r\n                    meta.toString(),\r\n                    Timestamp.now(),\r\n                    \"\"\r\n\r\n                )\r\n                db.collection(\"chat\").document(\"$chat_id\").collection(\"message\")\r\n                    .add(message.toHash())\r\n                    .addOnSuccessListener { documentReference ->\r\n\r\n                        GlobalScope.launch {\r\n                            withContext(Dispatchers.IO){\r\n                                //APA91bEKDInIYA242YofpahBmhB57pEI4gNT63DJJenWCccJGqeSYrWzj0BSruX49DhVp2vGSY5xJ2fEJk2vhtoraT3_bbjEKw4Nx3eJKj7tttVRPjQs0Uc_OPkrcj4twR70H5tAilnY\r\n                                println(\"AVEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE\"+ savedText)\r\n                                sendNotificationToGroup( chat_id, savedText, \"APA91bGaOoMTjTD2s9MU63F1AvLqP6tkwdAFE0Mqs9jbghlSgcWlfe_38CboFiE2iiWFoKqNRwhF0G_TA5X9xegTL0_Tg0OGuFadJuBj1sGZqjqCcmF1EH2ZeRU7ySHosdNkmLmmOyFF\")\r\n                            }\r\n                        }\r\n                        Log.d(TAG, \"DocumentSnapshot added with ID: ${documentReference.id}\")\r\n\r\n\r\n                    }\r\n                    .addOnFailureListener { e ->\r\n                        Log.w(TAG, \"Error adding document\", e)\r\n                    }\r\n                binding.editTextMessage.text.clear()\r\n\r\n            }\r\n        }\r\n\r\n        // Show Messages\r\n        db.collection(\"chat\").document(\"$chat_id\").collection(\"message\").orderBy(\"time\", Query.Direction.DESCENDING)\r\n            .addSnapshotListener { documents, e ->\r\n\r\n                documents?.let {\r\n                    messages.clear()\r\n                    for (document in it) {\r\n                        Log.d(TAG, \"${document.id} => ${document.data}\")\r\n                        val message = Message.fromHash(document)\r\n                        messages.add(message)\r\n\r\n                    }\r\n                    mAdapter?.notifyDataSetChanged()\r\n                }\r\n\r\n            }\r\n\r\n        // Recycler View Messages\r\n        mLayoutManager = LinearLayoutManager(this, LinearLayoutManager.VERTICAL, false)\r\n        binding.recycleViewChat.layoutManager = mLayoutManager\r\n        mAdapter = MessageAdapter()\r\n        binding.recycleViewChat.itemAnimator = DefaultItemAnimator()\r\n        binding.recycleViewChat.adapter = mAdapter\r\n\r\n        mLayoutManager!!.reverseLayout = true\r\n\r\n    }\r\n\r\n    /*\r\n       This function create the action bar above the activity\r\n    */\r\n    override fun onCreateOptionsMenu(menu: Menu): Boolean {\r\n        val inflater: MenuInflater = menuInflater\r\n        inflater.inflate(R.menu.menu_chat, menu)\r\n\r\n        db.collection(\"chat\")\r\n            .addSnapshotListener { documents, e ->\r\n                documents?.let {\r\n                    for (document in it) {\r\n                        if(document.id == chat_id) {\r\n                            val chat = Chat.fromHash(document)\r\n                            supportActionBar?.title = chat.name\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        supportActionBar?.setDisplayHomeAsUpEnabled(true)\r\n        supportActionBar?.setHomeAsUpIndicator(R.drawable.ic_arrow_back_24)\r\n\r\n\r\n        return true\r\n    }\r\n\r\n\r\n    /*\r\n        This function define the events of the action bar buttons\r\n     */\r\n    override fun onOptionsItemSelected(item: MenuItem): Boolean {\r\n        super.onOptionsItemSelected(item)\r\n\r\n        when (item.itemId){\r\n            R.id.calendario -> {\r\n                val intent = Intent(this, CalendarActivity::class.java)\r\n                intent.putExtra(\"chat_id\", chat_id)\r\n                intent.putExtra(\"is_admin\", currentUserIsAdmin)\r\n                startActivity(intent)\r\n                return true\r\n            }\r\n            R.id.chatMore -> {\r\n                val intent = Intent(this, ChatMoreActivity::class.java)\r\n                intent.putExtra(\"chat_id\", chat_id)\r\n                println(\"3------------------------------ \" + currentUserIsAdmin)\r\n                intent.putExtra(\"is_admin\", currentUserIsAdmin)\r\n                intent.putExtra(\"chat_name\", supportActionBar?.title)\r\n                startActivity(intent)\r\n                return true\r\n            }\r\n        }\r\n\r\n        return false\r\n    }\r\n\r\n\r\n    // When the support action bar back button is pressed, the app will go back to the previous activity\r\n    override fun onSupportNavigateUp(): Boolean {\r\n        onBackPressed()\r\n        return true\r\n    }\r\n\r\n\r\n    inner class MessageAdapter : RecyclerView.Adapter<MessageAdapter.ViewHolder>() {\r\n\r\n        inner class ViewHolder(val v: View) : RecyclerView.ViewHolder(v)\r\n\r\n        var otherUser = false\r\n\r\n        override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {\r\n            if(viewType == 1) {\r\n                otherUser = false\r\n                return ViewHolder(\r\n                    LayoutInflater.from(parent.context).inflate(R.layout.row_message_self, parent, false))\r\n            } else if (viewType == 2){\r\n                otherUser = false\r\n                return ViewHolder(\r\n                    LayoutInflater.from(parent.context).inflate(R.layout.row_message_system, parent, false))\r\n            } else {\r\n                otherUser = true\r\n                return ViewHolder(\r\n                    LayoutInflater.from(parent.context).inflate(R.layout.row_message_others, parent, false))\r\n            }\r\n\r\n        }\r\n\r\n        @RequiresApi(Build.VERSION_CODES.M)\r\n         override fun onBindViewHolder(holder: ViewHolder, position: Int) {\r\n\r\n\r\n            holder.v.apply {\r\n\r\n                val textViewMessage = findViewById<TextView>(R.id.textViewMessage)\r\n                val timeLastMessage = findViewById<TextView?>(R.id.timeLastMessage)\r\n                val textViewUsername = findViewById<TextView?>(R.id.textViewUsername)\r\n\r\n\r\n                timeLastMessage?.isVisible = false\r\n                val keygen = getMetaOx(context, chat_id)\r\n                val message_decripted = decryptWithAESmeta(keygen.toString(), messages[position].message)\r\n\r\n                if (otherUser) {\r\n                    Backend.getUserProfile(messages[position].user) {\r\n                        val userName = Utilis.getFirstAndLastName(it.name)\r\n                        textViewUsername.text = userName\r\n                        }\r\n                    }\r\n\r\n                textViewMessage.text = message_decripted\r\n                println(message_decripted)\r\n                if(position == messages.size - 1) {\r\n                    val data = Utilis.getDate(\r\n                        messages[position].time.seconds * 1000,\r\n                        \"yyyy-MM-dd'T'HH:mm:ss.SSS\"\r\n                    )\r\n                    timeLastMessage.isVisible = true\r\n                    timeLastMessage.text = Utilis.getHours(data) + \":\" + Utilis.getMinutes(data)\r\n                }\r\n\r\n                if (otherUser) {\r\n                    val imageViewUser = findViewById<ImageView?>(R.id.imageViewUser)\r\n                    if (imageViewUser != null) {\r\n                        Utilis.getFile(context, \"profilePictures/${messages[position].user}.png\", \"png\") { bitmap ->\r\n                            imageViewUser.setImageBitmap(bitmap)\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        override fun getItemViewType(position: Int) : Int {\r\n            if (messages[position].user == Firebase.auth.currentUser!!.uid) {\r\n                return 1\r\n            } else if (messages[position].user == \"system\"){\r\n                return 2\r\n            } else {\r\n                return 0\r\n            }\r\n        }\r\n\r\n        override fun getItemCount(): Int {\r\n            return messages.size\r\n        }\r\n\r\n\r\n\r\n    }\r\n\r\n    private suspend fun  createNotificationGroup(notificationKeyName : String, registrationIds : JSONArray)  {\r\n\r\n        try {\r\n\r\n            Log.d(\"json\", registrationIds.toString())\r\n\r\n            //The url of the API i want to access (Firebase Cloud Messaging)\r\n            val endPoint = URL(\"https://fcm.googleapis.com/fcm/notification\")\r\n\r\n            //Establish a connection to fcm (Firebase Cloud Messaging) so i can send a push notification to a specific topic\r\n            val httpsURLConnection: HttpsURLConnection =\r\n                endPoint.openConnection() as HttpsURLConnection\r\n\r\n            //Here i configure the connection to fcm\r\n            //The time available to read from the input stream when the connection is established\r\n            httpsURLConnection.readTimeout = 10000\r\n            //The time available to connect to the url\r\n            httpsURLConnection.connectTimeout = 15000\r\n            //Defining the type of request to be made to the fcm\r\n            httpsURLConnection.requestMethod = \"POST\"\r\n            //Defining that the url connection can be used to send and receive data\r\n            httpsURLConnection.doInput = true\r\n            httpsURLConnection.doOutput = true\r\n\r\n            //Here i give my server key so i can make a request to fcm (Firebase Cloud Messaging) of my application (FirebaseDemo)\r\n            //and i define as well the type of content that i will be sending (json object)\r\n            httpsURLConnection.setRequestProperty(\"Content-Type\", \"application/json\")\r\n            val project_key = \"AAAAMMR-Gaw:APA91bFeijRa909_QEdEFsQeDSaJZRYD7rOk8B8Bc2QiYcGoyLG1xqqpZLkOJXmZrG0FbScojvqBCsweSEWDrMLM6kr67boS-BVB2oy7fL6Zn1N9ICVk6efGniauDa3z8eaOb1TENmEs\"\r\n            val senderId = \"209455028652\"\r\n            httpsURLConnection.setRequestProperty(\"authorization\", \"key=$project_key\")\r\n            httpsURLConnection.setRequestProperty(\"project_id\", senderId)\r\n\r\n            val json = JSONObject()\r\n\r\n            //Here i need to verify if the chat has already been created\r\n            //----------------------------------------------------------\r\n\r\n            //Here i define the name of the group \"chatName\" and\r\n            //the fcm tokens of the users that are going to be in the group \"registrationIds\"\r\n            json.put(\"operation\", \"create\")\r\n            // GROUP NAME\r\n            json.put(\"notification_key_name\", notificationKeyName)\r\n            // TOKENS OF FCM PROFILES LIST\r\n            json.put(\"registration_ids\", registrationIds)\r\n\r\n            //json.put(\"notification_key_name\", \"AM_7\")\r\n\r\n            val outputStream: OutputStream =\r\n                BufferedOutputStream(httpsURLConnection.outputStream)\r\n            val writer = BufferedWriter(OutputStreamWriter(outputStream, \"utf-8\"))\r\n\r\n            //here i write the body of the post request and then i send the request (flush)\r\n            //then i close the post request\r\n            writer.write(json.toString())\r\n            writer.flush()\r\n            writer.close()\r\n\r\n            outputStream.close()\r\n\r\n            //The response code and message of the post requests\r\n            val responseCode: Int = httpsURLConnection.responseCode\r\n            val responseMessage = httpsURLConnection.responseMessage\r\n\r\n            Log.d(TAG, \"$responseCode $responseMessage\")\r\n\r\n\r\n            // Check if the connection is successful\r\n            if (responseCode in 400..499) {\r\n                httpsURLConnection.errorStream\r\n            } else {\r\n                httpsURLConnection.inputStream\r\n            }\r\n\r\n            if (responseCode == 200) {\r\n                Log.e(TAG, \"Group Created!!\")\r\n\r\n                val response = httpsURLConnection.inputStream.bufferedReader()\r\n                    .use { it.readText() }  // defaults to UTF-8\r\n                withContext(Dispatchers.Main) {\r\n                    // Convert raw JSON to pretty JSON using GSON library\r\n\r\n                    //Here i get the notification_key that has been defined to the group that got created\r\n                    val jsonObject  = JSONObject(response)\r\n                    val notifKey = jsonObject.getString(\"notification_key\")\r\n                    println(\"NotifKey:\")\r\n                    println(notifKey)\r\n                }\r\n            } else {\r\n                Log.e(TAG, \"Error it didn´t work\")\r\n            }\r\n\r\n            //Here i close the connection to the endPoint\r\n            httpsURLConnection.disconnect()\r\n\r\n\r\n        } catch (e: Exception) {\r\n            e.printStackTrace()\r\n        }\r\n    }\r\n\r\n    //This function sends push notifications to devices that are subscribed to a specific topic\r\n    private suspend fun sendNotificationToGroup(title: String, message: String, notificationKey : String) {\r\n\r\n        delay(1500)\r\n\r\n        try {\r\n\r\n            //The url of the API i want to access (Firebase Cloud Messaging)\r\n            val url = URL(\"https://fcm.googleapis.com/fcm/send\")\r\n\r\n            //Establish a connection to fcm (Firebase Cloud Messaging) so i can send a push notification to a specific topic\r\n            val httpsURLConnection: HttpsURLConnection =\r\n                url.openConnection() as HttpsURLConnection\r\n\r\n            //Here i configure the connection to fcm\r\n            //The time available to read from the input stream when the connection is established\r\n            httpsURLConnection.readTimeout = 10000\r\n            //The time available to connect to the url\r\n            httpsURLConnection.connectTimeout = 15000\r\n            //Defining the type of request to be made to the fcm\r\n            httpsURLConnection.requestMethod = \"POST\"\r\n            //Defining that the url connection can be used to send and receive data\r\n            httpsURLConnection.doInput = true\r\n            httpsURLConnection.doOutput = true\r\n\r\n            //Here i give my server key so i can make a request to fcm (Firebase Cloud Messaging) of my application (FirebaseDemo)\r\n            //and i define as well the type of content that i will be sending (json)\r\n            val project_key = \"AAAAMMR-Gaw:APA91bFeijRa909_QEdEFsQeDSaJZRYD7rOk8B8Bc2QiYcGoyLG1xqqpZLkOJXmZrG0FbScojvqBCsweSEWDrMLM6kr67boS-BVB2oy7fL6Zn1N9ICVk6efGniauDa3z8eaOb1TENmEs\"\r\n            httpsURLConnection.setRequestProperty(\"authorization\", \"key=$project_key\")\r\n            httpsURLConnection.setRequestProperty(\"Content-Type\", \"application/json\")\r\n\r\n            val body = JSONObject()\r\n            val data = JSONObject()\r\n\r\n            data.put(\"title\", title)\r\n            data.put(\"content\", message)\r\n            //Here i define the Activity in witch i want the user to navigate when they click the notification\r\n            data.put(\"click_action\", \".LoginActivity\")\r\n            //data.put(\"chat_id\", \"S77po7vNGjtKja2Rinyb\")\r\n\r\n            //val condition = \"'$TOPIC1' in topics && '$TOPIC2' in topics && '$TOPIC3' in topics\"\r\n            //body.put(\"condition\", condition)\r\n\r\n            //here i define the body of the post request\r\n            body.put(\"data\", data)\r\n            //Here i define the group via notification key in which i want to send the notification/message\r\n            body.put(\"to\", notificationKey)\r\n\r\n            val outputStream: OutputStream =\r\n                BufferedOutputStream(httpsURLConnection.outputStream)\r\n            val writer = BufferedWriter(OutputStreamWriter(outputStream, \"utf-8\"))\r\n\r\n            //here i write the body of the post request and then i send the request\r\n            //then i close the post request\r\n            writer.write(body.toString())\r\n            writer.flush()\r\n            writer.close()\r\n\r\n            outputStream.close()\r\n\r\n            //The response code and message of the post requests\r\n            val responseCode: Int = httpsURLConnection.responseCode\r\n            val responseMessage: String = httpsURLConnection.responseMessage\r\n\r\n\r\n            Log.d(TAG, \"Response from sendMes: $responseCode $responseMessage\")\r\n\r\n\r\n            // Check if the connection is successful or not\r\n            if (responseCode in 400..499) {\r\n                httpsURLConnection.errorStream\r\n            } else {\r\n                httpsURLConnection.inputStream\r\n            }\r\n            if (responseCode == 200) {\r\n                Log.e(\r\n                    TAG,\r\n                    \"Notification Sent \\n Title: $title \\n Body: $message\"\r\n                )\r\n            } else {\r\n                Log.e(TAG, \"Notification Error\")\r\n            }\r\n\r\n            httpsURLConnection.disconnect()\r\n\r\n        } catch (e: Exception) {\r\n            e.printStackTrace()\r\n        }\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/singularity/ipcaplus/chat/ChatActivity.kt b/app/src/main/java/com/singularity/ipcaplus/chat/ChatActivity.kt
---- a/app/src/main/java/com/singularity/ipcaplus/chat/ChatActivity.kt	(revision 0c2a68c42b50b4b3ea948154925251e9c79e8962)
-+++ b/app/src/main/java/com/singularity/ipcaplus/chat/ChatActivity.kt	(date 1641998169741)
-@@ -326,14 +326,14 @@
- 
-             Log.d("json", registrationIds.toString())
- 
--            //The url of the API i want to access (Firebase Cloud Messaging)
-+            //Request
-             val endPoint = URL("https://fcm.googleapis.com/fcm/notification")
- 
--            //Establish a connection to fcm (Firebase Cloud Messaging) so i can send a push notification to a specific topic
-+            //Establish a connection
-             val httpsURLConnection: HttpsURLConnection =
-                 endPoint.openConnection() as HttpsURLConnection
- 
--            //Here i configure the connection to fcm
-+            //Connection to fcm
-             //The time available to read from the input stream when the connection is established
-             httpsURLConnection.readTimeout = 10000
-             //The time available to connect to the url
-@@ -344,8 +344,7 @@
-             httpsURLConnection.doInput = true
-             httpsURLConnection.doOutput = true
- 
--            //Here i give my server key so i can make a request to fcm (Firebase Cloud Messaging) of my application (FirebaseDemo)
--            //and i define as well the type of content that i will be sending (json object)
-+            // Build parameters for json
-             httpsURLConnection.setRequestProperty("Content-Type", "application/json")
-             val project_key = "AAAAMMR-Gaw:APA91bFeijRa909_QEdEFsQeDSaJZRYD7rOk8B8Bc2QiYcGoyLG1xqqpZLkOJXmZrG0FbScojvqBCsweSEWDrMLM6kr67boS-BVB2oy7fL6Zn1N9ICVk6efGniauDa3z8eaOb1TENmEs"
-             val senderId = "209455028652"
-@@ -354,39 +353,31 @@
- 
-             val json = JSONObject()
- 
--            //Here i need to verify if the chat has already been created
--            //----------------------------------------------------------
--
--            //Here i define the name of the group "chatName" and
--            //the fcm tokens of the users that are going to be in the group "registrationIds"
-             json.put("operation", "create")
--            // GROUP NAME
-             json.put("notification_key_name", notificationKeyName)
--            // TOKENS OF FCM PROFILES LIST
-             json.put("registration_ids", registrationIds)
- 
--            //json.put("notification_key_name", "AM_7")
- 
-+            // Writer
-             val outputStream: OutputStream =
-                 BufferedOutputStream(httpsURLConnection.outputStream)
-             val writer = BufferedWriter(OutputStreamWriter(outputStream, "utf-8"))
- 
--            //here i write the body of the post request and then i send the request (flush)
--            //then i close the post request
-+            // POST
-             writer.write(json.toString())
-             writer.flush()
-             writer.close()
- 
-             outputStream.close()
- 
--            //The response code and message of the post requests
-+            //The response code and message of the POST requests
-             val responseCode: Int = httpsURLConnection.responseCode
-             val responseMessage = httpsURLConnection.responseMessage
- 
-             Log.d(TAG, "$responseCode $responseMessage")
- 
- 
--            // Check if the connection is successful
-+            // Check server STATUS
-             if (responseCode in 400..499) {
-                 httpsURLConnection.errorStream
-             } else {
-@@ -399,13 +390,11 @@
-                 val response = httpsURLConnection.inputStream.bufferedReader()
-                     .use { it.readText() }  // defaults to UTF-8
-                 withContext(Dispatchers.Main) {
--                    // Convert raw JSON to pretty JSON using GSON library
--
--                    //Here i get the notification_key that has been defined to the group that got created
-+                    //notification_key
-                     val jsonObject  = JSONObject(response)
--                    val notifKey = jsonObject.getString("notification_key")
--                    println("NotifKey:")
--                    println(notifKey)
-+                    val notificationKey = jsonObject.getString("notification_key")
-+                    println("NotifKey: $notificationKey")
-+                    Log.d("NotifKey", notificationKey)
-                 }
-             } else {
-                 Log.e(TAG, "Error it didn´t work")
-@@ -427,14 +416,13 @@
- 
-         try {
- 
--            //The url of the API i want to access (Firebase Cloud Messaging)
-+            //Request
-             val url = URL("https://fcm.googleapis.com/fcm/send")
- 
--            //Establish a connection to fcm (Firebase Cloud Messaging) so i can send a push notification to a specific topic
-+            //Establish a connection
-             val httpsURLConnection: HttpsURLConnection =
-                 url.openConnection() as HttpsURLConnection
- 
--            //Here i configure the connection to fcm
-             //The time available to read from the input stream when the connection is established
-             httpsURLConnection.readTimeout = 10000
-             //The time available to connect to the url
-@@ -445,42 +433,35 @@
-             httpsURLConnection.doInput = true
-             httpsURLConnection.doOutput = true
- 
--            //Here i give my server key so i can make a request to fcm (Firebase Cloud Messaging) of my application (FirebaseDemo)
--            //and i define as well the type of content that i will be sending (json)
-+            // Config of FCM
-             val project_key = "AAAAMMR-Gaw:APA91bFeijRa909_QEdEFsQeDSaJZRYD7rOk8B8Bc2QiYcGoyLG1xqqpZLkOJXmZrG0FbScojvqBCsweSEWDrMLM6kr67boS-BVB2oy7fL6Zn1N9ICVk6efGniauDa3z8eaOb1TENmEs"
-             httpsURLConnection.setRequestProperty("authorization", "key=$project_key")
-             httpsURLConnection.setRequestProperty("Content-Type", "application/json")
- 
--            val body = JSONObject()
-+            val jsonObject = JSONObject()
-             val data = JSONObject()
- 
-             data.put("title", title)
-             data.put("content", message)
--            //Here i define the Activity in witch i want the user to navigate when they click the notification
-+            //On Notification Click Activity
-             data.put("click_action", ".LoginActivity")
--            //data.put("chat_id", "S77po7vNGjtKja2Rinyb")
- 
--            //val condition = "'$TOPIC1' in topics && '$TOPIC2' in topics && '$TOPIC3' in topics"
--            //body.put("condition", condition)
--
--            //here i define the body of the post request
--            body.put("data", data)
--            //Here i define the group via notification key in which i want to send the notification/message
--            body.put("to", notificationKey)
-+            //jsonObject for POST
-+            jsonObject.put("data", data)
-+            //
-+            jsonObject.put("to", notificationKey)
- 
-             val outputStream: OutputStream =
-                 BufferedOutputStream(httpsURLConnection.outputStream)
-             val writer = BufferedWriter(OutputStreamWriter(outputStream, "utf-8"))
--
--            //here i write the body of the post request and then i send the request
--            //then i close the post request
--            writer.write(body.toString())
-+            
-+            writer.write(jsonObject.toString())
-             writer.flush()
-             writer.close()
- 
-             outputStream.close()
- 
--            //The response code and message of the post requests
-+            //The response code and message of the POST requests
-             val responseCode: Int = httpsURLConnection.responseCode
-             val responseMessage: String = httpsURLConnection.responseMessage
- 
-@@ -488,7 +469,7 @@
-             Log.d(TAG, "Response from sendMes: $responseCode $responseMessage")
- 
- 
--            // Check if the connection is successful or not
-+            // Check server STATUS
-             if (responseCode in 400..499) {
-                 httpsURLConnection.errorStream
-             } else {
-Index: app/src/main/res/layout/activity_chat_more.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".chat.ChatMoreActivity\">\r\n\r\n    <androidx.cardview.widget.CardView\r\n        android:id=\"@+id/viewImageViewGroup\"\r\n        android:layout_width=\"80dp\"\r\n        android:layout_height=\"80dp\"\r\n        android:layout_centerHorizontal=\"true\"\r\n        android:layout_marginStart=\"10dp\"\r\n        android:layout_marginTop=\"20dp\"\r\n        android:layout_marginEnd=\"10dp\"\r\n        android:elevation=\"12dp\"\r\n        android:innerRadius=\"0dp\"\r\n        android:shape=\"ring\"\r\n        android:thicknessRatio=\"1.9\"\r\n        app:cardCornerRadius=\"40dp\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\">\r\n\r\n        <ImageView\r\n            android:id=\"@+id/imageViewGroup\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"80dp\"\r\n            android:layout_alignParentTop=\"true\"\r\n            android:layout_centerHorizontal=\"true\"\r\n            app:srcCompat=\"@mipmap/ic_launcher_round\" />\r\n\r\n    </androidx.cardview.widget.CardView>\r\n\r\n    <TextView\r\n        android:id=\"@+id/textViewGroupName\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"20dp\"\r\n        android:layout_marginTop=\"10dp\"\r\n        android:layout_marginEnd=\"20dp\"\r\n        android:text=\"Nome do grupo\"\r\n        android:textColor=\"@color/black\"\r\n        android:textSize=\"22sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/viewImageViewGroup\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/textViewActions\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"20dp\"\r\n        android:layout_marginTop=\"20dp\"\r\n        android:layout_marginEnd=\"20dp\"\r\n        android:text=\"Opções\"\r\n        android:textColor=\"@color/green_100\"\r\n        android:textSize=\"16sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/textViewGroupName\" />\r\n\r\n    <LinearLayout\r\n        android:id=\"@+id/seeGroupMembers\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"20dp\"\r\n        android:layout_marginTop=\"20dp\"\r\n        android:orientation=\"horizontal\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/textViewActions\">\r\n\r\n        <ImageView\r\n            android:id=\"@+id/imageViewOp1\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            app:srcCompat=\"@drawable/ic_contact_icon\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/textViewOp1\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"10dp\"\r\n            android:text=\"Ver membros do grupo\"\r\n            android:textColor=\"@color/black\"\r\n            android:textSize=\"16sp\" />\r\n\r\n    </LinearLayout>\r\n\r\n    <LinearLayout\r\n        android:id=\"@+id/changeGroupName\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"20dp\"\r\n        android:layout_marginTop=\"20dp\"\r\n        android:orientation=\"horizontal\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/groupFiles\">\r\n\r\n        <ImageView\r\n            android:id=\"@+id/imageViewOp2\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            app:srcCompat=\"@drawable/ic_edit\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/textViewOp2\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"10dp\"\r\n            android:text=\"Mudar nome do grupo\"\r\n            android:textColor=\"@color/black\"\r\n            android:textSize=\"16sp\" />\r\n\r\n    </LinearLayout>\r\n\r\n    <LinearLayout\r\n        android:id=\"@+id/changeGroupImage\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"20dp\"\r\n        android:layout_marginTop=\"20dp\"\r\n        android:orientation=\"horizontal\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/changeGroupName\">\r\n\r\n        <ImageView\r\n            android:id=\"@+id/imageViewOp3\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            app:srcCompat=\"@drawable/ic_foto_24\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/textViewOp3\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"10dp\"\r\n            android:text=\"Mudar icon do grupo\"\r\n            android:textColor=\"@color/black\"\r\n            android:textSize=\"16sp\" />\r\n\r\n    </LinearLayout>\r\n\r\n    <LinearLayout\r\n        android:id=\"@+id/deleteChat\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"20dp\"\r\n        android:layout_marginTop=\"20dp\"\r\n        android:orientation=\"horizontal\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/changeGroupImage\">\r\n\r\n        <ImageView\r\n            android:id=\"@+id/imageViewOp8\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            app:srcCompat=\"@drawable/ic_delete\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/textViewOp8\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"10dp\"\r\n            android:text=\"Apagar Chat\"\r\n            android:textColor=\"@color/black\"\r\n            android:textSize=\"16sp\" />\r\n\r\n    </LinearLayout>\r\n\r\n    <LinearLayout\r\n        android:id=\"@+id/groupFiles\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"20dp\"\r\n        android:layout_marginTop=\"20dp\"\r\n        android:orientation=\"horizontal\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/seeGroupMembers\">\r\n\r\n        <ImageView\r\n            android:id=\"@+id/imageViewOp4\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            app:srcCompat=\"@drawable/ic_folderdrawer_icons\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/textViewOp4\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"10dp\"\r\n            android:text=\"Ficheiros\"\r\n            android:textColor=\"@color/black\"\r\n            android:textSize=\"16sp\" />\r\n\r\n    </LinearLayout>\r\n\r\n    <TextView\r\n        android:id=\"@+id/textViewPrivacy\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"20dp\"\r\n        android:layout_marginTop=\"30dp\"\r\n        android:layout_marginEnd=\"20dp\"\r\n        android:text=\"Privacidade\"\r\n        android:textColor=\"@color/green_100\"\r\n        android:textSize=\"16sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/deleteChat\" />\r\n\r\n    <LinearLayout\r\n        android:id=\"@+id/securityNumberVerification\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"20dp\"\r\n        android:layout_marginTop=\"20dp\"\r\n        android:orientation=\"horizontal\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/textViewPrivacy\">\r\n\r\n        <ImageView\r\n            android:id=\"@+id/imageViewOp6\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            app:srcCompat=\"@drawable/ic_verify\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/textViewOp6\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"10dp\"\r\n            android:text=\"Verificar número de segurança\"\r\n            android:textColor=\"@color/black\"\r\n            android:textSize=\"16sp\" />\r\n\r\n    </LinearLayout>\r\n\r\n    <LinearLayout\r\n        android:id=\"@+id/notifications\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"20dp\"\r\n        android:layout_marginTop=\"20dp\"\r\n        android:orientation=\"horizontal\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/securityNumberVerification\">\r\n\r\n        <ImageView\r\n            android:id=\"@+id/imageViewOp5\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            app:srcCompat=\"@drawable/ic_notification\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/textViewOp5\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"10dp\"\r\n            android:text=\"Notificações\"\r\n            android:textColor=\"@color/black\"\r\n            android:textSize=\"16sp\" />\r\n\r\n    </LinearLayout>\r\n\r\n    <LinearLayout\r\n        android:id=\"@+id/leaveGroup\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"20dp\"\r\n        android:layout_marginBottom=\"20dp\"\r\n        android:orientation=\"horizontal\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\">\r\n\r\n        <ImageView\r\n            android:id=\"@+id/imageViewOp7\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            app:srcCompat=\"@drawable/ic_logout\"\r\n            android:scaleX=\"-1\"/>\r\n\r\n        <TextView\r\n            android:id=\"@+id/textViewOp7\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"10dp\"\r\n            android:text=\"Sair do grupo\"\r\n            android:textColor=\"@color/black\"\r\n            android:textSize=\"16sp\" />\r\n\r\n    </LinearLayout>\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/layout/activity_chat_more.xml b/app/src/main/res/layout/activity_chat_more.xml
---- a/app/src/main/res/layout/activity_chat_more.xml	(revision 0c2a68c42b50b4b3ea948154925251e9c79e8962)
-+++ b/app/src/main/res/layout/activity_chat_more.xml	(date 1641995038623)
-@@ -264,7 +264,7 @@
-             app:srcCompat="@drawable/ic_notification" />
- 
-         <TextView
--            android:id="@+id/textViewOp5"
-+            android:id="@+id/notificationsTextView"
-             android:layout_width="wrap_content"
-             android:layout_height="wrap_content"
-             android:layout_marginStart="10dp"
-Index: .idea/deploymentTargetDropDown.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"deploymentTargetDropDown\">\r\n    <targetSelectedWithDropDown>\r\n      <Target>\r\n        <type value=\"QUICK_BOOT_TARGET\" />\r\n        <deviceKey>\r\n          <Key>\r\n            <type value=\"VIRTUAL_DEVICE_PATH\" />\r\n            <value value=\"C:\\Users\\diogo\\.android\\avd\\Pixel_5_API_27_2.avd\" />\r\n          </Key>\r\n        </deviceKey>\r\n      </Target>\r\n    </targetSelectedWithDropDown>\r\n    <timeTargetWasSelectedWithDropDown value=\"2022-01-12T10:53:22.677109100Z\" />\r\n  </component>\r\n</project>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/.idea/deploymentTargetDropDown.xml b/.idea/deploymentTargetDropDown.xml
---- a/.idea/deploymentTargetDropDown.xml	(revision 0c2a68c42b50b4b3ea948154925251e9c79e8962)
-+++ b/.idea/deploymentTargetDropDown.xml	(date 1641998530697)
-@@ -1,6 +1,17 @@
- <?xml version="1.0" encoding="UTF-8"?>
- <project version="4">
-   <component name="deploymentTargetDropDown">
-+    <runningDeviceTargetSelectedWithDropDown>
-+      <Target>
-+        <type value="RUNNING_DEVICE_TARGET" />
-+        <deviceKey>
-+          <Key>
-+            <type value="VIRTUAL_DEVICE_PATH" />
-+            <value value="C:\Users\diogo\.android\avd\Pixel_5_API_27_2.avd" />
-+          </Key>
-+        </deviceKey>
-+      </Target>
-+    </runningDeviceTargetSelectedWithDropDown>
-     <targetSelectedWithDropDown>
-       <Target>
-         <type value="QUICK_BOOT_TARGET" />
-@@ -12,6 +23,6 @@
-         </deviceKey>
-       </Target>
-     </targetSelectedWithDropDown>
--    <timeTargetWasSelectedWithDropDown value="2022-01-12T10:53:22.677109100Z" />
-+    <timeTargetWasSelectedWithDropDown value="2022-01-12T14:42:03.572638700Z" />
-   </component>
- </project>
-\ No newline at end of file
-Index: .idea/misc.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"DesignSurface\">\r\n    <option name=\"filePathToZoomLevelMap\">\r\n      <map>\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/breaktime.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/breaktime_form.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/button_filtro.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/button_green.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/button_register.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/button_week_day.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/chat_photo.xml\" value=\"0.25364583333333335\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/circle.xml\" value=\"0.23802083333333332\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/custom_black_border.xml\" value=\"0.23802083333333332\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/custom_gray_background_outline.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/datetime_selected_item.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/event_shape.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_add_folder.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_add_userdrawer_icons.xml\" value=\"0.25364583333333335\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_arrow_back_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_baseline_arrow_back_ios_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_baseline_arrow_forward_ios_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_contact_icon.xml\" value=\"0.2520833333333333\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_delete.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_documentdrawer_icons.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_file.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_folderdrawer_icons.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_foto_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_homedrawer_icons.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_lg_ipca.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_logo_branco_ipca.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_logout.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_menu_camera.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_menu_gallery.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_menu_slideshow.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_paper_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_plus.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_search_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/ic_swap_24.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/rounded_dialog.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/drawable/side_nav_bar.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_add_event.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_add_people.xml\" value=\"0.24375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_calendar.xml\" value=\"0.36277173913043476\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_chat.xml\" value=\"0.2359375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_chat_files.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_chat_members.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_chat_more.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_contacts.xml\" value=\"0.2359375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_drawer_activty.xml\" value=\"0.2359375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_login.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_news_web.xml\" value=\"0.24375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_profile.xml\" value=\"0.36277173913043476\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_register.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_schedule.xml\" value=\"0.3546195652173913\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_search.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_tab.xml\" value=\"0.2359375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_terms_and_condictions.xml\" value=\"0.21642145230185098\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_welcome.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/app_bar_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/content_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/dialog_add_file.xml\" value=\"0.358695652173913\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/dialog_select_image.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/dialog_select_name.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/fragment_calendar.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/fragment_chats.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/nav_header_main.xml\" value=\"0.358695652173913\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_add_pp.xml\" value=\"0.5\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_chat.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_event.xml\" value=\"0.7456647398843931\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_file.xml\" value=\"0.5\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_message_others.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_message_self.xml\" value=\"0.3546195652173913\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_search.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_subject.xml\" value=\"0.3546195652173913\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_user.xml\" value=\"0.2375\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/row_user_in_chat.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/sample_date_time_picker.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/menu/activity_drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/menu/drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/menu/menu_add.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/menu/menu_chat.xml\" value=\"0.20520833333333333\" />\r\n        <entry key=\"..\\:/AndroidStudioProjects/ipca_plus/app/src/main/res/mipmap-anydpi-v26/ic_launcher_round.xml\" value=\"0.25364583333333335\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/chat_message_shape.xml\" value=\"0.29074074074074074\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/chat_photo.xml\" value=\"0.2953703703703704\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/circle.xml\" value=\"0.3101851851851852\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/ic_camera.xml\" value=\"0.22135416666666666\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/ic_upload.xml\" value=\"0.22135416666666666\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/rounded_shape.xml\" value=\"0.3101851851851852\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/drawable/user_message_photo.xml\" value=\"0.2953703703703704\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_add_people.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_chat.xml\" value=\"0.25\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_chat_more.xml\" value=\"0.2520833333333333\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_create_chat.xml\" value=\"0.2520833333333333\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_drawer_activty.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_login.xml\" value=\"0.2957427536231884\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_main.xml\" value=\"0.2957427536231884\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/activity_register.xml\" value=\"0.28940217391304346\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/app_bar_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/fragment_chats.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/fragment_home.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_chat.xml\" value=\"0.67\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_message.xml\" value=\"0.28940217391304346\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_message_others.xml\" value=\"0.2694746376811594\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_message_self.xml\" value=\"0.17831813576494426\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_message_system.xml\" value=\"0.26268115942028986\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/layout/row_pesquisa.xml\" value=\"0.26268115942028986\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/menu/activity_drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/ProjetosAndroid/ipca_plus/app/src/main/res/menu/drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/Asus/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_search.xml\" value=\"0.25\" />\r\n        <entry key=\"..\\:/Users/Asus/Documents/GitHub/ipca_plus/app/src/main/res/menu/drawer.xml\" value=\"0.128125\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/all_rounded_corners_dialog.xml\" value=\"0.22135416666666666\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/ic_menu_slideshow.xml\" value=\"0.22135416666666666\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/pop_up_round_corners.xml\" value=\"0.22135416666666666\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/round_corner_drawer.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/rounded_dialog.xml\" value=\"0.22135416666666666\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/rounded_shape.xml\" value=\"0.3828125\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_drawer_activty.xml\" value=\"0.28306159420289856\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_splash_screen.xml\" value=\"0.20520833333333333\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/app_bar_main.xml\" value=\"0.28306159420289856\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/dialog_add_file.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/dialog_select_image.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/dialog_select_name.xml\" value=\"0.20520833333333333\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/nav_header_main.xml\" value=\"0.28306159420289856\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/menu/activity_drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/menu/drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_chat.xml\" value=\"0.14010416666666667\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_drawer_activty.xml\" value=\"0.13020833333333334\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/activity_tab.xml\" value=\"0.14010416666666667\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/app_bar_main.xml\" value=\"0.13020833333333334\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/content_main.xml\" value=\"0.13020833333333334\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/fragment_calendar.xml\" value=\"0.264\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/fragment_chats.xml\" value=\"0.14010416666666667\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/fragment_slideshow.xml\" value=\"0.14010416666666667\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/layout/nav_header_main.xml\" value=\"0.13020833333333334\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/menu/activity_drawer.xml\" value=\"0.25416666666666665\" />\r\n        <entry key=\"..\\:/Users/i/AndroidStudioProjects/ipca_plus/app/src/main/res/menu/drawer.xml\" value=\"0.25416666666666665\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/drawable/chat_photo.xml\" value=\"0.3769230769230769\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/drawable/gradient_shadow.xml\" value=\"0.3769230769230769\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/drawable/ic_video.xml\" value=\"0.3769230769230769\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/drawable/shadow.xml\" value=\"0.3769230769230769\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_add_event.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_calendar.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_chat.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_contacts.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_drawer_activty.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_profile.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_register.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_rgpd_end.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_schedule.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_search.xml\" value=\"0.5\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_tab.xml\" value=\"0.26766304347826086\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/app_bar_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/content_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/nav_header_main.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/row_chat.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/row_message_self.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/row_pesquisa.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/row_user.xml\" value=\"0.33\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/row_user_in_chat.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/menu/activity_drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"..\\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/menu/drawer.xml\" value=\"0.36666666666666664\" />\r\n        <entry key=\"app/src/main/res/drawable/button_register.xml\" value=\"0.3425925925925926\" />\r\n        <entry key=\"app/src/main/res/drawable/event_shape.xml\" value=\"0.31203703703703706\" />\r\n        <entry key=\"app/src/main/res/drawable/ic_baseline_add_24.xml\" value=\"0.3671875\" />\r\n        <entry key=\"app/src/main/res/drawable/ic_baseline_dehaze_24.xml\" value=\"0.3671875\" />\r\n        <entry key=\"app/src/main/res/drawable/ic_frame_4.xml\" value=\"0.3671875\" />\r\n        <entry key=\"app/src/main/res/drawable/ic_lg_ipca.xml\" value=\"0.36153846153846153\" />\r\n        <entry key=\"app/src/main/res/drawable/pop_up_round_corners.xml\" value=\"0.36153846153846153\" />\r\n        <entry key=\"app/src/main/res/drawable/round_corner_drawer.xml\" value=\"0.21354166666666666\" />\r\n        <entry key=\"app/src/main/res/drawable/rounded_shape.xml\" value=\"0.20208333333333334\" />\r\n        <entry key=\"app/src/main/res/layout/activity_chat.xml\" value=\"0.1265625\" />\r\n        <entry key=\"app/src/main/res/layout/activity_drawer.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/layout/activity_drawer_activty.xml\" value=\"0.14402173913043478\" />\r\n        <entry key=\"app/src/main/res/layout/activity_login.xml\" value=\"0.19427083333333334\" />\r\n        <entry key=\"app/src/main/res/layout/activity_search.xml\" value=\"0.32563405797101447\" />\r\n        <entry key=\"app/src/main/res/layout/activity_tab.xml\" value=\"0.33\" />\r\n        <entry key=\"app/src/main/res/layout/activity_welcome.xml\" value=\"0.33\" />\r\n        <entry key=\"app/src/main/res/layout/app_bar_drawer.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/layout/app_bar_main.xml\" value=\"0.1707193515704154\" />\r\n        <entry key=\"app/src/main/res/layout/content_drawer.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/layout/content_main.xml\" value=\"0.32563405797101447\" />\r\n        <entry key=\"app/src/main/res/layout/fragment_gallery.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/layout/fragment_home.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/layout/fragment_official_chats.xml\" value=\"0.32563405797101447\" />\r\n        <entry key=\"app/src/main/res/layout/fragment_tab.xml\" value=\"0.3489583333333333\" />\r\n        <entry key=\"app/src/main/res/layout/nav_header_main.xml\" value=\"0.32563405797101447\" />\r\n        <entry key=\"app/src/main/res/layout/notification.xml\" value=\"0.5352697095435685\" />\r\n        <entry key=\"app/src/main/res/layout/row_chat.xml\" value=\"0.32563405797101447\" />\r\n        <entry key=\"app/src/main/res/layout/row_message_self.xml\" value=\"0.33\" />\r\n        <entry key=\"app/src/main/res/menu/activity_drawer.xml\" value=\"0.35104166666666664\" />\r\n        <entry key=\"app/src/main/res/menu/drawer.xml\" value=\"0.325\" />\r\n      </map>\r\n    </option>\r\n  </component>\r\n  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_11\" default=\"true\" project-jdk-name=\"11\" project-jdk-type=\"JavaSDK\">\r\n    <output url=\"file://$PROJECT_DIR$/build/classes\" />\r\n  </component>\r\n  <component name=\"ProjectType\">\r\n    <option name=\"id\" value=\"Android\" />\r\n  </component>\r\n</project>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/.idea/misc.xml b/.idea/misc.xml
---- a/.idea/misc.xml	(revision 0c2a68c42b50b4b3ea948154925251e9c79e8962)
-+++ b/.idea/misc.xml	(date 1642014853492)
-@@ -116,10 +116,13 @@
-         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/round_corner_drawer.xml" value="0.33" />
-         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/rounded_dialog.xml" value="0.22135416666666666" />
-         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/drawable/rounded_shape.xml" value="0.3828125" />
-+        <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_chat_more.xml" value="0.36666666666666664" />
-         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_drawer_activty.xml" value="0.28306159420289856" />
-+        <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_profile.xml" value="0.29528985507246375" />
-         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_splash_screen.xml" value="0.20520833333333333" />
-         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/app_bar_main.xml" value="0.28306159420289856" />
-         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/dialog_add_file.xml" value="0.36666666666666664" />
-+        <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/dialog_notifications_manager.xml" value="0.36666666666666664" />
-         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/dialog_select_image.xml" value="0.36666666666666664" />
-         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/dialog_select_name.xml" value="0.20520833333333333" />
-         <entry key="..\:/Users/diogo/Documents/GitHub/ipca_plus/app/src/main/res/layout/nav_header_main.xml" value="0.28306159420289856" />
-@@ -147,7 +150,6 @@
-         <entry key="..\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_drawer_activty.xml" value="0.36666666666666664" />
-         <entry key="..\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_profile.xml" value="0.36666666666666664" />
-         <entry key="..\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_register.xml" value="0.36666666666666664" />
--        <entry key="..\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_rgpd_end.xml" value="0.36666666666666664" />
-         <entry key="..\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_schedule.xml" value="0.36666666666666664" />
-         <entry key="..\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_search.xml" value="0.5" />
-         <entry key="..\:/Users/nunoi/Documents/GitHub/ipca_plus/app/src/main/res/layout/activity_tab.xml" value="0.26766304347826086" />
Index: app/src/main/java/com/singularity/ipcaplus/chat/ChatMoreActivity.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.singularity.ipcaplus.chat\r\n\r\nimport android.annotation.SuppressLint\r\nimport android.app.ActionBar\r\nimport android.content.Intent\r\nimport android.graphics.Bitmap\r\nimport android.graphics.BitmapFactory\r\nimport android.graphics.Color\r\nimport android.graphics.drawable.ColorDrawable\r\nimport android.os.Bundle\r\nimport android.provider.MediaStore\r\nimport android.util.Log\r\nimport android.view.View\r\nimport android.widget.Button\r\nimport android.widget.EditText\r\nimport android.widget.ImageView\r\nimport android.widget.TextView\r\nimport androidx.appcompat.app.AlertDialog\r\nimport com.google.android.material.bottomsheet.BottomSheetDialog\r\nimport com.google.firebase.auth.FirebaseAuth\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.google.firebase.storage.FirebaseStorage\r\nimport com.singularity.ipcaplus.LoginActivity\r\nimport com.singularity.ipcaplus.R\r\nimport com.singularity.ipcaplus.databinding.ActivityChatMoreBinding\r\nimport com.singularity.ipcaplus.drawer.DrawerActivty\r\nimport com.singularity.ipcaplus.utils.ActivityImageHelper\r\nimport com.singularity.ipcaplus.utils.Backend\r\nimport com.singularity.ipcaplus.utils.Utilis\r\nimport com.singularity.ipcaplus.utils.Utilis.calculateInSampleSize\r\nimport com.theartofdev.edmodo.cropper.CropImage\r\nimport com.theartofdev.edmodo.cropper.CropImageView\r\nimport java.io.ByteArrayOutputStream\r\n\r\nclass ChatMoreActivity : ActivityImageHelper() {\r\n\r\n    lateinit var imageViewGroup: ImageView\r\n    lateinit var imageViewDialog: ImageView\r\n    lateinit var chat_id: String\r\n    var is_admin: Boolean = false\r\n    private lateinit var binding: ActivityChatMoreBinding\r\n\r\n    @SuppressLint(\"WrongConstant\")\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_chat_more)\r\n\r\n        overridePendingTransition(R.anim.slide_in_up, R.anim.slide_stay)\r\n\r\n        // Create the layout for this fragment\r\n        binding = ActivityChatMoreBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        // Create Action Bar\r\n        supportActionBar?.setDisplayHomeAsUpEnabled(true)\r\n        supportActionBar?.setHomeAsUpIndicator(R.drawable.ic_arrow_back_24)\r\n        supportActionBar?.title = \"Definições do grupo\"\r\n        supportActionBar?.displayOptions = ActionBar.DISPLAY_SHOW_CUSTOM\r\n        supportActionBar?.setCustomView(R.layout.custom_bar_layout)\r\n        findViewById<TextView>(R.id.AppBarTittle).text = \"Definições de grupo\"\r\n        // Back button\r\n        findViewById<ImageView>(R.id.BackButtonImageView).setOnClickListener{\r\n            finish()\r\n        }\r\n\r\n        // Get previous data\r\n        chat_id = intent.getStringExtra(\"chat_id\").toString()\r\n        val chat_name = intent.getStringExtra(\"chat_name\").toString()\r\n        is_admin = intent.getBooleanExtra(\"is_admin\", false)\r\n        binding.textViewGroupName.text = chat_name\r\n\r\n        // Get Group Image\r\n        imageViewGroup = binding.imageViewGroup\r\n        Utilis.getFile(this, \"chats/$chat_id/icon.png\", \"png\") { bitmap ->\r\n            imageViewGroup.setImageBitmap(bitmap)\r\n        }\r\n\r\n        binding.seeGroupMembers.setOnClickListener {\r\n            val intent = Intent(this, ChatMembersActivity::class.java)\r\n            intent.putExtra(\"chat_id\", chat_id)\r\n            intent.putExtra(\"is_admin\", is_admin)\r\n            startActivity(intent)\r\n        }\r\n\r\n        if (is_admin) {\r\n            binding.changeGroupName.setOnClickListener {\r\n                openSelectNameDialog()\r\n            }\r\n\r\n            binding.changeGroupImage.setOnClickListener {\r\n                openSelectImageDialog()\r\n            }\r\n            binding.deleteChat.setOnClickListener {\r\n                Backend.deleteChat(chat_id) {\r\n                    val intent = Intent(this, LoginActivity::class.java)\r\n                    startActivity(intent)\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            binding.changeGroupName.visibility = View.GONE\r\n            binding.changeGroupImage.visibility = View.GONE\r\n            binding.deleteChat.visibility = View.GONE\r\n        }\r\n\r\n        binding.groupFiles.setOnClickListener {\r\n            val intent = Intent(this, ChatFilesActivity::class.java)\r\n            intent.putExtra(\"chat_id\", chat_id)\r\n            startActivity(intent)\r\n        }\r\n\r\n        binding.notifications.setOnClickListener {\r\n            val dialog = BottomSheetDialog(this, R.style.AppBottomSheetDialogTheme)\r\n            val view = layoutInflater.inflate(R.layout.dialog_notifications_manager, null)\r\n            dialog.setContentView(view)\r\n            dialog.show()\r\n        }\r\n\r\n        binding.securityNumberVerification.setOnClickListener {\r\n            val intent = Intent(this, VerifySecurityNumberActivity::class.java )\r\n            intent.putExtra(\"chat_id\", chat_id)\r\n            startActivity(intent)\r\n        }\r\n\r\n        binding.leaveGroup.setOnClickListener {\r\n\r\n            Backend.removeUserFromChat(chat_id, Firebase.auth.currentUser!!.uid)\r\n\r\n            val intent = Intent(this, LoginActivity::class.java)\r\n            startActivity(intent)\r\n        }\r\n\r\n    }\r\n\r\n    // When the support action bar back button is pressed, the app will go back to the previous activity\r\n    override fun onSupportNavigateUp(): Boolean {\r\n        onBackPressed()\r\n        return true\r\n    }\r\n\r\n\r\n    /*\r\n        This function display a dialog window with a text box to edit chat name\r\n     */\r\n    private fun openSelectImageDialog() {\r\n\r\n        // Variables\r\n        val dialog = BottomSheetDialog(this, R.style.AppBottomSheetDialogTheme)\r\n        val view = layoutInflater.inflate(R.layout.dialog_select_image, null)\r\n        dialog.setContentView(view)\r\n        dialog.show()\r\n        imageViewDialog = view.findViewById(R.id.imageViewChatPhoto)\r\n\r\n\r\n        Utilis.getFile(this,\"chats/$chat_id/icon.png\", \"png\") { bitmap ->\r\n\r\n            view.findViewById<ImageView>(R.id.imageViewChatPhoto).setImageBitmap(bitmap)\r\n        }\r\n\r\n        imageViewDialog.setOnClickListener {\r\n            checkPermission(android.Manifest.permission.READ_EXTERNAL_STORAGE, STORAGE_PERMISSION_CODE)\r\n            dialog.dismiss()\r\n        }\r\n\r\n    }\r\n\r\n\r\n    /*\r\n        This function display a dialog window with a text box to edit chat name\r\n     */\r\n    private fun openSelectNameDialog() {\r\n\r\n        // Variables\r\n        val dialog = BottomSheetDialog(this, R.style.AppBottomSheetDialogTheme)\r\n        val row = layoutInflater.inflate(R.layout.dialog_select_name, null)\r\n        dialog.setContentView(row)\r\n        dialog.show()\r\n\r\n\r\n        row.findViewById<EditText>(R.id.editTextName).setText(binding.textViewGroupName.text.toString())\r\n\r\n        row.findViewById<Button>(R.id.buttonSave).setOnClickListener {\r\n            val newName = row.findViewById<EditText>(R.id.editTextName).text.toString()\r\n            Backend.changeChatName(chat_id, newName)\r\n            dialog.dismiss()\r\n            binding.textViewGroupName.text = newName\r\n        }\r\n\r\n    }\r\n\r\n\r\n    /*\r\n       This function happen after picking photo, and make changes in the activity\r\n    */\r\n    override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\r\n        super.onActivityResult(requestCode, resultCode, data)\r\n\r\n        if(requestCode == IMAGE_REQUEST_CODE && resultCode == RESULT_OK){\r\n            CropImage.activity(data?.data)\r\n                .setGuidelines(CropImageView.Guidelines.ON)\r\n                .setAspectRatio(1,1)\r\n                .start(this)\r\n        }\r\n\r\n        if (requestCode == CropImage.CROP_IMAGE_ACTIVITY_REQUEST_CODE) {\r\n            val result = CropImage.getActivityResult(data)\r\n            if (resultCode == RESULT_OK) {\r\n                imageViewGroup.setImageURI(result.uri)\r\n\r\n                val userId = FirebaseAuth.getInstance().currentUser!!.uid\r\n                val storageRef = FirebaseStorage.getInstance().getReference(\"chats/$chat_id/icon.png\")\r\n\r\n                // compressing image\r\n                val bitmap = MediaStore.Images.Media.getBitmap(contentResolver, result.uri)\r\n                val byteArrayOutputStream = ByteArrayOutputStream()\r\n                bitmap.compress(Bitmap.CompressFormat.JPEG, 6, byteArrayOutputStream)\r\n                val reducedImage: ByteArray = byteArrayOutputStream.toByteArray()\r\n\r\n                storageRef.putBytes(reducedImage)\r\n                    .addOnSuccessListener {\r\n\r\n                        Log.i(\"xxx\", \"Success uploading Image to Firebase!!!\")\r\n\r\n                        storageRef.downloadUrl.addOnSuccessListener {\r\n\r\n                            //getting image url\r\n                            Log.i(\"xxx\",it.toString())\r\n                            Utilis.uploadFile(it, \"chats/$chat_id/icon.png\")\r\n\r\n                        }.addOnFailureListener {\r\n\r\n                            Log.i(\"xxx\", \"Error getting image download url\")\r\n                        }\r\n\r\n                    }.addOnFailureListener {\r\n\r\n                        Log.i(\"xxx\", \"Failed uploading image to server\")\r\n\r\n                    }\r\n            }\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/singularity/ipcaplus/chat/ChatMoreActivity.kt b/app/src/main/java/com/singularity/ipcaplus/chat/ChatMoreActivity.kt
--- a/app/src/main/java/com/singularity/ipcaplus/chat/ChatMoreActivity.kt	(revision 8e96e253b18fde6ba59a95a8201590b51e0a7e05)
+++ b/app/src/main/java/com/singularity/ipcaplus/chat/ChatMoreActivity.kt	(date 1642463511212)
@@ -113,6 +113,10 @@
         binding.notifications.setOnClickListener {
             val dialog = BottomSheetDialog(this, R.style.AppBottomSheetDialogTheme)
             val view = layoutInflater.inflate(R.layout.dialog_notifications_manager, null)
+
+
+
+
             dialog.setContentView(view)
             dialog.show()
         }
